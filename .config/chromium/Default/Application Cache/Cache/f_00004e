define("HubsExtension/Browse/SkinnyBrowse/SkinnyBrowseTile",["require","exports","f","i","o","ko","Fx/Assets/Assets","Fx/Controls/Button","FxInternal/Controls/Grid2/GridB","FxInternal/Data/ArrayListNavigator","HubsExtension/Browse/BrowseClientStrings","HubsExtension/ResourceMap/ResourceMapClientStrings","HubsExtension/_generated/BladeReferences","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/ArmHelpers/Models/ArmResourceInstance","HubsExtension/Common/AssetTypeCache","HubsExtension/Common/BrowseCuration","HubsExtension/Common/HubsObservables","HubsExtension/Common/RecentResources","HubsExtension/Common/ResourceIconMap","HubsExtension/Browse/BrowseArea","HubsExtension/_generated/HtmlTs/BrowseGrid2/BrowseBlades/Templates/NameColumn"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){"use strict";function ct(n,t,i,r,u){return{id:n,name:f.observable(t),width:f.observable(i),activatable:u,format:r}}function at(n,t){var i=n&&n.browseType;i===3?(t.externalLink(!0),t.linkUri(n.browseLinkUri)):
i===4&&(t.externalLink(!0),t.linkUri(g.buildInstanceLink(n.browseLinkUri,t.id,t.locationId)))}function vt(n,t,u){var h=!1;d.checkItemKind({setIcon:n.icon,setIsPreview:function(t){n.isPreview(t&&n.useAssetTypePreview)},setKindBlade:function(t,i){n.bladeName(t);n.bladeExtension(i);h=!0},setUseResourceMenu:n.useResourceMenu,setAssetTypeDisplayName:function(t){var i=n.resourceOrGroup;n.assetType(t||n.assetType()||i.type)},setLowerAssetTypeDisplayName:function(t){var i=n.resourceOrGroup;n.ariaAssetType(t||n.ariaAssetType()||i.type)}},t,f.unwrap(n.kind),u);var e=u.assetTypeInformation,c=n.bladeName()||e.bladeName,s=et.addToModel(n.cloudName,{id:n.id,referrerInfo:{sessionId:ot.sessionId,instance:y.toResourceInstance(n.resourceOrGroup)}}),o=c&&!n.useResourceMenu()?g.makeBladeReference(n.cloudName,n.bladeExtension()||e.bladeExtensionName||e.extensionName,c,s):new a.ResourceMenuBladeReference(s),l=function(){return Q(o)};!h&&e.dynamicBladeServiceViewModel&&(l=function(){return Q(r.Extension.getViewModelsDefinition.
acquireObject(r.Rpc.client,r.Extension.getWindowId({name:u.extensionName,cloudName:n.cloudName}),{type:it.Constants.ViewModelTypes.ViewModel,name:e.dynamicBladeServiceViewModel,initialState:null,createSelectable:!1})).then((function(t){var f=t.getValue(),r=f.content,u;return typeof r.onInputsSet!="function"?(lt.warning("Dynamic blade service had no onInputsSet."),t.dispose(),o):(u=r.onInputsSet({assetId:n.id,usage:yt.Usage.DynamicAssetSelection}),Q(u||!0).then((function(){var t=r.bladeName();return t?g.makeBladeReference(n.cloudName,r.extensionName()||e.extensionName,t,s):o})).catch((function(){return o})).finally((function(){i.disposeViewModelProperties(t.getValue());t.dispose()})))})).catch((function(){return lt.error("Failed to get the dynamic blade service during browse."),o}))});n.bladeReferenceSource(l);n.typeDeferred.resolve(!0)}function kt(n,t){return tt.isSubscriptionId(n)?b.getSubscriptionInfoPromise(tt.parseSubscriptionDescriptor(n).subscription,t).then((function(n){return n&&n.uniqueDisplayName})
):tt.isResourceGroupId(n)?Q(tt.parseResourceGroupDescriptor(n).resourceGroup):tt.isResourceId(n)?Q(tt.parseResourceDescriptor(n).resource):Q(null)}var it=i.Base,ut=it.Constants.ResourceTypes,et=r.Extension.CloudName,st=i.ViewModels,tt=st.Services.ResourceTypes,yt=st.Services.DynamicBlade,pt=r.ViewModels.Controls.Lists,wt=window,ot=wt.fx.environment,lt=it.Diagnostics.createLog(n),rt=ut.ResourceGroups.toLowerCase(),ft=ut.RecentResources.toLowerCase(),ht=ut.AllResources.toLowerCase(),bt=new pt.Grid2.Formatters.HtmlTemplate({template:nt()}),dt=(function(){function n(n,t,i){var r=this,u,l,e;this._resourceType=f.observable();this._shouldSeeMore=f.observable();this._showRecents=f.observable();this._shouldShowGrid=f.observable();this._usePreview=!1;this._maximumRowCount=f.observable();this._ariaLabel=f.observable();this._subscriptions=f.observable();this.addAllowed=f.observable(!0);this.loading=f.observable();this.showTopBar=f.observable();this.showTypeIcon=f.observable();this.typeIcon=f.observable(
);this.showTypeLabel=f.observable();this.typeLabel=f.observable();this.showNoRowsDetails=f.observable();this.allItems=f.observableArray([]);this.partialErrors=f.observable(!1);this.noRowsTitle=f.observable();this.noRowsDescription=f.observable();this.noRowsLink=f.observable();this.noRowsLinkText=f.observable();this.noRowsCreateText=f.observable();this.refreshTitle=c.refreshCommand;this.seeMoreTitle=c.seeMore;this.partialErrorsTitle=c.browseAllResourcesError;this.iconHead=c.Columns.Icon.title;this.nameHead=c.Columns.Name.title;this.typeHead=c.Columns.AssetType.title;this.locationHead=c.Columns.Location.title;this.refreshIcon=it.Images.Refresh();this.partialErrorsIcon=it.Images.StatusBadge.Error();this.previewIcon=it.Images.Polychromatic.Preview();this.linkIcon=it.Images.Hyperlink();this.noRowsLinkIcon=it.Images.Hyperlink();this.container=n;u=this._lifetime=n.createChildLifetime();this._dataContext=i;this.noRowsCreateButton=o.create(this.container,{text:this.noRowsCreateText,style:0,onClick:
function(){return r.noRowsCreate()}});l=new h(u,{sourceItems:this.allItems,getId:function(n){return n.id}});this.gridViewModel=new s.ViewModel(u,{dataNavigator:l,selection:{dynamicSelectionProvider:this._buildResourceSelection.bind(this),activationMode:2,selectionMode:2,activationContainer:this.container},ariaLabel:this._ariaLabel,getRowAriaLabel:function(n){return c.Aria.rowDescription.format(n.name,n.ariaAssetType()||c.AssetTypeNames.AllResource.lowerSingular)},showHeader:!1});var a=ct("name",c.Columns.Name.title,"160px",bt,!0),v=ct("assetType",c.Columns.AssetType.title,"100px"),y=ct("location",c.Columns.Location.title,"80px");this.showNoRowsDetails(!0);e=-1;f.explicitComputed(u,[this.container.size,this._resourceType],(function(){var t=r.container.size(),n=t&&t.dimensions.width,i=t&&t.dimensions.height,u,o,s,f;r._shouldShowGrid(n>=145&&i>=145);r.showTopBar(r._shouldShowGrid()&&i>=235);r.showTypeIcon(n<=55);r.showTypeLabel(r.showTypeIcon()&&i<=55);u=(r._resourceType()||"").toLowerCase(
);o=[a];n>=325&&u!==rt&&o.push(v);(n>=505&&u!==rt||n>=325&&u===rt)&&o.push(y);r.gridViewModel.columns(o);r.showNoRowsDetails(n>=325&&i>=325);t&&(s=r.showTopBar()?74:48,f=Math.floor((i-s)/31),r._maximumRowCount(f),f!==e&&(r._allItemsRaw||u===ft)&&(e=f,f>0&&r._populateWithConfig()))}));this.showGrid=f.explicitComputed(u,[this._shouldShowGrid,this.allItems],(function(){return r._shouldShowGrid()&&(r.allItems().length!==0||(r._resourceType()||"").toLowerCase()===ft)}));this.showSeeMore=f.explicitComputed(u,[this.showGrid,this._shouldSeeMore],(function(){return r.showGrid()&&r._shouldSeeMore()}));this.showNoRows=f.explicitComputed(u,[this.loading,this._shouldShowGrid,this.allItems],(function(){return!r.loading()&&r._shouldShowGrid()&&r.allItems().length===0&&(r._resourceType()||"").toLowerCase()!==ft}));this.showNoRowsCreate=f.explicitComputed(u,[this.showNoRows,this.addAllowed],(function(){return r.showNoRows()&&r.addAllowed()}));this._eventWatcher=new g.ArmEventWatcher;n.configureSelectable({supplyBladeReferenceAsync:
this._getPartBladeReference.bind(this)})}return n.prototype._recentResourceHandler=function(n){var t=n.assetTypeInformation,r=n.location,u=tt.parseResourceManagerDescriptor(n.resourceId),e=u.resourceGroup&&tt.buildResourceGroupIdFromSubscriptionAndResourceGroupName(u.subscription,u.resourceGroup),i={id:n.resourceId,name:n.name,icon:f.observable(t.icon),resourceType:t.resourceType,kind:n.resourceKind,location:f.observable(this._locationDisplayMap[(r||"").toLowerCase()]||r||""),locationId:r,assetType:f.observable(t.compositeDisplayName.singular),ariaAssetType:f.observable(t.compositeDisplayName.lowerSingular),isPreview:f.observable(t.isPreview),useAssetTypePreview:this._usePreview,externalLink:f.observable(),linkUri:f.observable(),resourceOrGroup:null,resourceGroupId:e,cloudName:n.cloudName,useResourceMenu:f.observable(!1),bladeContainer:this.container,bladeName:f.observable(),bladeExtension:f.observable(),bladeReferenceSource:f.observable(),typeDeferred:Q.defer(),needTypeInformation:f.observable(
!1)};return tt.isResourceGroupId(i.id)||tt.isSubscriptionId(i.id)||(at(t,i),i.bladeName&&i.bladeName(t.bladeName),i.bladeExtension&&i.bladeExtension(t.bladeExtensionName||t.extensionName),i.isPreview(t.isPreview&&i.useAssetTypePreview),vt(i,i.id,{assetTypeInformation:t,extensionName:t.extensionName})),i},n.prototype._sliceList=function(){var f=this,e=this._resourceType();if(!e){this.allItems([]);this._shouldSeeMore(!1);return}var r=(e||"").toLowerCase()===ft,o=this._recentsView&&this._recentsView()||[],s=this._allItemsRaw||[],h=this.container.size();if(!(this._allItemsRaw||r)||!h){this.allItems([]);this._shouldSeeMore(!1);return}if(this._maximumRowCount()<=0){this.allItems([]);this._shouldSeeMore(!1);return}var c=i.convertArrayToMap(s,(function(n){return(n.id||"").toLowerCase()}),i.identity),l=r?o.length:s.length,a=r||this._showRecents(),v=a&&o||[],t=i.convertArrayToMap(v,(function(n){return n.lowerCaseResourceId}),i.identity),n=u.keys(t).slice(0,this._maximumRowCount()).map((function(n){return f.
_recentResourceHandler(t[n])}));!r&&n.length<this._maximumRowCount()&&(n.forEach((function(n){t[(n.id||"").toLowerCase()]=null})),i.forEachKey(c,(function(i,r){n.length<f._maximumRowCount()&&t[i]!==null&&(n.push(r),t[i]=null)})));this.allItems(n);this._shouldSeeMore(l>n.length)},n.prototype._updateAssetTypes=function(n,t){var f=this,u,r;this._assetTypes=this._assetTypes||[];t&&(u=i.convertArrayToMap(this._assetTypes,(function(n){return n.cloudName+"/"+n.lowerCaseExtension+"/"+n.lowerCaseAssetType}),(function(){return!0})),t.forEach((function(n){u[n.cloudName+"/"+n.lowerCaseExtension+"/"+n.lowerCaseAssetType]||f._assetTypes.push(n)})));t=this._assetTypes;r=!1;t&&this._allItemsRaw&&this._allItemsRaw.forEach((function(n){if(n.needTypeInformation()){var i=e.findAssetTypeInformation(n.resourceType,t);i&&(r=!0,n.needTypeInformation(!1),n.icon(i.icon),n.assetType(i.compositeDisplayName.singular),n.ariaAssetType(i.compositeDisplayName.lowerSingular),(n.resourceType||"").toLowerCase()!==rt&&(at(i,n),n.bladeName&&
n.bladeName(i.bladeName),n.bladeExtension&&n.bladeExtension(i.bladeExtensionName||i.extensionName),n.isPreview(i.isPreview&&n.useAssetTypePreview),vt(n,n.id,{assetTypeInformation:i,extensionName:i.extensionName})))}}));(this._allItemsRaw&&r||this._recentsView&&this._recentsView().length)&&n&&this._sliceList()},n.prototype._getAssetTypes=function(n){var t=this;return p.getAssetTypesInformation(n).then((function(n){n.subscribeAndRun(t._populateLifetime,(function(n){t._needType?(t._typeDeferred&&t._typeDeferred.promise.isPending&&t._typeDeferred.resolve(null),t.refresh()):t._updateAssetTypes(!0,n)}))}))},n.prototype._updateLocations=function(n,t){t&&(this._locationDisplayMap=t);t=this._locationDisplayMap;t&&this._allItemsRaw&&this._allItemsRaw.forEach((function(n){var i=n.locationId;i&&n.location(t[(i||"").toLowerCase()]||i)}));(this._allItemsRaw||this._recentsView&&this._recentsView().length)&&n&&this._sliceList()},n.prototype._updateTitles=function(n,t,i){var e=this,r=this.container,u=this.partTitleOverride||
n,f;this._scope?(this.assetTitleOverride&&Q(this.assetTitleOverride)||kt(this._scope,this.cloudName)).then((function(n){n&&(r.partTitle(u),r.assetName(n),e.typeLabel(n))})):(f=this._filter,r.partTitle(f?c.mapResourceCollectionTitle.format(f,u):u),this.typeLabel(r.partTitle()),i?(this._subTitleLifetime&&this._subTitleLifetime.dispose(),this._subTitleLifetime=r.createChildLifetime(),this._subscriptions.subscribeAndRun(this._subTitleLifetime,(function(){b.getSelectedSubscriptionsLabel(e.cloudName).then((function(n){r.assetName(n||"")}))}))):r.assetName(""))},n.prototype._getResourceTypeConfig=function(){var n=this,r=this._typeDeferred=Q.defer(),t=r.promise,f,u;return this._needType=!0,f=0,u=function(){p.getMergedResourceTypeAssetTypeInformation(n._resourceType(),n.cloudName).then((function(u){var f=u.base,o;if(t.isPending()){n._needType=!1;n._typeDeferred=null;n.container.recover();n.partialErrors(!1);var h=[f].concat(u.associated||[]),y=h.some((function(n){return n.browseType!==3&&n.browseType!==
4})),p=h.some((function(n){return n.routingType!==i.Extension.ResourceRoutingType.Tenant}));n._showRecents(y);var w=(n._kind||"").toLowerCase(),e=n._kind&&f.kinds&&i.find(f.kinds,(function(n){return(n.name||"").toLowerCase()===w})),s=f.compositeDisplayName.service||f.compositeDisplayName.plural,l=f.compositeDisplayName.lowerPlural,a=e&&e.pluralDisplayName||n._kind&&c.CollectionTitle.kindFilter.format(s)||s,v=e&&e.lowerPluralDisplayName||n._kind&&c.CollectionTitle.kindFilter.format(l)||l;n._updateTitles(a,v,p);n.typeIcon(e&&e.icon||f.icon||it.Images.Polychromatic.ResourceDefault());n.typeLabel(a);n._ariaLabel(c.Aria.resourceDescription.format(v));n.noRowsTitle(c.NoResources.base.format(e&&e.pluralDisplayName||f.compositeDisplayName.service||f.compositeDisplayName.lowerPlural));n.noRowsDescription(f.description||c.emptyDescription);o=(f.links||[])[0]||{};n.noRowsLink(o.uri||o.Uri);n.noRowsLinkText(o.title||o.Title);st.Internal.markAsPreview(n.container,!!f.isPreview);n._usePreview=u.associated.
some((function(n){return n.isPreview!==f.isPreview}));e&&(e.marketplaceItemId||e.marketplaceMenuItemId)?(n._marketplaceItemId=e.marketplaceItemId,n._marketplaceMenuItemId=e.marketplaceMenuItemId,n.noRowsCreateText(c.CreateResources.type.format(e.pluralDisplayName||s))):(n._marketplaceItemId=f.marketplaceItemId,n._marketplaceMenuItemId=f.marketplaceMenuItemId,n.noRowsCreateText(c.CreateResources.type.format(s)));n._assetTypes=[f];n._assetTypes.push.apply(n._assetTypes,u.associated);r.resolve(new g.ResourcesSource(n._assetTypes))}})).catch((function(i){t.isPending()&&(++f<10?Q.delay(5e3).then((function(){t.isPending()&&u()})):(n._typeDeferred=null,r.reject(i)))}))},u(),this.container.operations.add(t),t},n.prototype._getPartBladeReference=function(){var n,t;if(this.bladeReferenceOverride)return this.bladeReferenceOverride();if(n=this._resourceType(),!n)return null;t=et.addToModel(this.cloudName,{resourceType:n,filter:this._filter,kind:this._kind,scope:this._scope});switch((n||"").toLowerCase())
{case ht:return Q(new a.BrowseAllResourcesBladeReference(t));case rt:return Q(new a.BrowseResourceGroupBladeReference(t));case ft:return Q(new a.BrowseRecentResourcesBladeReference(et.addToModel(this.cloudName,{filter:this._filter})));default:return Q(new a.BrowseResourceBladeReference(t))}},n.prototype._sourceHandler=function(n,t,i,r){var u=this,e=n.cloudName,o=function(n){return i.matchSubscription(n)};return t.forEach((function(t){var i,s,h;tt.isResourceId(t.id)?(i=t,g.showResource(i,n,o)&&(h={id:i.id,name:(i.name||i.id||"unknown").split("/").last(),icon:f.observable(it.Images.Polychromatic.ResourceDefault()),resourceType:tt.buildResourceTypeFromResourceId(i.id),kind:i.kind,location:f.observable(),locationId:i.location,assetType:f.observable(),ariaAssetType:f.observable(),isPreview:f.observable(),useAssetTypePreview:u._usePreview,externalLink:f.observable(),linkUri:f.observable(),resourceOrGroup:i,resourceGroupId:tt.buildResourceGroupIdFromResourceId(i.id),cloudName:e,useResourceMenu:
f.observable(!1),bladeContainer:u.container,bladeName:f.observable(),bladeExtension:f.observable(),bladeReferenceSource:f.observable(),typeDeferred:Q.defer(),needTypeInformation:f.observable(!0)},r.push(h))):tt.isResourceGroupId(t.id)&&(s=t,g.showResourceGroup(s,n,o)&&(h={id:s.id,name:s.name||s.id||"unknown",icon:f.observable(it.Images.Polychromatic.ResourceGroup()),resourceType:ut.ResourceGroups,kind:null,location:f.observable(),locationId:s.location,assetType:f.observable(l.AssetTypeNames.ResourceGroup.singular),ariaAssetType:f.observable(l.AssetTypeNames.ResourceGroup.lowerSingular),isPreview:f.observable(),useAssetTypePreview:u._usePreview,externalLink:f.observable(),linkUri:f.observable(),resourceOrGroup:t,resourceGroupId:s.id,cloudName:e,useResourceMenu:f.observable(!0),bladeContainer:u.container,bladeReferenceSource:f.observable(),typeDeferred:Q.defer(),needTypeInformation:f.observable(!1)},h.bladeReferenceSource((function(){return Q(new a.ResourceGroupMapBladeReference(et.addToModel(
e,{id:s.id,referrerInfo:{sessionId:ot.sessionId,instance:y.toResourceInstance(t)}})))})),h.typeDeferred.resolve(!0),r.push(h)))})),r.length<=this._maximumRowCount()},n.prototype._populateProperties=function(n,t,i,r,u){var e=this,f;this.container.recover();this.partialErrors(!1);this._showRecents(i);this.typeLabel(n.plural);this._updateTitles(n.plural,n.lowerPlural,i);this.typeIcon(t);this._scope&&(f=void 0,tt.isResourceId(this._scope)?f=tt.buildResourceTypeFromResourceId(this._scope):tt.isResourceGroupId(this._scope)?f=ut.ResourceGroups:tt.isSubscriptionId(this._scope)&&(f=ut.Subscriptions),f&&p.getResourceTypeAssetTypeInformation(f,this.cloudName,!0).then((function(n){n&&e.typeIcon(n.icon)})));r&&(this.noRowsTitle(r),this.noRowsDescription(c.emptyDescription),this.noRowsLink(ot.hubsLinks.emptyBrowseLink),this.noRowsLinkText(c.learnMore),this.noRowsCreateText(u))},n.prototype._populateWithConfig=function(){var n=this,t;return this._populateLifetime&&this._populateLifetime.dispose(),this._populateLifetime=
this.container.createChildLifetime(),this.loading(!0),t=this._configSource&&this._configSource.then((function(t){return t&&t.getResources(n._populateLifetime,{sourceHandler:n._sourceHandler.bind(n),loading:n.loading,partialErrors:n.partialErrors,cloudName:n.cloudName,filter:n._filter,scope:n._scope,kind:n._kind,excludedResourceTypes:n._excludedTypes,telemetry:v.makeResourceManagerTelemetry("BrowseTile")}).then((function(t){n._allItemsRaw=null;t&&t.subscribeAndRun(n._populateLifetime,(function(t){n._allItemsRaw=t.filter((function(n){return!!n}));n._updateAssetTypes(!1);n._updateLocations(!1);n._sliceList()}))}))})).catch((function(){n.container.fail(c.browseAllResourcesError)})),(t||Q()).then((function(){n._recentsView&&n._recentsView.subscribeAndRun(n._populateLifetime,(function(){n._sliceList()}))})),t&&this.container.operations.add(t),t},n.prototype._getItemBladeReference=function(n){var t=n,i,r,u,f;return t?(i=t.bladeReferenceSource(),r=function(){return Q(new a.ResourceMenuBladeReference(et.addToModel(
t.cloudName,{id:t.id,referrerInfo:{sessionId:ot.sessionId,instance:y.toResourceInstance(t.resourceOrGroup)}})))},i||!p.onlyPartialResultsAvailable()?(i||r)():(u=p.onlyPartialResultsAvailable.fxAwaitAndRun(t.bladeContainer,(function(n){return!n})),f=Q.any([Q.delay(5e4),u,t.typeDeferred.promise]).then((function(){return(t.bladeReferenceSource()||r)()})),f)):null},n.prototype._buildResourceSelection=function(n,t){var i=this._getItemBladeReference(t);return i&&i.then((function(n){return r.ViewModels.getBladeSelection(t.cloudName,n.extensionName,n.bladeName,n.parameters)}))},n.prototype.onInputsSet=function(n){var t=this,r,u;return this.container.revealContent(),this.cloudName=et.readFromInputs(n),this._resourceType(n.resourceType||ut.AllResources),this._kind=n.kind,this._filter=n.filter,this._scope=n.scope,b.getLocationDisplayNames(this.cloudName).then((function(n){t._updateLocations(!0,n)})),b.getSelectedSubscriptions(this.cloudName).then((function(n){n.subscribeAndRun(t._lifetime,(function(n){t._subscriptions(
i.convertArrayToMap(n,(function(n){return n.subscriptionId.toLowerCase()}),(function(){return!0})))}))})),r=function(n,r,u){var e=i.convertArrayToMap(n,(function(n){return(n.assetId||"").toLowerCase()}),i.wrap(!0)),f=t._allItemsRaw;f&&i.remove(f,(function(n){return e[(u(n)||"").toLowerCase()]})).length&&t._sliceList()},u=(this._resourceType()||"").toLowerCase()===rt,this._eventWatcher.attachEventWatch(this._resourceType(),{resourceGroupDeleted:function(n,t){return r(n,t,(function(n){return(u?n.id:n.resourceGroupId)||""}))},resourceDeleted:function(n,t){return r(n,t,(function(n){return n.id||""}))}}),w.getExcludedResourceTypes(this.cloudName).then((function(n){return t._excludedTypes=n,t.refresh()}))},n.prototype.noRowsCreate=function(){var n=this;this.container.openBladeAsync(g.getCreateBlade({cloudName:this.cloudName,resourceType:this._resourceType(),marketplaceItemId:this._marketplaceItemId,marketplaceMenuItemId:this._marketplaceMenuItemId,listScope:this.listScope,listScopeLocation:this.listScopeLocation,
createFlowPromise:this._createFlowPromise,onCreateFlowPromise:function(t){n._createFlowPromise=t}}),{asSubJourney:!0})},n.prototype.seeMore=function(){var n=this._getPartBladeReference();n&&this.container.openBladeAsync(n)},n.prototype.refresh=function(){var i=this,t,n=(this._resourceType()||"").toLowerCase(),s=k.getRecentsManager().recentsList,e=tt.isResourceManagerId(this._scope),h=(this._scope||"").toLowerCase(),o,u;this._recentsView=f.pureComputed((function(){var t=i._subscriptions()||{};return s().filter((function(u){var o=tt.parseResourceManagerDescriptor(u.lowerCaseResourceId),f=r.Extension.isEqualCloudName(u.cloudName,i.cloudName)&&(e||t[o.subscription])&&(!e||(u.lowerCaseResourceId||"").startsWith(i._scope.toLowerCase()+"/"));switch(n){case ht:return f&&tt.isResourceId(u.resourceId);case rt:return f&&tt.isResourceGroupId(u.resourceId);case ft:return!0;default:return f&&u.assetTypeInformation.lowerCaseResourceType===n}}))}));this._usePreview=!0;o=!1;switch(n){case ht:this._populateProperties(
c.AssetTypeNames.AllResource,it.Images.Polychromatic.Grid(),!0,c.NoResources.default,c.CreateResources.default);this._marketplaceItemId=null;this._marketplaceMenuItemId=it.Constants.GalleryMenuItems.HomeMenuItem;this._ariaLabel(c.Aria.allDescription);t=Q(new g.AllResourcesSource);this.container.operations.add(this._getAssetTypes(this.cloudName));this.gridViewModel.noRowsMessage(null);break;case rt:u=l.AssetTypeNames.ResourceGroup.lowerPlural;this._populateProperties(l.AssetTypeNames.ResourceGroup,it.Images.Polychromatic.ResourceGroup(),!0,c.NoResources.base.format(u),c.CreateResources.type.format(u));this._marketplaceItemId="Microsoft.ResourceGroup";this._marketplaceMenuItemId=null;this._ariaLabel(c.Aria.resourceGroupsDescription);t=Q(new g.ResourceGroupsSource);this.gridViewModel.noRowsMessage(null);break;case ft:this._populateProperties(c.AssetTypeNames.RecentResource,it.Images.Polychromatic.Clock(),!1);this._ariaLabel(c.Aria.recentsDescription);this.container.operations.add(this._getAssetTypes(
this.cloudName));o=!0;this.gridViewModel.noRowsMessage(c.NoResources.base.format(c.AssetTypeNames.RecentResource.lowerPlural));break;default:this.loading(!0);this._showRecents(!0);this._updateTitles(n,n,!1);this.typeIcon(it.Images.Polychromatic.ResourceDefault());this.typeLabel(c.AssetTypeNames.AllResource.plural);t=this._getResourceTypeConfig();this.gridViewModel.noRowsMessage(null)}return this._configSource=t,this._populateWithConfig()},n})();t.SkinnyBrowseTile=dt}));define("HubsExtension/Browse/SkinnyBrowse/SkinnyListTiles",["require","exports","f","i","ko","HubsExtension/Browse/BrowseClientStrings","HubsExtension/_generated/BladeReferences","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/ResourceMap/ResourceMapCommon","HubsExtension/Browse/SkinnyBrowse/SkinnyBrowseTile"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var b=i.Base,l=r.Extension.CloudName,c=i.ViewModels.Services.ResourceTypes,w=b.Diagnostics.createLog(n),k=b.Constants.ResourceTypes.AllResources.toLowerCase(),d=r.Extension.
isEqualCloudName,a=c.isResourceGroupId,y=c.compareResourceGroupId,v=c.isResourceId,it=c.compareResourceId,p=(function(n){function t(t,i,r){var f=this;n.call(this,t,i,r);this.extenderViewModel=u.observable();t.registerForDispose((function(){f._disposeExtender();f._disposeDeleteWatcher()}))}return __extends(t,n),t.prototype._connectExtender=function(n){var t=this,u=null,f=a(n),e=v(n),o=!f&&!e;o&&(n.extensionName=(n.extensionName||"").toLowerCase(),n.assetType=(n.assetType||"").toLowerCase());this.extenderViewModel.subscribe(this.container,(function(s){t._disposeExtender();t._extenderLifetime=new r.TriggerableLifetimeManager;s.refreshPacket.subscribe(t._extenderLifetime,(function(r){var h,c,s;r!==u&&r&&(u=r,h=r,f&&a(h.resourceGroupId)&&y(h.resourceGroupId,n)&&t.refresh(),c=r,e&&v(c.resourceId)&&it(c.resourceId,n)&&t.refresh(),s=r,o&&(s.assetOwner||"").toLowerCase()===n.extensionName&&(s.assetType||"").toLowerCase()===n.assetType&&i.deepEquals(s.assetId,n.assetId)&&t.refresh())}))}))},t.prototype.
_disposeExtender=function(){this._extenderLifetime&&this._extenderLifetime.dispose();this._extenderLifetime=null},t.prototype._disposeDeleteWatcher=function(){this._deleteWatcher&&s.unregisterResourceGroupDeleteWatcher(this._deleteWatcher);this._deleteWatcher=null},t.prototype._watchResourceGroupScope=function(n){var t=this,i=function(n){t.addAllowed(n)},r=function(){var r=o.makeResourceManagerTelemetry("GridV1Browse.resourceGroup.checkState");s.ResourceGroupClient.getResourceGroup(t.listScope,n,r).then((function(n){if(y(n.id,t.listScope)){t.listScopeLocation=n.location;switch((n.provisioningState||"").toLowerCase()){case"accepted":case"deleting":case"deleted":case"failed":case"movingresources":i(!1);break;default:i(!0)}}})).catch((function(){i(!1)}))};this._disposeDeleteWatcher();this._deleteWatcher=s.registerResourceGroupDeleteWatcher({resourceGroupDeleteStarted:function(n,r){d(n,t.cloudName)&&y(r,t.listScope)&&i(!1)},resourceGroupDeleteFailed:function(n,i){d(n,t.cloudName)&&y(i,t.listScope)&&
r()}});r()},t.prototype._onResourceGroupInput=function(t,i){return this.partTitleOverride=f.mapResourceGroupBladeSubtitle,this.assetTitleOverride=c.parseResourceGroupDescriptor(i).resourceGroup,this.bladeReferenceOverride=function(){return Q(new e.ResourceMenuBladeReference(l.addToModel(t,{id:i})))},this.addAllowed(!1),this.listScope=i,this._watchResourceGroupScope(t),this._connectExtender(i),n.prototype.onInputsSet.call(this,l.addToModel(t,{resourceType:k,scope:i}))},t.prototype._onResourceInput=function(t,r){return this.partTitleOverride=f.mapResourceGroupBladeSubtitle,this.assetTitleOverride=c.parseResourceDescriptor(r).resource,this.bladeReferenceOverride=function(){return Q(i.Assets.mapResourceIdToBladeReference(r))},this._connectExtender(r),n.prototype.onInputsSet.call(this,l.addToModel(t,{resourceType:k,scope:c.buildResourceGroupIdFromResourceId(r)}))},t.prototype._onAssetInput=function(n){var t=this,i=n.cloudName;return o.mapAssetIdFromHubs(n,i).then((function(n){if(a(n))return t.
_onResourceGroupInput(i,n);if(v(n))return t._onResourceInput(i,n);t.container.notFound(f.pinnedPartNotValid);w.warning("Cannot use ResourceListTile for non-resource or resource group entity type.")}))},t})(h.SkinnyBrowseTile),g,nt,tt;t.ListTileBase=p;g=(function(n){function t(t,i,r){n.call(this,t,i,r);this.resourceGroup=u.observable()}return __extends(t,n),t.prototype.onInputsSet=function(t){var i=t.resourceGroup||t.id,r;if(this.resourceGroup(i),a(i))return n.prototype._onResourceGroupInput.call(this,l.readFromInputs(t),i);this.container.notFound(f.pinnedPartNotValid);r=v(i)&&c.buildResourceTypeFromResourceId(i)||"non-resource";w.warning("Cannot use ResourceGroupListTile for non-resource group entity type ("+r+").")},t})(p);t.ResourceGroupListTile=g;nt=(function(n){function t(t,i,r){n.call(this,t,i,r)}return __extends(t,n),t.prototype.onInputsSet=function(t){return n.prototype._onAssetInput.call(this,{cloudName:l.readFromInputs(t),extensionName:t.assetOwner,assetType:t.assetType,assetId:t.assetId})}
,t})(p);t.ResourceListTile=nt;tt=(function(n){function t(t,i,r){n.call(this,t,i,r);this.resourceGroup=u.observable()}return __extends(t,n),t.prototype.onInputsSet=function(t){var i=l.readFromInputs(t);if(a(t.id))return this.resourceGroup(t.id),n.prototype._onResourceGroupInput.call(this,i,t.id);if(v(t.id))return this.resourceGroup(c.buildResourceGroupIdFromResourceId(t.id)),n.prototype._onResourceInput.call(this,i,t.id);this.container.notFound(f.pinnedPartNotValid);w.warning("Cannot use ListResourceGroupTile for non-resource or resource group entity type.")},t})(p);t.ListResourceGroupTile=tt}));define("HubsExtension/_generated/Blades/SkinnyBrowse.css",["require","exports"],(function(){"use strict";return".ext-content-container{overflow:hidden;height:calc(100% - 30px)}.ext-icon-container{padding-top:20px;text-align:center;width:100%}.ext-browse-grid-parent{-webkit-flex:1 1 auto;flex:1 1 auto;position:relative}.ext-browse-grid{position:absolute;top:0;bottom:0;left:5px;right:0}.ext-right-side{text-align:right;width:100%;padding:5px;vertical-align:middle}.ext-right-side a.ext-simple-link:last-child{margin-right:20px}.ext-top-bar{display:flex;flex-wrap:nowrap;justify-content:space-between}.ext-top-bar-first{flex:10000 10000 auto;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ext-top-bar-other{flex:1 1 auto;margin-left:12px;white-space:nowrap;overflow:hidden}.ext-left-side{text-align:left;padding:5px;vertical-align:middle;margin:0 8px}.ext-simple-link{cursor:pointer}.ext-simple-icon-link{margin-left:2px;margin-right:4px;vertical-align:middle}.ext-norows-container{display:flex;flex-direction:column;align-items:center;justify-content:center}.ext-norows-image{width:35px;height:35px;margin-top:30px}.ext-norows-title{font-size:13px;text-align:center}.ext-norows-description{text-align:center;width:100%}.ext-norows-link{margin-left:3px}.ext-norows-linkImage{width:10px;height:10px;display:inline-block;margin-left:3px}"})
)