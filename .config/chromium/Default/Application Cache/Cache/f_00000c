define("Viva.Controls/Controls/Base/Viva.ExtensibleControl",["require","exports","f","i","o","Viva.Controls/Controls/Base/Viva.Base"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){var o=(function(){function n(){var n=this._ltm=new r.TriggerableLifetimeManager;this.vmBasicOption={ltm:n}}return n.prototype.setInstance=function(n){var t=this._widget=n;t.ltm.registerForDispose(this._ltm)},n.prototype.getName=function(){return null},n.prototype.getDependencies=function(){return null},u.defineProperty(n.prototype,"ltm",{get:function(){return this._ltm},enumerable:!0,configurable:!0}),n})(),t,e;n.Extension=o;t=(function(n){function t(t){n.call(this,t);this.extensions=t.extensions||[]}return __extends(t,n),t})(f.ViewModel);n.ViewModel=t;e=(function(n){function r(i,r,u){u=u||{};u.viewModelType=u.viewModelType||t;n.call(this,i,r,u);this._initializePlugins(this.options);this._addExtensionClasses()}return __extends(r,n),r.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.
prototype.dispose)||(n.prototype.dispose.call(this),this._removeExtensionClasses())},u.defineProperty(r.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.prototype.getPlugin=function(n){if(this.options.extensions)return i.find(this.options.extensions,(function(t){return t.getName()===n}))},r.prototype._initializePlugins=function(n){var i=this,t=[];this._loadPlugins(n.extensions,t);n.extensions=t;n.extensions.sort((function(n,t){var i=n.getOrder?n.getOrder():null,r=t.getOrder?t.getOrder():null;return i===r?0:i!==null&&r===null?-1:i===null&&r!==null?1:i<r?-1:1}));n.extensions.forEach((function(n){n.setInstance(i)}))},r.prototype._extensionTrigger=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return i=[],this.options.extensions.forEach((function(t){var u=t[n];u&&i.push(u.apply(t,r))})),i},r.prototype._loadPlugins=function(n,t){var i=this;n.forEach((function(r){var u=r.getDependencies()||[],f=u.filter((function(i){return!n.some((function(
n){return n.getName()===i.getName()}))&&!t.some((function(n){return n.getName()===i.getName()}))}));t.some((function(n){return n.getName()===r.getName()}))||t.push(r);f.length&&i._loadPlugins(u,t)}))},r.prototype._addExtensionClasses=function(){var n=this;this.options.extensions.forEach((function(t){n.element.addClass(t.getName())}))},r.prototype._removeExtensionClasses=function(){var n=this;this.options.extensions.forEach((function(t){n.element.removeClass(t.getName())}))},r})(f.Widget);n.Widget=e})(e||(e={})),e}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers",["require","exports"],(function(){"use strict";var n;return (function(n){function e(n,i,r){var u=n.charCodeAt(0);return t[n]||(t[n]="&#"+(i?0:r?(u-55296)*1024+n.charCodeAt(1)- -9216:u)+";")}function i(n){return n===null}function r(n){return n===undefined}function o(n){return i(n)||r(n)}function u(n){return n!==undefined&&n!==null?String(n).replace(f,e):""}function s(n){return u(n)}function h(n,t,i){return n.apply(this,
[t].concat(i))}var f=/[`><"'&\t\n\r\xa0-\xff]|([\x00-\x1f\x7f\x80-\x9f])|([\ud800-\udbff][\udc00-\udfff])/g,t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&#34;","`":"&#96;"};n.isNull=i;n.isUndefined=r;n.isNullOrUndefined=o;n.htmlEncode=u;n.attributeEncode=s;n.callFormatter=h})(n||(n={})),n}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Formatters.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid table tbody td img.azc-grid-formatters-icon{margin-right:6px;display:flex}.azc-grid .azc-grid-formatters-sprite{position:relative;overflow:hidden;display:inline-block;margin-right:6px;vertical-align:middle}.azc-grid .azc-grid-formatters-sprite img{position:absolute}")}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.PercentFormatter.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".fxc-percent-formatter{white-space:nowrap;min-height:5px;min-width:5px}.fxc-percent-formatter .fxc-percent-formatter-container{overflow:hidden;width:100%;position:relative;padding:0}.fxc-percent-formatter .fxc-percent-formatter-value{background-color:#00bcf2;height:19px;position:absolute;left:0;display:inline}.fxc-percent-formatter .fxc-percent-formatter-background{width:100%;height:19px;background-color:transparent}.fxc-percent-formatter .fxc-percent-formatter-bottom-bar{height:5px;margin-top:28px}.fxc-percent-formatter .fxc-percent-formatter-top-bar{height:5px;margin-bottom:28px}.fxc-percent-formatter .fxc-percent-formatter-text{position:absolute;left:1px;top:1px;display:inline;margin-top:7px}.fxc-percent-formatter .fxc-percent-formatter-notext{display:none}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters",["require","exports","a","ko","Viva.Controls/Util/Viva.DateUtil","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers","MsPortalFx/Globalization","MsPortalImpl/Base/Base.ImplUtils","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Formatters.css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.PercentFormatter.css"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(t){function nt(t,i){var s,l;return typeof t=="string"?(w.assert(!1,"String formatters are being deprecated. Use Intl.DateTimeFormatOptions instead. Format string: {0}".format(t)),l=function(n,t){return u.toString(n,t)}):l=function(t,r){var u="",f;try{u=e.DateTimeFormat.create(r).format(t)}catch(s){f="IntlPolyfill loaded: "+!!window.IntlPolyfill+"; given format: "+JSON.stringify(r)+"; Date: "+t.toString();isNaN(t.getTime())?o.logToExtension(n,i,2,f,{}):w.error(f);u=t.toString()}return u},s=function(n){var u=r.unwrap(n),
i=k(u),e=c.call(arguments,1);return i?f.callFormatter(h,l(i,t),e):""},a(s,k,s)}function tt(n){var i=c.call(arguments,1),u=i[0],t=r.unwrap(n),o=!p(u)&&!p(u.cssClass)?u.cssClass:"azc-text-primary",e=" class='"+o+"'";return t&&!f.isUndefined(t.text)&&!f.isUndefined(t.uri)?"<a"+e+" href='"+f.attributeEncode(f.callFormatter(s,t.uri,i))+"'"+(t.target?" target='"+f.attributeEncode(f.callFormatter(s,t.target,i))+"'":"")+">"+f.callFormatter(h,t.text,i)+"<\/a>":"<a"+e+" href='"+f.attributeEncode(f.callFormatter(s,t,i))+"'>"+f.callFormatter(h,t,i)+"<\/a>"}function l(n){var i=c.call(arguments,1),t=r.unwrap(n),u=t&&!f.isUndefined(t.text)&&!f.isUndefined(t.uri)?"<img class='"+b+"' src='"+f.attributeEncode(f.callFormatter(s,t.uri,i))+"' alt='' /><span class='fx-grid-formatters-icon-text'>"+f.callFormatter(h,t.text,i)+"<\/span>":"<img class='"+b+"' src='"+f.attributeEncode(f.callFormatter(s,t,i))+"' alt='' />";return"<span class='fx-grid-formatters-icon'>"+u+"<\/span>"}function it(n){return function(t)
{var u=c.call(arguments,1),i=r.unwrap(t);if(f.isNullOrUndefined(n[i])){if(n["##DEFAULT##"])return i=h(i),f.callFormatter(l,n["##DEFAULT##"].text?{uri:n["##DEFAULT##"].uri,text:n["##DEFAULT##"].text.replace(/##DEFAULT##/g,i)}:n["##DEFAULT##"],u)}else return f.callFormatter(l,n[i],u);return""}}function rt(n){return function(t){var u=c.call(arguments,1),i=r.unwrap(t),b="",v="",k=0,o,y,a,l,p,d,g,w,nt;n&&(n.backgroundColor&&(b="msportalfx-bgcolor-"+n.backgroundColor),n.barColorDefault&&(v="msportalfx-bgcolor-"+n.barColorDefault),n.barColorKey&&u[0].item&&u[0].item[n.barColorKey]&&(y=r.unwrap(u[0].item[n.barColorKey]),y&&(v="msportalfx-bgcolor-"+y)),n.textKey&&(o=u[0].item&&u[0].item[n.textKey]?r.unwrap(u[0].item[n.textKey]):""),n.textLocation&&(k=n.textLocation));a="fxc-percent-formatter-text";l="";switch(k){case 1:l=" fxc-percent-formatter-bottom-bar";break;case 2:l=" fxc-percent-formatter-top-bar";break;case 0:default:a=null}return(isNaN(i)||i instanceof Date)&&(i=0),p="",a&&(n.textKey||(
d=i/100,g=e.NumberFormat.create({style:"percent"}),o=g.format(d)),o=f.callFormatter(h,o,u),p="<div class='"+a+"'>"+o+"<\/div>"),i=Math.min(100,Math.max(0,i)),w=" min-width: 1px;",i===0&&(w=""),nt="<div class='azc-control fxc-percent-formatter' data-control='true' role='presentation' aria-atomic='true' aria-valuemin='0' aria-valuemax='100' aria-live='polite' aria-valuenow='"+i+"'><div class='fxc-percent-formatter-container'><div class='fxc-percent-formatter-value"+l+" "+v+"' style='width: "+i+"%;"+w+"'><\/div>"+p+"<div class='fxc-percent-formatter-background"+l+" "+b+"'><\/div><\/div><\/div>",f.callFormatter(s,nt,u)}}function ut(n){var t=v(n);return function(n){var i=c.call(arguments,1),u=r.unwrap(n);return f.callFormatter(h,t(u),i)}}function ft(n,i){return function(u){var o=c.call(arguments,1),e=r.unwrap(u),h=f.isNullOrUndefined(n[e]),l=h?"":f.attributeEncode(t.html(n[e].attribute)).replace(" ","_"),a=h?"":f.callFormatter(t.text,n[e].text,o);return"<div class='azc-grid-formatters-sprite "+
l+"'><img src='"+f.attributeEncode(f.callFormatter(s,i,o))+"' alt='' /><\/div>"+a}}function et(n){return function(t){var i=r.unwrap(t);return typeof i!="number"?i.toString():n?e.NumberFormat.create(n).format(i):e.NumberFormat.format(i)}}function ot(n,t,i){var u=n.createChildLifetime();return function(n,f){var e,o=r.bindingHandlers.vivaControl.registerCallback((function(){return e||r.ignoreDependencies((function(){var r=u.createChildLifetime();return e={template:t,data:i(r,n,f),ltm:r}}))}));return"<div class='azc-vivaControl' data-bind='vivaControl: \""+o+"\"'>"+t+"<\/div>"}}function a(n,t,i){if(!n)throw new Error("Display formatter has to be provided to create any formatters bundle.");var r=function(t,i){return n(t,i)};return t&&(r.sortFormatter=typeof t=="function"?t:v(t)),i&&(r.filterFormatter=typeof i=="function"?i:v(i)),r}function st(n){return a(n,n,n)}function ht(n){return g[n]}function v(n){return function(t){return f.isNullOrUndefined(n[t])?n["##DEFAULT##"]?n["##DEFAULT##"]:t:n[t]}}
function k(n){var t,i;switch(typeof n){case"number":t=new Date(n);break;case"string":i=u.parse(n);isNaN(i)||(t=new Date(i));break;case"object":n!==null&&n.constructor===Date&&(t=n)}return t}function s(n){var t=r.unwrap(n);return f.isNullOrUndefined(t)?"":t+""}function h(n){var t=r.unwrap(n);return f.isNullOrUndefined(t)?"":f.htmlEncode(t+"")}var y=MsPortalFx,d=y.Base.Diagnostics,p=y.isNullOrUndefined,c=i.prototype.slice,w=d.createLog(n),g={},b="azc-grid-formatters-icon";t.date=nt;t.uri=tt;t.icon=l;t.iconLookup=it;t.percentageBar=rt;t.textLookup=ut;t.spriteLookup=ft;t.numberFormat=et;t.htmlBindings=ot;t.bundle=a;t.defaultAll=st;t._callBackLookup=ht;t.html=s;t.text=h})(s||(s={})),s}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-grid table caption,.azc-grid.azc-grid-headerHidden thead{display:none}.azc-grid{position:relative;font-size:12px}.azc-grid .azc-grid-container{overflow-x:auto;overflow-y:visible}.azc-grid .azc-grid-cell-ellipse,.azc-grid table td,.azc-grid table thead tr th .azc-grid-header-wrapper span,.azc-grid table thead tr th span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.azc-grid .azc-grid-cellContent,.azc-grid .azc-vivaControl{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.azc-grid .azc-grid-cell-fullheight{height:100%}.azc-grid .azc-grid-empty td{border-top-style:solid;border-top-width:1px}.azc-grid table{width:100%;border:0;background-color:transparent;table-layout:fixed;border-spacing:0}.azc-grid table tbody:last-child tr:last-child td,.azc-grid table td{border-bottom-width:1px;border-bottom-style:solid}.azc-grid table td .azc-dropdown,.azc-grid table thead tr th .azc-grid-header-wrapper .azc-grid-headerlabel{display:block}.azc-grid table td:first-of-type,.azc-grid table th:first-child{padding-left:7px}.azc-grid table th:first-child{padding-left:0}.azc-grid table thead tr th{text-transform:uppercase;text-align:left;font-size:10px;padding:0;height:40px;position:relative;font-family:az_ea_font,"Segoe UI",wf_segoe-ui_bold,"Segoe UI Bold","Segoe WP Bold","Segoe WP",Tahoma,Arial,sans-serif;font-weight:700;line-height:38px}.azc-grid table thead tr th a{position:relative}.azc-grid table thead tr th .azc-grid-header-wrapper{padding:1px 0 1px 10px;position:relative}.azc-grid table td{padding:1px 0 1px 10px;height:33px}.azc-grid table td .azc-button,.azc-grid table td .azc-dropdown,.azc-grid table td .azc-editableCombo,.azc-grid table td .azc-fileUpload,.azc-grid table td .azc-optionPicker,.azc-grid table td button,.azc-grid table td input,.azc-grid table td select,.azc-grid table td textarea{font-size:12px!important}.azc-grid table .azc-grid-row:first-of-type td{border-top-width:1px;border-top-style:solid}.azc-grid a img{border:0}.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-external-hovered:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td.azc-br-muted,.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .fxs-portal-hover:hover:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td.azc-br-muted{border-color:#00bcf2}.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-external-hovered:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td:first-of-type,.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .fxs-portal-hover:hover:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td:first-of-type{border-left-color:#00bcf2}.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-external-hovered:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td:last-of-type,.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .fxs-portal-hover:hover:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td:last-of-type{border-right-color:#00bcf2}')})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1",["require","exports","f","o","ko","$","Viva.Controls/Util/Viva.TemplateEngine","Viva.Controls/Controls/Base/Viva.ExtensibleControl","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","MsPortalImpl/Resources/ImplScriptResources","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.css"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){function d(n){return n?"true":"false"}var g=i,f=jQuery,p="azc-grid",w="azc-grid-headerHidden",a="azc-grid-selectableRow",b="azc-grid-editableRow",t="azc-br-muted",nt="<!-- ko template: 'table' --><!-- /ko -->",tt="<div class='azc-grid-container "+t+"'>"+("<div class='azc-grid-tableContainer "+t+"'>")+("<div class='azc-grid-tableScrollContainer "+t+"'>")+"<!-- ko if: data.columns().length --><table class='azc-grid-tableHeader' role='presentation'><caption data-bind='text: data.summary'><\/caption><!-- ko template: 'header' --><!-- /ko --><\/table><div class='azc-grid-tableContent'><table class='azc-grid-full' role='presentation'><!-- ko template: 'colgroup' --><!-- /ko --><!-- ko template: 'body' --><!-- /ko --><\/table><\/div><!-- /ko --><\/div><\/div><label aria-live='polite' aria-atomic='true' class='fxs-hide-accessible-label' data-bind='text: $ctl._ariaLive'><\/label><\/div>",
it="<!-- ko template: 'colgroup' --><!-- /ko --><thead><tr role='row'><!-- ko template: { name: \"headerCell\", foreach: data.columns } --><!-- /ko --><\/tr><\/thead>",rt='<colgroup><!-- ko template: { name: "headerColumn", foreach: data.columns } --><!-- /ko --><\/colgroup>',ut='<col data-bind=\'attr: { "class": "col" + $index() }, style: { width: width }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }\' />',ft="<th scope='col' role='presentation' aria-readonly='true' data-bind='attr: { \"class\": \"azc-grid-column-header \" + cssClass}, css: { \"azc-collapsed-hidden\": $data.hiddenInCollapsed }'><div class='azc-grid-header-wrapper'><!-- ko template: \"headerCellContent\" --><!-- /ko --><\/div><\/th>",et="<span role='columnheader' class='azc-grid-headerlabel' data-bind='text: name, attr: { id: columnId, \"aria-hidden\": $ctl._ariaHiddenColumnHeader($data) }'><\/span>",ot="<!-- ko template: { name: ko.pureComputed(function () { return data.loading() ? 'templateLoading' : ($ctl._showNoRows() ? 'bodyNoItems' : 'bodyCore'); }) } --><!-- /ko -->",
st="<tbody class='azc-grid-groupdata' role='rowgroup'><!-- ko template: { name: 'bodyRows', foreach: data.items } --><!-- /ko --><\/tbody>",ht="<tbody role='rowgroup' class='azc-grid-empty' data-bind='if: data.noRowsMessage'><tr role='row'><td role='gridcell' class='"+t+" msportalfx-tooltip-overflow' data-bind='attr: { colspan: $ctl._getTotalColumns() }, html: data.noRowsMessage'><\/td><\/tr><\/tbody>",ct="<tbody role='rowgroup' class='azc-grid-empty'><tr role='row'><td role='gridcell' class='"+t+" msportalfx-tooltip-overflow' data-bind='attr: { colspan: $ctl._getTotalColumns() }'>"+i.encodeAttribute(c.Grid.loading)+"<\/td><\/tr><\/tbody>",lt="<!-- ko template: { name: 'bodyRowsCore', data: $ctl.getRowMetadata($data), context: function (metadata) { return { $disabled: metadata.disabled || $disabled }; } } --><!-- /ko -->",at='<tr role=\'row\' data-bind=\'attr: { "class": "azc-grid-row " + cssClass(), "aria-label": $ctl._getRowAriaLabel($data) && ariaLabel(), "aria-rowindex": $ctl.getRowIndex($index()) }\'><!-- ko template: { name: \'bodyCell\', foreach: $vm.columns } --><!-- /ko --><\/tr>',
vt='<td role=\'gridcell\' data-bind=\'template: { name: "bodyCellContent" }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }, attr: { "class": "azc-grid-cell '+t+' " + cssClass + (itemKey === "infoBalloon" ? "azc-grid-infoBalloon" : ""), "aria-describedby": columnId, "aria-label": $ctl._getCellAriaLabel($parent, $data) && $parent.cellAriaLabels[itemKey](), "aria-colindex" : $index() + 1, "aria-rowindex": $ctl.getRowIndex($parentContext.$index()) }\'><\/td>',yt="<div class='azc-grid-cellContent' data-bind='css: { \"azc-grid-cell-ellipse\": $data.enableEllipse, \"azc-grid-cell-fullheight\": $data.fullHeight }, trustedHtml: $ctl._cellFormat($parentContext.$parentContext.$index, $index, $parent, $data)'><\/div>",pt=0,l,k,v,y;(function(n){n[n.None=0]="None";n[n.Alt=1]="Alt";n[n.Meta=2]="Meta";n[n.Shift=4]="Shift";n[n.Ctrl=8]="Ctrl"})(n.ModifierKeys||(n.ModifierKeys={}));l=n.ModifierKeys;k=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(o.Extension);n.Extension=
k;v=(function(n){function t(t){n.call(this,t);this.summary=u.observable();this.showHeader=!0;this.columns=u.observableArray();this.items=u.observableArray();this.noRowsMessage=u.observable();this.events=f.noop;this.uri={};this.text={};this.sortByList=u.observableArray()}return __extends(t,n),t})(o.ViewModel);n.ViewModel=v;y=(function(n){function t(t,r,f){var o=this,l,s,h;f=f||{};f.viewModelType=f.viewModelType||v;n.call(this,t,r,f);this._ariaLive=u.observable("");this._readLoading=!1;this.id="grid1"+i.getUniqueId();this.templateEngine=new e.HtmlTemplateEngine;this._extensionTrigger("beforeCreate");this._showNoRows=u.pureComputed((function(){if(!o.options.items)return!0;var n=o.options.items(),t=n&&n.length||0,i=o._extensionTrigger("modifyRowNumber");return i.forEach((function(n){t+=n})),t===0}));this._setTemplates();l=this.getPlugin(a);this.element.addClass(p).attr({role:"grid","aria-multiselectable":d(l&&!!l._multiselect),"aria-readonly":d(!this.getPlugin(b)),id:this.id}).html(nt);this.options.
columns.subscribeAndRun(this.ltm,(function(n){o.element.attr("aria-colcount",n.length)}));s=this._extensionTrigger("getTotalItems").filter((function(n){return!!n}));s.length===1?s[0].subscribeAndRun(this.ltm,(function(n){o.element.attr("aria-rowcount",n)})):s.length===0?this.options.items.subscribeAndRun(this.ltm,(function(n){o.element.attr("aria-rowcount",n.length)})):this.element.attr("aria-rowcount",-1);h=this._extensionTrigger("getFirstObservableRowIndexObservable").filter((function(n){return!!n}));this.firstRowIndex=h.length>0&&!!h[0]?h[0]:u.observable(1);this.options.showHeader||this.element.addClass(w);this.options.loading.subscribe(this.ltm,(function(n){(n||o._readLoading)&&(o._readLoading=!0,n?o._ariaLive(c.Grid.Accessibility.loading):o._ariaLive(c.Grid.Accessibility.loaded))}));this._bindDescendants();this._attachEvents();this.options.summary.subscribeAndRun(this.subLifetime,(function(n){o.element.attr("aria-label",n);o.element.findByClassName("azc-grid-groupdata").attr("aria-label",n)}));
this._extensionTrigger("afterCreate")}return __extends(t,n),t.getCell=function(n,t,i){var r=n.find?n:n.element;return r.find(".azc-grid-row:eq("+t+") .azc-grid-cell:not([aria-hidden=true]):eq("+i+")")},t.prototype.getRowIndex=function(n){return this.getPlugin(b)?undefined:this.firstRowIndex()+n},t.getModifierKeys=function(n){return(n.altKey&&l.Alt)|(n.metaKey&&l.Meta)|(n.shiftKey&&l.Shift)|(n.ctrlKey&&l.Ctrl)},t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._extensionTrigger("beforeDestroy"),this._detachEvents(),this._cleanElement(p,w),n.prototype.dispose.call(this),this._extensionTrigger("afterDestroy"))},r.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),t.prototype.getRowMetadata=function(n){var e=this.options,r,t,u;return typeof n!="object"||!n?null:(r=function(t){return t&&t.item===n},t=i.find(this._allRows,r),t||(t=this._getNewRowMetadataEntries(),t.item=n,u=e.rowMetadata?e.rowMetadata.
first(r):null,u&&f.extend(!0,t,u),this._allRows.push(t)),t)},t.prototype.previous=function(){return this.getPlugin(a).previous()},t.prototype.next=function(){return this.getPlugin(a).next()},t.prototype._getAllRowMetadata=function(){return this._allRowsInited||(this._updateAllRowMetadata(),this._allRowsInited=!0),this._allRows},t.prototype._initializePlugins=function(t){this._allRows=[];n.prototype._initializePlugins.call(this,t)},t.prototype._initializeSubscriptions=function(t){var i=this,r;n.prototype._initializeSubscriptions.call(this,t);r=this.subLifetime;t.columns.subscribeAndRun(r,(function(n){i._normalizeColumns(n)}));this.$disabled.subscribeAndRun(r,(function(n){i.element.attr("aria-disabled",n)}));this.options.loading.subscribeAndRun(r,(function(n){i.element.attr("aria-busy",n?"true":null)}));t.items&&(t.items.subscribe(r,(function(n){var t=[],r=[];i._allRows.forEach((function(i){var u=n.some((function(n){return i.item===n}));u?t.push(i):r.push(i)}));r.forEach((function(n){i._extensionTrigger(
"shouldRetainRowMetadata",n).some((function(n){return n===!0}))&&t.push(n)}));i._allRows=t;i._updateAllRowMetadata()})),this._itemsPerKeyboardPage=u.computed(r,(function(){var n=i.options.items();return n&&n.length>20?10:5})))},t.prototype._attachEvents=function(){this._extensionTrigger("beforeAttachEvents");this.element.on("mouseenter.azcGrid","> .azc-grid-container .azc-grid-full > tbody > tr > td .azc-grid-cellContent, > .azc-grid-container .azc-grid-tableHeader > thead > tr > th .azc-grid-headerlabel",this._onMouseEnter=function(){var n=f(this),t=n.attr("title");n.find(">div,>span").length===0&&t!==n.text()&&(this.offsetWidth<this.scrollWidth?n.attr("title",n.text()):t&&n.removeAttr("title"))});this._extensionTrigger("afterAttachEvents")},t.prototype._detachEvents=function(){this._extensionTrigger("beforeDetachEvents");this._onMouseEnter&&(this.element.off("mouseenter.azcGrid",this._onMouseEnter),this._onMouseEnter=null);this._extensionTrigger("afterDetachEvents")},t.prototype._getNewRowMetadataEntries=
function(){var n={item:null,cssClass:u.observable("")},t=this._extensionTrigger("getDefaultRowMetadataProperties");return t.forEach((function(t){f.extend(!0,n,t)})),n},t.prototype._getNewColumnEntries=function(){var n={name:u.observable(""),itemKey:"",formatter:h.text,cssClass:"",width:u.observable(null)},t=this._extensionTrigger("getDefaultColumnProperties");return t.forEach((function(t){f.extend(!0,n,t)})),n},t.prototype._normalizeColumns=function(n){for(var t=this._getNewColumnEntries(),f=r.keys(t),i=!1,u=n.length,e=function(){var r=n[u];f.forEach((function(n){r[n]===undefined&&(r[n]=t[n],i=!0)}));g.isNullOrUndefined(r.columnId)&&(r.columnId="fxgridcol"+pt++);i&&(t=o._getNewColumnEntries(),i=!1)},o=this;u--;)e()},t.prototype._getTotalColumns=function(){var n=this.options.columns().length,t=this._extensionTrigger("getAdditionalColumns");return t.forEach((function(t){n+=t})),n},t.prototype._cellFormat=function(n,t,i,r){return(r.formatter||h.text)(i.item[r.itemKey],{item:i.item,rowNumber:n,columnNumber:
t,rowMetadata:i,column:r})},t.prototype._getCellAriaLabel=function(n,t){return t.getCellAriaLabel?n.cellAriaLabels&&n.cellAriaLabels[t.itemKey]?!0:(n.cellAriaLabels||(n.cellAriaLabels={}),n.cellAriaLabels[t.itemKey]=u.observable(),Q(t.getCellAriaLabel(n.item)).then((function(i){n.cellAriaLabels[t.itemKey](i)})),!0):null},t.prototype._getRowAriaLabel=function(n){var t=this;return this.options.getRowAriaLabel?n.ariaLabel?!0:(n.ariaLabel=u.observable(),u.computed(this.ltm,(function(){t.options.rowAriaLabelDependencies&&t.options.rowAriaLabelDependencies.forEach((function(t){u.unwrap(n.item[t])}));u.ignoreDependencies((function(){Q(t.options.getRowAriaLabel(n.item)).then((function(i){n.ariaLabel(i);t._extensionTrigger("setRowAriaLabel",n)}))}))})).extend({rateLimit:{timeout:100,method:"notifyWhenChangesStop"}}),!0):null},t.prototype._setTemplates=function(){var n=this.templateEngine;this._extensionTrigger("beforeSetTemplates",n);n.setTemplate({table:tt,header:it,headerColumn:ut,colgroup:rt,headerCell:
ft,headerCellContent:et,body:ot,bodyCore:st,bodyNoItems:ht,templateLoading:ct,bodyRows:lt,bodyRowsCore:at,bodyCell:vt,bodyCellContent:yt});this._extensionTrigger("afterSetTemplates",n)},t.prototype._updateAllRowMetadata=function(){var i=this,t=this.options,n;t.items&&(n=t.items(),n&&n.length&&n.forEach((function(n){i.getRowMetadata(n)})))},t.prototype._ariaHiddenColumnHeader=function(n){return Boolean(!n||!u.unwrap(n.name))},t})(o.Widget);n.Widget=y;u.bindingHandlers.azcGrid=s.getBindingHandler(y)})(l||(l={})),l}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.FocusableRow.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-focusableRow table tbody tr[aria-disabled=true] td>div{opacity:.5}.azc-grid-focusableRow table tbody tr[aria-disabled=true] td.azc-grid-infoBalloon>div{opacity:1}.azc-grid-focusableRow table tbody tr[aria-disabled=true] td .azc-dockedballoon{position:static}.azc-grid-focusableRow.azc-grid-mousedown{outline:0}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow",["require","exports","f","o","ko","$","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Base/JQueryHelper","MsPortalImpl/Base/Base.KeyboardHelper","Viva.Controls/Util/Viva.Util","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.FocusableRow.css"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function t(n){return n.find("> tbody > tr[data-grid-focusable]:not([aria-disabled=true]):not(.fxc-row-hidden)")}var w=i,b=w.isNullOrUndefined,v=window,k='attr: { "aria-disabled": $disabled, "data-grid-focusable": true }',d='attr: { tabindex: focused() ? "0" : null }',g='css: { "azc-row-disabled": $disabled }',y="azc-grid-tableContainer",p="."+y,nt="tbody tr[data-grid-focusable=true]:not([aria-disabled=true])",c=".azc-grid",l="rowFocus",a="tabindex",tt=(function(n){function w(t){n.call(this);this._options=t=t||{};t.focusable===undefined&&(t.focusable=u.observable(!0));t.focusableCursorEnabled=
t.focusableCursorEnabled||u.observable(!1);t.focusableCursorOptions=t.focusableCursorOptions||{wrapFocus:u.observable(!0),hasPreviousFocusRow:u.observable(!1),hasNextFocusRow:u.observable(!1)}}return __extends(w,n),r.defineProperty(w.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),w.isEditableControl=function(n){return n.is("input")||n.is("textarea")||n.is("select")||n.is("keygen")},w.prototype.setInstance=function(t){n.prototype.setInstance.call(this,t)},w.prototype.afterCreate=function(){var n=this;u.computed(this.ltm,(function(){var t=n._widget.element;n.options.focusable()?t.attr(a,0):t.removeAttr(a)}))},w.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore");t.addAttribute("tr","data-bind",[k,this._getRowFocusDataBindAttribute(),g]);this.externalHover||t.addAttribute("tr","class",["fxs-portal-hover","fxs-portal-focus"])},w.prototype.getDefaultRowMetadataProperties=function(){return{disabled:u.observable(!1),focused:
u.observable(!1)}},w.prototype.getOrder=function(){return 10},w.prototype.afterAttachEvents=function(){var i=this,n=this,t=this._widget.element,r=this.ltm;r.registerForDispose(t.setEvents(["click.azcGrid",nt,function(t){if(this===v.document.activeElement||f.contains(this,v.document.activeElement))n._updatePreviousNextFocusableState(f(this));else{var i=u.dataFor(this);i&&n._focusRow(this,i,t)}}],["keydown.azcGrid",function(t){var r=f(t.target),o=r.closest(c),v=r.is(c),h=v?null:r.closest("tr[data-grid-focusable]"),i,l=e.Widget.getModifierKeys(t),a=!0,s;if(!w.isEditableControl(r)||!n._isGridDataControl(r))if(s=n.options.focusableCursorOptions.wrapFocus(),l===e.ModifierKeys.None){switch(t.which){case 38:i=n._findPreviousFocusable(o,h,s);break;case 40:i=n._findNextFocusable(o,h,s);break;case 36:i=n._findFirstFocusable(o);break;case 35:i=n._findLastFocusable(o);break;case 33:case 34:i=n._findFocusableByPage(o,t.which);break;default:a=!1}i&&i.length&&n._focusRow(i,u.dataFor(i[0]),t);a&&t.preventDefault(
)}else l===e.ModifierKeys.Shift&&t.which===9&&n._focus(t)}],["mousedown.azcGrid",function(){t.addClass("azc-grid-mousedown");f("body").one("mouseup",(function(){t.removeClass("azc-grid-mousedown")}))}],["focus.azcGrid",function(i){f.contains(t[0],i.relatedTarget)||(n._focus(i),t.attr(a,-1))}]));this._widget.options.items.fxOnce(r,(function(){i._widget.element[0]===v.document.activeElement&&Q.nextTick((function(){var n=i._findFirstFocusable(i._widget.element);n.length&&i._focusRow(n,u.dataFor(n[0]))}))}),(function(n){return!!n.length}))},w.prototype.beforeDestroy=function(){this._widget.element.removeAttr(a).removeClass("azc-grid-mousedown")},w.prototype.getName=function(){return w.Name},w.prototype.focusRowByRowMetadata=function(n){var t=this._getRowByRowMetadata(n);t&&this._focusRow(t,n)},w.prototype.previous=function(n){var t;if(this.options.focusableCursorEnabled&&this.options.focusableCursorEnabled()){if(t=this._getRowByRowMetadata(n),t){var r=f(t),e=r.closest(c),i=this._findPreviousFocusable(
e,r,!1);i&&this._focusRow(i,u.dataFor(i[0]),f.Event(l))}}else throw new Error("Previous focusable cursor method will work only when focusableCursorEnabled option is set to true.");return Q()},w.prototype.next=function(n){var t;if(this.options.focusableCursorEnabled&&this.options.focusableCursorEnabled()){if(t=this._getRowByRowMetadata(n),t){var r=f(t),e=r.closest(c),i=this._findNextFocusable(e,r,!1);i&&this._focusRow(i,u.dataFor(i[0]),f.Event(l))}}else throw new Error("Next focusable cursor method will work only when focusableCursorEnabled option is set to true.");return Q()},w.prototype._findFirstFocusable=function(n){return t(n.find("table.azc-grid-full").eq(0)).first()},w.prototype._findFocusableByPage=function(n,t){var e;n=n.find("table.azc-grid-full").eq(0);var i=this._getPagedFocusableList(n),o=this._getFocusedItemIndex(n),s=this._widget._itemsPerKeyboardPage(),r=o<s?0:Math.floor(o/s),h=o%s,u;if(i.length>0)switch(t){case 33:h===0&&i[r-1]?u=i[r-1].first():(e=i[r],u=e&&e.first());break
case 34:i[r+1]?u=i[r+1].first():(e=i[r],u=e&&e.last())}return u?f(u):undefined},w.prototype._findLastFocusable=function(n){return t(n.find("table.azc-grid-full").eq(0)).last()},w.prototype._findNextFocusable=function(n,i,r){r===void 0&&(r=!0);var o=i?i.closest("table.azc-grid-full"):n.find("table.azc-grid-full").eq(0),e=t(o),u;if(i)for(u=0;u<e.length;u++)if(i[0]===e[u]&&u<e.length-1)return f(e[u+1]);return r?f(e[0]):null},w.prototype._findPreviousFocusable=function(n,i,r){r===void 0&&(r=!0);var o=i?i.closest("table.azc-grid-full"):n.find("table.azc-grid-full").eq(0),e=t(o),u;if(i)for(u=e.length-1;u>=0;u--)if(i[0]===e[u]&&u>0)return f(e[u-1]);return r?f(e[e.length-1]):null},w.prototype._focus=function(n){var r,e=this._widget.element,h=e.hasClass("azc-grid-mousedown"),l=n.type==="focus"&&!h,c=s.getModifierKeys(n),a=c===0&&(n.which===9||n.which===40||n.which===38),i,t;h?(i=f(n.target).closest("tr:not([aria-disabled=true])")[0],i&&(r=this._widget.getRowMetadata(u.dataFor(i).item),this._focusRow(
i,r),c===0&&(n.preventDefault(),n.stopPropagation()))):(a||l)&&(t=e.find("input, textarea, select, button, a, [tabindex=0], "+p).filter((function(n,t){var i=f(t);return(i.hasClass(y)||i.closest(p).length===0)&&o.isVisible(i)})),document.activeElement!==t[0]&&t[0]&&!f(t[0]).hasClass(y)?(this._focusElement(f(t[0])),n.preventDefault(),n.stopPropagation()):this._focusCurrentlyFocusableRow(n))},w.prototype._focusCurrentlyFocusableRow=function(n){var t,i,r=this._widget.element,f=r.find(".azc-grid-row").eq(0),e=s.getModifierKeys(n);f.length?t=f[0]:this._lastTabbableRowMetadata&&this._isRowDisplayed(this._lastTabbableRowMetadata)?(t=this._getRowByRowMetadata(this._lastTabbableRowMetadata),i=this._lastTabbableRowMetadata):t=this._findNextFocusable(r,null)[0];t&&(i=i||this._widget.getRowMetadata(u.dataFor(t).item),this._focusRow(t,i),e===0&&(n.preventDefault(),n.stopPropagation()))},w.prototype._focusElement=function(n){var t=n[0];t.focus();t.focus()},w.prototype._focusRow=function(n,t,i){var r=f(
n),u;this._lastTabbableRowMetadata&&this._lastTabbableRowMetadata.focused(!1);b(t)||(this._lastTabbableRowMetadata=t,t.focused(!0),u={focused:t,target:r},this._focusElement(r),i&&(this._widget.trigger(l,h.cloneEvent(i,l),u),this._widget.options.events("focus",u)),this._updatePreviousNextFocusableState(r))},w.prototype._getFocusedItemIndex=function(n){for(var i,r=this._getPagedFocusableList(n),f,e=this._widget._itemsPerKeyboardPage(),t=0;t<r.length;t++)for(i=0;i<r[t].length;i++)if(u.dataFor(r[t][i])===this._lastTabbableRowMetadata){f=t*e+i;break}return f},w.prototype._getFocusedRowMetadata=function(){return this._lastTabbableRowMetadata},w.prototype._getRowByRowMetadata=function(n){return i.find(this._widget.element.find("tbody tr").toArray(),(function(t){return u.dataFor(t)===n}))},w.prototype._getRowFocusDataBindAttribute=function(){return d},w.prototype._findPreviousAndNextFocusable=function(n,i,r){r===void 0&&(r=!0);var h=i?i.closest("table.azc-grid-full"):n.find("table.azc-grid-full").
eq(0),u=t(h),e,o,s;if(i)for(e=u.length-1;e>=0;e--)if(i[0]===u[e]){e>0&&(o=f(u[e-1]));e<u.length-1&&(s=f(u[e+1]));break}return o=o?o:r?f(u[u.length-1]):null,s=s?s:r?f(u[0]):null,{previous:o,next:s}},w.prototype._updatePreviousNextFocusableState=function(n){if(this.options.focusableCursorEnabled&&this.options.focusableCursorEnabled()){var i=this.options.focusableCursorOptions.wrapFocus(),r=n.closest(".azc-grid"),t=this._findPreviousAndNextFocusable(r,n,i);this.options.focusableCursorOptions.hasPreviousFocusRow(t.previous?!0:!1);this.options.focusableCursorOptions.hasNextFocusRow(t.next?!0:!1)}},w.prototype._getPagedFocusableList=function(n){for(var r=[],i=t(n).toArray(),u=this._widget._itemsPerKeyboardPage();i.length>0;)i.length<=u?r.push(i.splice(0)):r.push(i.splice(0,u));return r},w.prototype._isGridDataControl=function(n){return f.contains(this._widget.element.find(p)[0],n[0])},w.prototype._isRowDisplayed=function(n){return this._widget.element.find("tbody tr[data-grid-focusable=true]:not([aria-disabled=true])").
each((function(t,i){if(u.dataFor(i)===n)return!0})),!1},w.Name="azc-grid-focusableRow",w})(e.Extension);n.FocusableRowExtension=tt})(c||(c={})),c}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility",["require","exports","f","MsPortalImpl.Controls/Controls/Base/Loadable"],(function(n,t,i,r){"use strict";var u;return (function(n){function o(n,i){t[n.toString()]=i}function s(n,i){t[n.toString()]===i&&delete t[n.toString()]}function h(){t={}}function c(n,t){n.forEach((function(n){t.addClass(n.getName())}))}function l(n,t){n.forEach((function(n){t.removeClass(n.getName())}))}var f=i.forEachKey,e=(function(){function n(){}return n.prototype.setInstance=function(n){this._widget=n},n.prototype.getName=function(){return null},n.prototype.getDependencies=function(){return null},n})(),t,u;n.Extension=e;t={};n.defaultPlugins=[];n.registerPlugin=o;n.unregisterPlugin=s;n.unregisterAllPlugins=h;u=(function(i){function r(n,t,r){i.call(this,n,t,r);this._initializePlugins(t);c(this._plugins,this.
element)}return __extends(r,i),r.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(i.prototype.dispose)||(i.prototype.dispose.call(this),l(this._plugins,this.element))},r.prototype.getPlugin=function(n){return this._plugins?this._plugins.first((function(t){return t.getName()===n})):null},r.prototype._initializePlugins=function(i){var e=this,u=[],r=[];n.defaultPlugins.forEach((function(n){u.push(new n)}));f(t,(function(n,t){var r=parseInt(n,10);(i.extensions&r)===r&&u.push(new t)}));this._loadPlugins(u,r);this._plugins=r;r.sort((function(n,t){var i=n.getOrder?n.getOrder():null,r=t.getOrder?t.getOrder():null;return i===r?0:i!==null&&r===null?-1:i===null&&r!==null?1:i<r?-1:1}));r.forEach((function(n){n.setInstance(e)}))},r.prototype._extensionTrigger=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return i=[],this._plugins.forEach((function(t){t[n]&&i.push(t[n].apply(t,r))})),i},r.prototype._loadPlugins=function(n,t){var i=this;n.forEach((function(r){var u=r.getDependencies(
)||[],f=u.filter((function(i){return!n.some((function(n){return n.getName()===i.getName()}))&&!t.some((function(n){return n.getName()===i.getName()}))}));t.some((function(n){return n.getName()===r.getName()}))||t.push(r);f.length&&i._loadPlugins(u,t)}))},r})(r.Widget);n.Extensibility=u})(u||(u={})),u}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl",["require","exports","f","o","a","ko","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","MsPortalImpl/Base/Base.ImplUtils","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(t){function d(t,i){return function(r,u){switch(t){case s.uri:u=u||{};u.cssClass="msportalfx-link-primary"}var f=t(r,u);return c.sanitizeHTML(new l(f,n,i)).sanitizedMarkup}}function g(n,t){return n&&t&&n===t}var y=i.Base,l=h.ProvenanceContainer,p=y.Diagnostics,w=i.ViewModels.Controls.
Lists.Grid,a=w.Format,b=i.forEachKey,k=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(e.Extension),u,v;t.GridExtension=k;u=(function(t){function i(n,i,r){t.call(this,n,i,r);this._metadataDisposables=[];this._resetCallbackAdded=!1;this._extensionTrigger("beforeCreate");this._initializeWidgets();this._extensionTrigger("afterCreate")}return __extends(i,t),i.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(t.prototype.dispose)||(this._extensionTrigger("beforeDestroy"),this._metadataDisposables&&(this._metadataDisposables.forEach((function(n){var t=n.disposables||[];t.forEach((function(n){n.dispose()}))})),this._metadataDisposables=[]),this._resetCallbackAdded&&this.options.resetCallback(null),t.prototype.dispose.call(this),this._extensionTrigger("afterDestroy"))},r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.getRowMetadata=function(n){return this._instance.getRowMetadata(n)},i.
prototype._twoWayBinding=function(n,t,i){var r=n.createChildLifetime(),f=t(),e=i(),u=!1,o=function(n,t){if(!u)try{u=!0;n(t)}finally{u=!1}};return f?i(f):e&&t(e),t.subscribe(r,(function(n){o(i,n)})),i.subscribe(r,(function(n){o(t,n)})),r},i.prototype._resetExtensions=function(){var n=this._extensionTrigger("resetExtension");return Q.all(n)},i.prototype._initializeWidgets=function(){this._initializeNestedViewModel();this._instance=new o.Widget(this.element,this._nestedViewModel);this._widgets.push(this._instance);this._initializeExtensions();this._initializeVivaRowMetadata();this._setResetCallback()},i.prototype._getFormatter=function(n,t){var i,r=this._createOptions;switch(n){case a.Text:return s.text}if(i=this._extensionTrigger("getSafeFormatter",n,t,r.isTrusted).first((function(n){return n!==null})),i)return i;switch(n){case a.Html:i=s.html;break;default:i=this._extensionTrigger("getUnsafeFormatter",n,t,r.isTrusted).first((function(n){return n!==null}));i||(i=s.text)}return r.isTrusted||(i=d(
i,this.element)),i},i.prototype._connectMetadataAndDisposeSubscriptions=function(n,t){var i=this._getVivaItem(t);i&&this._canConnectRowMetadataProperties(i,t)&&(this._connectRowMetadataProperties(i,t),n.dispose())},i.prototype._disposeMetadataDisposables=function(n){var t,i=-1;this._metadataDisposables.some((function(r,u){return r.metadata===n?(t=r,i=u,!0):!1}));t&&((t.disposables||[]).forEach((function(n){n.dispose()})),this._metadataDisposables.splice(i,1))},i.prototype._initializeNestedViewModel=function(){var r=this,i=new o.ViewModel(this.vmBasicOption),t=this.options,u=this.ltm;i.summary=t.summary;i.showHeader=t.showHeader;i.sortByList=t.sortByList;i.loading=t.loading;i.actions=t._msPortalFxActions;i.getRowAriaLabel=t.getRowAriaLabel&&t.getRowAriaLabel.bind(t);i.rowAriaLabelDependencies=t.rowAriaLabelDependencies;i.noRowsMessage=f.observable();t.noRowsMessage&&f.computed(u,(function(){var u=t.noRowsMessage(),f=r._createOptions.isTrusted?u:c.sanitizeHTML(new l(u,n)).sanitizedMarkup;i.noRowsMessage(
f)}),this);i.columns=t.columns.mapInto(u,(function(n,t){var i=r._toNestedColumn(t);return r._extensionTrigger("columnAdded",n,t,i),i}));i.items=t.items;i.extensions=this._getExtensions(t.extensionsOptions||{});i.disabled=t.disabled;this._nestedViewModel=i},i.prototype._initializeExtensions=function(){this._extensionTrigger("initializeExtension")},i.prototype._setResetCallback=function(){var n=this;this.options.resetCallback()||(this.options.resetCallback((function(){return n._resetExtensions()})),this._resetCallbackAdded=!0)},i.prototype._toNestedColumn=function(n){var t={};return b(n,(function(n,i){t[n]=i})),t.pcColumn=n,t.formatter=null,n.format!==undefined&&(t.formatter=this._getFormatter(n.format,n.formatOptions||{})),t},i.prototype._initializeVivaRowMetadata=function(){var n=this,t=this.options.rowMetadata;t.subscribeArrayBulkChanges(this.ltm,(function(t,i){i.forEach((function(t){n._disposeMetadataDisposables(t)}));t.forEach((function(t){n._connectPortalAndVivaRowMetadataAsync(t)}))}));t.peek(
).forEach((function(t){n._connectPortalAndVivaRowMetadataAsync(t)}))},i.prototype._connectPortalAndVivaRowMetadataAsync=function(n){var r=this,t=this.ltm.createChildLifetime(),i=this._getVivaItem(n);i&&this._canConnectRowMetadataProperties(i,n)?this._connectRowMetadataProperties(i,n):(this._extensionTrigger("registerSubscriptionsToConnectMetadataProperties",t,n),this._nestedViewModel.items.subscribe(t,(function(){r._connectMetadataAndDisposeSubscriptions(t,n)})))},i.prototype._getVivaItem=function(n){var i=this._nestedViewModel.items().first((function(t){return n.item===t})),r,t;if(!i)for(r=this._extensionTrigger("getAdditionalItems"),t=0;t<r.length;t++)if(r[t]&&(i=r[t].first((function(t){return g(t,n.item)})),i))break;return i},i.prototype._canConnectRowMetadataProperties=function(n,t){return!this._extensionTrigger("disallowConnectRowMetadataProperties",n,t).some((function(n){return!!n}))},i.prototype._connectRowMetadataProperties=function(n,t){var i,u=this.getRowMetadata(n),r;t?(i=this._metadataDisposables.
first((function(n){return n.metadata===t})),i||(i={metadata:t,disposables:[]},this._metadataDisposables.push(i)),this._extensionTrigger("connectRowMetadataProperties",n,u,t).forEach((function(n){n&&i.disposables.push.apply(i.disposables,n)}))):(r=new p.Log("Grid"),r.debug("Metadata was not present and could not connect rowmetadata."))},i.prototype._getExtensions=function(n){var t=[];return this._extensionTrigger("getExtension",n).forEach((function(n){n&&t.push(n)})),t},i})(e.Extensibility);t.Widget=u;v=(function(n){function t(t,i){n.call(this,t,i,{isTrusted:!0})}return __extends(t,n),t})(u);t.TrustedWidget=v})(l||(l={})),l}));define("_generated/Less/MsPortalImpl.Controls/Controls/Lists/Grid1.Formatters.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".fxc-base.azc-grid .fx-grid-formatters-svg{display:flex;align-items:center;text-overflow:inherit;overflow:inherit}.fxc-base.azc-grid .fx-grid-formatters-svg.fx-grid-svgicon-center{justify-content:center;width:calc(100% + 10px);margin-left:-10px}.fxc-base.azc-grid .fx-grid-formatters-svg .fx-grid-formatters-svgtext{text-overflow:inherit;overflow:inherit}.fxc-base.azc-grid .fx-grid-formatters-svgicon{margin-right:6px;flex-shrink:0;width:12px;height:13px;position:relative}.fxc-base.azc-grid .fx-grid-formatters-icon{display:flex;align-items:center;text-overflow:inherit;overflow:inherit}.fxc-base.azc-grid .fx-grid-formatters-icon .fx-grid-formatters-icon-text{flex:1;min-width:0;text-overflow:inherit;overflow:inherit}")})
);define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Formatter",["require","exports","f","i","a","ko","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers","MsPortalImpl/Base/Base.Sanitization","_generated/Less/MsPortalImpl.Controls/Controls/Lists/Grid1.Formatters.css"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){function b(n){var t=f.unwrap(n),i=t&&!a(t.text)&&!a(t.uri)?t.uri:t;return c.sanitizeUri(i+"")}function g(n){return b(n)?s.icon(n):""}var v=r.Intl.DateTimeFormat,d=i.ViewModels.Controls.Lists.Grid,t=d.Format,l=s.date,p=h.attributeEncode,y=h.callFormatter,a=h.isUndefined,k=(function(n){function i(){n.apply(this,arguments)}return __extends(i,n),i.prototype.getName=function(){return"Formatter"},i.prototype.getOrder=function(){return 0},i.prototype.getSafeFormatter=
function(n,i){var r,u;switch(n){case t.ShortTime:return l(v.shortTimePattern,this._widget.element);case t.LongTime:return l(v.longTimePattern,this._widget.element);case t.ShortDate:return l(v.shortDatePattern,this._widget.element);case t.LongDate:return l(v.longDatePattern,this._widget.element);case t.MonthDay:return l(v.monthDayPattern,this._widget.element);case t.YearMonth:return l(v.yearMonthPattern,this._widget.element);case t.CustomDate:return l(i.dateFormat||"",this._widget.element);case t.Number:return s.numberFormat(i.numberFormat);case t.TextLookup:return s.textLookup(i.textLookup||{});case t.Icon:return g;case t.IconLookup:r=i.iconLookup||{};for(u in r)r.hasOwnProperty(u)&&(b(r[u])||delete r[u]);return s.iconLookup(r);case t.SvgIcon:return w.svgIcon;case t.SvgIconLookup:return w.svgIconLookup(i.svgIconLookup||{});case t.PercentageBar:return s.percentageBar(i.percentageBar||{})}return null},i.prototype.getUnsafeFormatter=function(n,i){switch(n){case t.Html:return s.html;case t.
TextLookup:return s.textLookup(i.textLookup||{});case t.Uri:return s.uri}return null},i})(o.GridExtension),w;n.FormatterExtension=k;e.defaultPlugins.push(k),(function(n){function t(n){var e=function(n){return n&&!a(n.type)},o=function(n,t,i){var r="image: "+p(f.toJSON(n)),u=i&&t?', style: { height:"'+p(t)+'", width: "'+p(i)+'" }':"";return"<span class='fx-grid-formatters-svgicon' data-bind='"+r+u+"'><\/span>"},h=u.prototype.slice.call(arguments,1),t=f.unwrap(n),c="",i,r;return(t&&!a(t.center)&&t.center&&(c=" fx-grid-svgicon-center"),i="<div class='fx-grid-formatters-svg"+c+"'>",t&&!a(t.svg)&&e(t.svg))?(r="",t.text&&!a(t.text)&&(r="<span class='fx-grid-formatters-svgtext'>"+y(s.text,t.text,h)+"<\/span>"),i+o(t.svg,t.height,t.width)+r+"<\/div>"):e(t)?i+o(t)+"<\/div>":t&&!a(t.text)?i+"<span class='fx-grid-formatters-svgtext'>"+y(s.text,t.text,h)+"<\/span><\/div>":""}function r(t){return function(r){for(var u,e,c=[],o=1;o<arguments.length;o++)c[o-1]=arguments[o];if(u=f.unwrap(r),h.isNullOrUndefined(
t[u])){if(t["##DEFAULT##"])return u=s.text(u),e=t["##DEFAULT##"],e.text&&(e=i.extend2(e,{text:e.text.replace(/##DEFAULT##/g,u)})),y(n.svgIcon,e,c)}else return y(n.svgIcon,t[u],c);return""}}n.svgIcon=t;n.svgIconLookup=r})(w=n.Formatters||(n.Formatters={}))})(l||(l={})),l}));define("_generated/Less/Viva.Controls/Controls/Forms/Viva.CheckBox.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-checkBox{display:inline-block;height:17px;vertical-align:top;outline:0;background-repeat:no-repeat;background-position:center;position:relative}.azc-checkBox input{display:inline-block;margin:0;padding:0;border-width:0;text-decoration:none;height:17px}.azc-checkBox span.azc-validation-border{display:inline-block;height:17px;width:17px!important;vertical-align:top;box-sizing:border-box;border-width:1px;border-style:solid;border-color:inherit}.azc-checkBox .azc-checkBox-svg{position:absolute;top:3px;left:3px}.azc-checkBox .azc-check-svg{top:3px;left:3px}.azc-checkBox .azc-indeterminate-svg{top:5px;left:5px}.azc-checkBox .azc-checkBox-invisible{display:none}")})
);define("Viva.Controls/Controls/Forms/Viva.CheckBox",["require","exports","o","ko","Viva.Controls/Controls/Base/Viva.ValidatableControl","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","MsPortalImpl/Base/Base.EventTypes","_generated/Less/Viva.Controls/Controls/Forms/Viva.CheckBox.css"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var c="azc-input",o="azc-checkBox",l="__azc-checkBox",a="<input class='azc-formControl' style='display: none;' type='checkbox' data-bind='attr: { name: $ctl._name, checked: $ctl._isChecked() }, value: $ctl._inputValue' name='' tabindex='-1' aria-hidden='true'/><span class='azc-fill-text azc-validation-border' data-bind='css: { \"fxs-br-error\": data.validationState() === 1, \"fxs-br-dirty\": data.dirty(), \"azc-disabled\": $disabled, \"azc-br-focused\": data.focused() }'><svg aria-hidden='true' focusable='false' class='azc-checkBox-svg azc-check-svg' data-bind='style: { visibility: $ctl._showCheckSvg } ' version='1.1' xmlns= http://www.w3.org/2000/svg' xmlns: xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='11px' height='11px' viewBox='0 0 16 16' enable-background='new 0 0 16 16' xml: space='preserve' ><path d='M0.6 8.9L0.1 8.3C0 8.1 0 7.9 0.1 7.7l1.5-1.4c0.1-0.1 0.2-0.1 0.3-0.1 0.1 0 0.2 0 0.3 0.1l4.2 4.5 7.3-9.3c0.1-0.1 0.2-0.1 0.3-0.1 0.1 0 0.2 0 0.2 0.1l1.7 1.3c0.1 0.1 0.1 0.1 0.1 0.2 0 0.1 0 0.2-0.1 0.3L6.6 15.2 0.6 8.9z'/><\/svg><svg aria-hidden='true' focusable='false' class='azc-checkBox-svg azc-indeterminate-svg' data-bind='style: { visibility: $ctl._showIndeterminateSvg }' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='7px' height='7px' enable - background='new 0 0 24 24' xml: space='preserve' ><rect width='7' height='7'><\/rect><\/svg><\/span>",
v=0,t=[],s,h;t[0]="false";t[1]="true";t[2]="mixed";s=(function(n){function t(t){n.call(this,t);this.state=r.observable(0);this.inputId=null;this.inputCheckedValue=r.observable("checked");this.inputIndeterminateValue=r.observable("indeterminate");this.isTriState=!1;this.value(0);this.canUserSetIndeterminate=r.observable(!0)}return __extends(t,n),t})(u.ViewModel);n.ViewModel=s;h=(function(n){function u(i,u,f){var h=this,y,e,w,p;f=f||{};f.viewModelType=f.viewModelType||s;n.call(this,i,u,f);this._isChecked=r.observable();this._showCheckSvg=r.observable();this._showIndeterminateSvg=r.observable();this._attributes={};y=this.ltm;e=this.options;this._attributes.role="checkbox";this._name=this.options.name||l+v++;i.addClass(o+" "+c).html(a);w=this._input=i.find("input");e.inputId&&w.attr("id",e.inputId);i.attr(this._attributes);this.$tabIndex.subscribeAndRun(y,(function(n){i.attr("tabindex",n)}));r.computed(y,e.value,(function(n){h._isChecked(n!==0);h._showCheckSvg(n===1?"visible":"hidden");h._showIndeterminateSvg(
n===2?"visible":"hidden");i.attr("aria-checked",t[n]||null)}));p=[];p[0]="unchecked";p[1]=e.inputCheckedValue;p[2]=e.inputIndeterminateValue;this._inputValue=r.computed(y,(function(){var n=p[e.value()];return r.unwrap(n)}));this.$disabled.subscribeAndRun(y,(function(n){h._input.prop("disabled",n);i.attr("aria-disabled",n);h._detachEvents();n||h._attachEvents()}));this._bindDescendants();this._afterCreate();this._supportsFocus(!0)}return __extends(u,n),u.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._cleanElement(o,c),this.element.removeAttr(i.keys(this._attributes).join(" ")),this._detachEvents(),this._input=null,n.prototype.dispose.call(this))},i.defineProperty(u.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),u.prototype.toggle=function(){var t=this.options.value(),n=1;t===1?n=0:this.options.isTriState&&this.options.canUserSetIndeterminate()&&t===0&&(n=2);this.options.value(n);this.element.trigger("fxvaluechanged")}
,u.prototype._isSameValue=function(n,t){return n===t},u.prototype._attachEvents=function(){var n=this;this._detachEvents();this._events={blur:function(){n.options.focused(!1)},click:function(t){n.toggle();n.element.closest("[role='gridcell']").length||t.stopPropagation()},focus:function(){n.options.focused(!0)},keyup:function(t){t.which===32&&(n.toggle(),t.stopPropagation())},keydown:function(n){if(n.which===32)return!1},mouseenter:function(){n.options.state()!==2&&n.options.state(1)},mouseleave:function(){n.options.state()!==2&&n.options.state(0)}};this.element.on(this._events);this.ltm.registerForDispose(this.element.setEvents([e.default.mousedown,".azc-fill-text",function(n){document.activeElement===$(n.target).parents("."+o)[0]&&n.preventDefault()}]))},u.prototype._detachEvents=function(){this._events&&(this.element.off(this._events),this._events=null)},u})(u.Widget);n.Widget=h;r.bindingHandlers.azcCheckBox=f.getBindingHandler(h)})(o||(o={})),o}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRow.css",
["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-selectableRow-selectionCell-col{width:26px;max-width:26px}.azc-grid-selectableRow-selectAll{vertical-align:text-top;margin-left:7px}.azc-grid-selectableRow-selectionCell-wrapper{border-width:1px;border-style:solid;box-sizing:border-box;width:17px;height:17px;display:none}.azc-grid-selectableRow-selectionCell-wrapper .fx-grid-formatters-svgicon{margin-top:2px;margin-left:2px;position:relative}.azc-grid-selectableRow-selectionCell-wrapper .fx-grid-formatters-svgicon svg{vertical-align:top}.azc-grid-selectableRow:not(.azc-grid-scrollable):not(.azc-grid-hierarchical) table,.azc-grid-selectableRow:not(.azc-grid-scrollable):not(.azc-grid-hierarchical) table tbody,.azc-grid-selectableRow:not(.azc-grid-scrollable):not(.azc-grid-hierarchical) table tbody tr{height:100%}.azc-grid-selectableRow table thead th.azc-grid-selectableRow-overlay-header{width:0}.azc-grid-selectableRow table tbody tr td.azc-grid-selectableRow-overlay-cell{overflow:visible;padding:0;vertical-align:top;width:0}.azc-grid-selectableRow table tbody tr td.azc-grid-selectableRow-overlay-cell div.azc-grid-selectableRow-overlay-origin{position:relative;overflow:visible;height:100%}.azc-grid-selectableRow table tbody tr td.azc-grid-selectableRow-overlay-cell div.azc-grid-selectableRow-overlay-origin div.azc-grid-selectableRow-overlay-container{position:absolute;top:0;right:0}.azc-grid-selectableRow table tbody tr.azc-external-hovered td.azc-grid-selectableRow-selectionCell div.azc-grid-selectableRow-selectionCell-wrapper,.azc-grid-selectableRow table tbody tr.fxs-portal-selected td.azc-grid-selectableRow-selectionCell div.azc-grid-selectableRow-selectionCell-wrapper,.azc-grid-selectableRow table tbody tr:not([aria-disabled=true]):focus td.azc-grid-selectableRow-selectionCell div.azc-grid-selectableRow-selectionCell-wrapper,.azc-grid-selectableRow table tbody tr:not([aria-disabled=true]):hover td.azc-grid-selectableRow-selectionCell div.azc-grid-selectableRow-selectionCell-wrapper{display:block}.azc-grid-selectableRow table tbody tr td:first-of-type{border-left:none}.azc-grid-selectableRow table tbody tr td.azc-br-muted:last-of-type,.azc-grid-selectableRow table tbody tr td:last-of-type{border-right:none}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow",["require","exports","f","o","ko","$","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Forms/Viva.CheckBox","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Formatter","MsPortalImpl/Resources/ImplScriptResources","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRow.css","MsPortalImpl/Base/Base.KnockoutExtensions.Image"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";var a;return (function(n){function nt(n){var t=y(n);return t&&t.selected&&!t.selected()}var et=i.Base,ot=et.Images,b=i.isNullOrUndefined,a=u.observable,tt=u.computed,y=u.dataFor,it=u.pureComputed,w=jQuery,st=window,f="azc-grid-selectableRow",v="tr[data-grid-selectable=true]:not([aria-disabled=true])",rt="tbody "+v,ht=rt+" td."+f+"-selectionCell",ct=f+"-selectAll",ut="11px",k='attr: { "data-grid-selectable": true, "aria-selected": selected() ? "true" : "false", tabindex: selected() || focused() ? $tabIndex() : $focusIndex() }',
d='css: { "fxs-portal-selected": selected() }',lt='css: { "azc-grid-multiselectable": $ctl.getPlugin("'+f+'")._multiselect, '+('"azc-grid-selectable": $ctl.getPlugin("'+f+'")._showSelectionExperience }'),at="<col class='"+f+"-selectionCell-col' />",vt="<th class='"+f+"-selectionCell-header' aria-hidden='true'>"+("<div class='"+ct+"' data-bind='azcCheckBox: $ctl.getPlugin(\""+f+'")._selectAllCheckbox, visible: $ctl.getPlugin("'+f+'")._canSelectAll, attr:{ "aria-label": $ctl.getPlugin("'+f+"\")._ariaLabel }'><\/div>")+"<\/th>",g="<td class='"+f+"-selectionCell azc-br-muted' aria-hidden='true'>"+("<div class='"+f+"-selectionCell-wrapper fxs-portal-border azc-fill-text'>")+("<div data-bind='trustedHtml: $ctl.getPlugin(\""+f+"\")._selectionCellFormat($data)'><\/div>")+"<\/div><\/td>",p,t,ft;(function(n){n.RowSelect="rowSelect";n.RowClick="rowClick"})(p=n.EventTypes||(n.EventTypes={})),(function(n){n[n.Off=0]="Off";n[n.Single=1]="Single";n[n.MultipleAdd=2]="MultipleAdd";n[n.MultipleReplace=3]=
"MultipleReplace";n[n.AlwaysSingle=4]="AlwaysSingle"})(n.RowSelectionMode||(n.RowSelectionMode={}));t=n.RowSelectionMode;ft=(function(n){function i(i){var r=this,u;n.call(this);this._ariaLabel=l.Grid.selectAllCheckboxLabel;this._options=i=i||{};i.mode=i.mode||a(t.Single);i.hideMultiSelectCheckbox=i.hideMultiSelectCheckbox||!1;i.enableSelectableCursor=i.enableSelectableCursor||a(!1);i.hasPreviousSelectableItem=i.hasPreviousSelectableItem||a(!1);i.hasNextSelectableItem=i.hasNextSelectableItem||a(!1);this._enableSelectableCursor=tt(this.ltm,(function(){r._updateSelectableCursor()}));u=this._selectAllCheckbox=new h.ViewModel(this.vmBasicOption);u.canUserSetIndeterminate(!1);this._multiselect=it((function(){var n=i.mode();return n===t.MultipleAdd||n===t.MultipleReplace}));this._canSelectAll=it((function(){return r._multiselect()&&!i.disableSelectAll&&!r._widget._extensionTrigger("shouldNotAllowSelectAll").some((function(n){return n}))}));this._modeSubscription=i.mode.subscribe(this.ltm,(function(n){var
u;if(r._widget&&(u=r._widget.getPlugin(e.FocusableRowExtension.Name),u&&(n===t.Off?u.options.focusable(!1):u.options.focusable(!0)),n===t.AlwaysSingle||n===t.Single)){var f=void 0,h=void 0,o=void 0,i=r.getSelectedRows(),s=i?i.length:0;if(i=r.getSelectedRows(),s=i?i.length:0,s>=1)for(o=1;o<s;o++)i[o].selected(!1);else n===t.AlwaysSingle&&(f=r._widget.options.items(),f&&f.length>0&&(h=r._widget.getRowMetadata(f[0]),h.selected(!0)))}}))}return __extends(i,n),r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.getSelectedRows=function(){return this._widget._getAllRowMetadata().filter((function(n){return n.selected.peek()}))},i.prototype.getSelectableRows=function(){var n=this;return this._widget.options.items().filter((function(t){return!n._widget.getRowMetadata(t).disabled()}))},i.prototype.selectAllRows=function(){this.selectRows.apply(this,this.getSelectableRows())},i.prototype.unselectAllRows=function(){this._widget._getAllRowMetadata(
).forEach((function(n){n.selected(!1)}))},i.prototype.unselectRows=function(){for(var i=this,t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];t.forEach((function(n){i._widget.getRowMetadata(n).selected(!1)}))},i.prototype.selectRows=function(){for(var i=this,t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];t.forEach((function(n){i._widget.getRowMetadata(n).selected(!0)}))},i.prototype.setInstance=function(t){n.prototype.setInstance.call(this,t);this._options.mode.valueHasMutated()},i.prototype.afterCreate=function(){this._widget.ltm.registerForDispose([this._showSelectionExperience,this._modeSubscription,this._enableSelectableCursor]);this._focusableRowPlugin=this._widget.getPlugin(e.FocusableRowExtension.Name);this._updateSelectableCursor()},i.prototype.afterSetTemplates=function(n){var i=this,o=n.getHtmlTemplate("bodyRowsCore"),h=n.getHtmlTemplate("header"),l=n.getHtmlTemplate("colgroup"),a=n.getHtmlTemplate("table"),f=n.getHtmlTemplate("editableBodyRowsCorePerColumn"),e=n.getHtmlTemplate(
"editableBodyRowsCoreForRow"),s=!b(f)&&!b(e),r="data-bind";o.addAttribute("tr",r,[k,d]);a.addAttribute("table",r,[lt]);this._showSelectionExperience=tt(this.ltm,(function(){var n=i._options.mode(),r=n===t.Off,u=i._options.hideMultiSelectCheckbox,f=n===t.Single||n===t.AlwaysSingle,e=i._widget.options.extensions.first((function(n){return n.getName()==="azc-grid-activateableRow"}));return!r&&!u&&!(f&&e)}));this._showSelectionExperience()&&(o.prepend("tr",g),h.prepend("tr",vt),l.prepend("colgroup",at),s&&(f.prepend("tr",g),e.prepend("tr",g)));s&&(f.addAttribute("tr",r,[k,d]),e.addAttribute("tr",r,[k,d]));this._selectionCellFormatter=c.Formatters.svgIconLookup({"true":{svg:ot.Check({palette:99}),height:ut,width:ut}});u.reactor(this.ltm,(function(){var n,t,r;i._canSelectAll()&&(t=!0,i._widget._getAllRowMetadata().forEach((function(i){if(!i.disabled()){var r=i.selected();n=n||r;t=t&&r}})),r=i._selectAllCheckbox,t&&n?r.value(1):n?r.value(2):r.value(0))}))},i.prototype.getDefaultRowMetadataProperties=function(
){return{selected:a(!1)}},i.prototype.afterAttachEvents=function(){var i=this,n=this;this.ltm.registerForDispose(this._widget.element.setEvents(["click.azcGrid",rt,function(t){w.contains(n._widget.element[0],this)&&n._onClick(this,t);t.stopPropagation()}],["click.selectionCell",ht,function(t){var i=w(this).closest(v)[0],r=n._widget.getPlugin(e.FocusableRowExtension.Name);t.ctrlKey=!0;n._changeSelection(1,i,t,n._multiselect());r._focusRow(i,y(i));t.stopPropagation()}],["keydown.azcGrid",function(i){var r=w(i.target),c=r[0],d=y(c),f=d&&d.selected,l,k,g=n._widget._itemsPerKeyboardPage(),u=o.Widget.getModifierKeys(i),a=!0,p,s,h;if(n._options.mode()!==t.Off&&!e.FocusableRowExtension.isEditableControl(r)){switch(i.which){case 32:k=st.document.activeElement;(u===o.ModifierKeys.None||u===o.ModifierKeys.Ctrl&&r.is("tr[data-grid-selectable]")&&(i.target===k||w.contains(r[0],k)))&&(p=y(r[0]),p&&p.selected&&p.selected()&&(i.ctrlKey=!0),n._changeSelection(2,r[0],i));break;case 65:u===o.ModifierKeys.
Ctrl?n._canSelectAll()&&n.selectAllRows():a=!1;break;case 68:u===o.ModifierKeys.Ctrl?n.unselectAllRows():a=!1;break;case 38:case 40:n._multiselect()&&u===o.ModifierKeys.Shift&&(s=void 0,s=i.which===38?r.prevAll(v)[0]:r.nextAll(v)[0],f&&!f()&&n._changeSelection(3,c,i,!1,!0),b(s)||nt(s)&&n._changeSelection(3,s,i,!1,!0));break;case 33:case 34:n._multiselect()&&u===o.ModifierKeys.Shift&&(h=void 0,h=i.which===33?r.prevAll(v):r.nextAll(v),l=h.length<g-1?h:h.slice(0,g-1),f&&!f()&&n._changeSelection(3,c,i,!1,!0),l.each((function(t,r){nt(r)&&n._changeSelection(3,r,i,!1,!0)})));break;case 36:case 35:n._multiselect()&&u===o.ModifierKeys.Shift&&(l=i.which===36?r.prevAll(v):r.nextAll(v),n.unselectAllRows(),f&&!f()&&n._changeSelection(3,c,i,!1,!0),l.each((function(t,r){nt(r)&&n._changeSelection(3,r,i,!1,!0)})));break;default:a=!1}a&&(i.stopPropagation(),i.preventDefault())}}]));this._selectAllCheckbox.value.subscribe(this._widget.ltm,(function(n){switch(n){case 1:i.selectAllRows();break;case 0:i.unselectAllRows(
)}}))},i.prototype.getOrder=function(){return 20},i.prototype.getDependencies=function(){return[new e.FocusableRowExtension]},i.prototype.getName=function(){return i.Name},i.prototype.getAdditionalColumns=function(){var n=0;return this._showSelectionExperience()&&(n+=1),n},i.prototype._changeSelection=function(n,i,r,u,f){var k;u===void 0&&(u=!1);f===void 0&&(f=!1);var v=this.options.mode(),l,d=this.options.disableRequireSingleModeAssistKey?this.options.disableRequireSingleModeAssistKey.peek():!1,g=this._widget.getPlugin(e.FocusableRowExtension.Name);if(!this._widget._extensionTrigger("shouldNotChangeSelection",i,r).some((function(n){return!!n}))){switch(v){case t.Off:return;case t.Single:case t.AlwaysSingle:l=!1;break;case t.MultipleAdd:l=!0;break;case t.MultipleReplace:l=r.ctrlKey||r.shiftKey||r.which===32;break;default:throw new Error("Unknown selection mode: "+v+".");}u&&(l=!0);var c=y(i),o=null,h=[],nt=c.selected&&c.selected(),w,b=-1,a;if(l)nt?h=[c]:o=c;else{for(h=this.getSelectedRows(
),a=h.length-1;a>=0;a--)k=h[a],k!==c||(b=a);b<0?o=c:v===t.Single&&(d||r.ctrlKey||r.shiftKey)||(v===t.Single?(h.splice(b,1),o=c):h.splice(b,1))}(o||h.length>0)&&(w={selected:o,unselected:h,_reason:n},this._widget.trigger("beforeRowSelect",s.cloneEvent(r,"beforeRowSelect"),w),h.forEach((function(n){n.selected(!1)})),o&&o.selected&&(o.selected(!0),f&&g.focusRowByRowMetadata(o)),this._widget.trigger(p.RowSelect,s.cloneEvent(r,p.RowSelect),w),this._widget.options.events("select",w))}},i.prototype.previous=function(){if(this.options.enableSelectableCursor())this._focusableRowPlugin.previous(this.getSelectedRows()[0]);else throw new Error("Previous selectable cursor method will work only when enableSelectableCursor option is set to true.");return Q()},i.prototype.next=function(){if(this.options.enableSelectableCursor())this._focusableRowPlugin.next(this.getSelectedRows()[0]);else throw new Error("Next selectable cursor method will work only when enableSelectableCursor option is set to true.");return Q(
)},i.prototype._updateSelectableCursor=function(){var i=this,n,t;this._widget&&(n=this._widget.getPlugin(e.FocusableRowExtension.Name),this._options.enableSelectableCursor()?(n.options.focusableCursorEnabled=this._options.enableSelectableCursor,n.options.focusableCursorOptions={wrapFocus:a(!1),hasPreviousFocusRow:this.options.hasPreviousSelectableItem||a(!1),hasNextFocusRow:this.options.hasNextSelectableItem||a(!1)},this._rowFocusLifetime||(t=this._rowFocusLifetime=this.ltm.createChildLifetime(),t.registerForDispose(this._widget.element.setEvents(["rowFocus.azcGrid",function(n,t){var r=i.getSelectedRows();r&&r.length>0&&(w(t.target[0]).click(),n.stopPropagation())}])))):(this._options.hasPreviousSelectableItem(!1),this._options.hasNextSelectableItem(!1),n.options.focusableCursorEnabled(!1),n.options.focusableCursorOptions.wrapFocus(!0),n.options.focusableCursorOptions.hasPreviousFocusRow(!1),n.options.focusableCursorOptions.hasNextFocusRow(!1),this._rowFocusLifetime&&(this._rowFocusLifetime.
dispose(),this._rowFocusLifetime=null)))},i.prototype._onClick=function(n,t){var i={item:n,rowMetadata:y(n),clientX:t.clientX,clientY:t.clientY};this._widget.trigger(p.RowClick,s.cloneEvent(t,p.RowClick),i,t.target);this._widget.options.events(p.RowClick,i);this._changeSelection(4,n,t)},i.prototype._selectionCellFormat=function(n){var t;return this._showSelectionExperience()&&(t=this._selectionCellFormatter(n.selected())),t},i.Name=f,i})(o.Extension);n.SelectableRowExtension=ft})(a||(a={})),a}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.EditableRow.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-editableRow .azc-grid-editableRow-edited td:first-child{box-shadow:inset 3px 0 0 0 #c84fd7}.azc-grid-editableRow .azc-grid-cell-hidden,.azc-grid-editableRow .azc-grid-editableRow-deleted,.azc-grid-editableRow .azc-placeholdercell{display:none}.azc-grid-editableRow tr.azc-grid-editing .azc-placeholdercell{display:table-cell}.azc-grid-editableRow tr.azc-grid-editing .azc-grid-cell-editing+.azc-placeholdercell{display:none}.azc-grid-editableRow table tbody.azc-grid-editableRow-addSection:not(.azc-grid-editableRow-placement-top) tr.azc-grid-row td{border-top-width:0}.azc-grid-editableRow table tbody.azc-grid-editableRow-addSection.azc-grid-editableRow-placement-top tr.azc-grid-row td{border-bottom-width:0}.azc-grid-editableRow table tbody tr.azc-grid-row:not(.azc-grid-editableRow-deleted) td{border-top-width:1px;border-top-style:solid}.azc-grid-editableRow table tbody tr.azc-grid-row:not(.azc-grid-editableRow-deleted)~tr.azc-grid-row:not(.azc-grid-editableRow-deleted) td{border-top-width:0}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.EditableRow",["require","exports","f","o","a","ko","$","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow","Viva.Controls/Util/Viva.Util","MsPortalImpl/Widgets/Widgets.Common","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.KeyboardHelper","MsPortalImpl/Base/Base.EventTypes","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.EditableRow.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){"use strict";var p;return (function(n){function lt(n){return e(n).parent().hasClass(d)?0:1}function ut(n){var t=e(n).parent(),i;return i=t.hasClass(d)?t.siblings(nt).find(b).first():t.siblings(nt).find(b).last(),i.find("td.azc-grid-cell")}function ft(n){var t=e(n);return!t.find(".azc-validatableControl-invalid").length&&!t.find(".azc-validatableControl-pending").length}function et(n){var t=e(n);return!!t.find(".azc-validatableControl-pending").
length}function ot(n,t){ft(n)?t.resolve(!0):et(n)?setTimeout((function(){ot(n,t)}),50):t.resolve(!1)}function at(n){var t=Q.defer();return ot(n,t),t.promise}function vt(n){return n.rowMetadata&&n.rowMetadata.editState()!==0}function st(n){var t=e(n),i=t.find("input, select, textarea"),r=i.serializeArray(),u=f.dataFor(n),o=!t.parent("tbody."+w).length;return{rowMetadata:u,data:r,existingItem:o}}var p=i.isNullOrUndefined,g="azc-grid-selectableRow",b=".azc-grid-row",k=b+":not([aria-disabled=true])",nt="tbody.azc-grid-groupdata",u="azc-grid-editableRow",t="azc-grid-editableRow-row",ht="."+t,w="azc-grid-editableRow-addSection",ct="."+w,tt=ct+" "+ht,d="azc-grid-editableRow-placement-top",it="azc-br-top-hovered",rt="azc-br-bottom-hovered",yt=(function(n){function s(t){var i=this,r;n.call(this);this._isDisposed=!1;this._options=t=t||{};t.placement=t.placement||0;this._createdItems=f.observableArray();r=this.ltm;this._orderedCreatedItems=f.computed(r,(function(){var r=i._createdItems(),n,t,u;return r.
length<=1?r:(n=r.slice(),t=n.firstIndex((function(n){var t=i._widget.getRowMetadata(n);return t&&t.emptyRow()})),t!==-1&&t!==n.length-1&&(u=n.splice(t,1),n.push(u[0])),i.options.placement===1&&n.reverse(),n)}));this._editablePerColumn=f.computed(r,{read:function(){var n=i._widget.options.columns().some((function(n){return n.editableFormatter!==undefined})),t=!!i.options.editableFormatter;if(t&&n)throw new Error("The editableFormatter cannot be in columns when used for one row.");return n},deferEvaluation:!0})}return __extends(s,n),r.defineProperty(s.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(s.prototype,"createdItems",{get:function(){return this._createdItems},enumerable:!0,configurable:!0}),s.prototype.afterSetTemplates=function(n){var f="<tbody role='rowgroup' class='"+w+"' data-bind='css: { \""+d+'": $ctl.getPlugin("'+u+"\").options.placement === MsPortalFx.ViewModels.Controls.Lists.Grid.EditableRowPlacement.Top }'>"+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+
u+'")._orderedCreatedItems } --><!-- /ko -->')+"<\/tbody>",s='css: { "azc-grid-editableRow-edited": $ctl.getPlugin("'+u+'")._isRowEdited($data), "azc-grid-editableRow-deleted": $ctl.getPlugin("'+u+'")._isRowDeleted($data), "fxs-suppresschildvalidation": $data.emptyRow }',h="<td role='gridcell' aria-readonly='false' data-bind='trustedHtml: $ctl.getPlugin(\""+u+'")._editableCellFormat($parent, $data), attr: { "class": ($parent.editing() ? "azc-grid-cell" : "azc-grid-cell-hidden") + " azc-br-muted azc-grid-cell-editing " + cssClass, "aria-describedby": columnId, "aria-colindex" : $index() + 1 }\'><\/td>',e='<td role=\'gridcell\' data-bind=\'template: { name: "bodyCellContent" }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }, attr: { "class": (!$parent.editing() ? "azc-grid-cell" : "azc-grid-cell-hidden") + " azc-br-muted " + cssClass + (itemKey === "infoBalloon" ? "azc-grid-infoBalloon" : ""), "aria-describedby": columnId, "aria-label": $ctl._getCellAriaLabel($parent, $data) && $parent.cellAriaLabels[itemKey](), "aria-colindex" : $index() + 1 }\'><\/td>',
o,i,r;n.setTemplate("editablePlaceholderBodyCell",e);o="<!-- ko if: $parent._rendered -->"+h+'<!-- /ko --><td role=\'gridcell\' data-bind=\'template: { name: "bodyCellContent" }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }, attr: { "class": " azc-placeholdercell azc-br-muted " + cssClass + (itemKey === "infoBalloon" ? "azc-grid-infoBalloon" : ""), "aria-describedby": columnId, "aria-label": $ctl._getCellAriaLabel($parent, $data) && $parent.cellAriaLabels[itemKey](), "aria-colindex" : $index() + 1 }\'><\/td>'+e;n.setTemplate("bodyCell",o);i=n.getHtmlTemplate("bodyRowsCore");i.addAttribute("tr","data-bind",[s]);i.addAttribute("tr","data-bind",["css: {'azc-grid-editing': editing, "+t+": editing }"]);r=n.getTemplate("body");n.setTemplate("body",this.options.placement===1?f+r:r+f)},s.prototype.getDefaultRowMetadataProperties=function(){var n=f.observable(!1),t=f.observable(!1);return n.fxAwaitAndRun(this._widget.ltm).then(t),{editState:f.observable(0),editing:n,validationResult:
f.observable(0),emptyRow:f.observable(!1),_addedOnce:!1,_rendered:t}},s.prototype.modifyRowNumber=function(){var n=this,t=this._widget._getAllRowMetadata().filter((function(n){return n.editState()===3})).length,i=this.createdItems().filter((function(t){return!n._widget.getRowMetadata(t).emptyRow()})).length;return i-t},s.prototype.afterAttachEvents=function(){function ft(t){if(!d&&!u.$disabled()){var nt=this,v=f.dataFor(nt),tt=e(nt),ut=!!tt.closest("tbody."+w).length,et=u.getPlugin(h.SelectableRowExtension.Name),ft=v,i,a=void 0,it,b,k=t.clientX,g=t.clientY,rt=void 0;if(!v.editing.peek()&&(r.options.allowEditExistingItems&&!ut||r.options.allowEditCreatedItems&&ut)){(p(k)||p(g))&&(rt=e(t.target).position(),k=rt.left,g=rt.top);a=this;do a=a.previousSibling;while(a!==null&&f.dataFor(a)!==v.item);if(v.editing(!0),a){do a=a.nextSibling;while(a!==null&&a.nodeName.toLowerCase()!=="tr");a&&(t.target=a,b=a,l.waitForBindings(s[0]).then((function(){if(!r._isDisposed){for(i=document.elementFromPoint(k,g);
i;)if(i=c.findContainingControl(i),e.contains(b,i))if(i&&c.executeSetFocusOn(i)){try{o=!0;d=!0;n(b);it=c.cloneEvent(t,y.default.click);it.clientX=k;it.clientY=g;e(document.activeElement).trigger(it)}finally{o=!1;d=!1}break}else break;else break;n.peek()!==b&&n(b)}})),ft.selected&&(et._changeSelection(4,b,t),t.stopPropagation(),t.preventDefault()))}else e.contains(nt,document.activeElement)||l.waitForBindings(u.element[0]).then((function(){if(!r._isDisposed){for(i=document.elementFromPoint(k,g);i;)if(i=c.findContainingControl(i),e.contains(nt,i)){if(i&&c.executeSetFocusOn(i)){try{o=!0;n(tt[0])}finally{o=!1}break}}else break;n.peek()!==tt[0]&&n(tt[0])}}))}else v.editing.peek()&&ft.selected&&t.ctrlKey&&v.editing(!1)}}var n=f.observable(),o=!1,b=!1,d=!1,r=this,u=this._widget,s=u.element,a=this.ltm,nt;a.registerForDispose(s.setEvents(["mouseenter",tt,function(){s.hasClass(g)&&ut(this).addClass(lt(this)===0?it:rt)}],["mouseleave",tt,function(){s.hasClass(g)&&ut(this).removeClass(it+" "+rt)}],["focusout",
"tr."+t,function(){if(!b){var n=this,t=f.dataFor(n);t&&t.editing&&t.editing.peek()&&setTimeout((function(){var t=document.activeElement,i=function(){try{b=!0;r._rowAdd(n)}finally{b=!1}};n===t||e.contains(n,t)||(et(n)?at(n).then((function(n){n&&i()})):i())}),10)}}],["keyup",k,ft,],["click",k,ft,]));f.computed(a,(function(){var t=n();o||p(t)||c.setFocusToFirstFocusableChild(e(t),(function(n){return e(n).attr(c.Constants.dataEditableAttribute)?n:null}))}));i.isFeatureEnabled("oldEditableGrid")||a.registerForDispose(u.element.setEvents(["keyup",k,function(n){switch(n.which){case 38:case 40:case 36:case 35:case 33:case 34:f.dataFor(this).editing(!0)}}]));nt=function(n){var i=!1,o=e(n.target),s=n.target,u,f;v.isNonWrittenCharacter(n.which)||(n.type===y.default.keydown||n.type===y.default.keyup||n.type===y.default.input?(u=o.data("editablerow-previous"),n.type===y.default.keydown&&u===undefined?o.data("editablerow-previous",s.value):(n.type===y.default.keyup||n.type===y.default.input)&&(i=s.value!==(u||
""))):i=!0,i&&(f=e(this).closest("tr."+t)[0],f&&r._rowEdit(f,n.type)));n.type==="fxvaluechanged"&&n.stopPropagation()};a.registerForDispose(u.element.setEvents(["keydown keyup change","tr."+t+" input, tr."+t+" select, tr."+t+" textarea",nt],["fxvaluechanged","tr",nt]))},s.prototype.getOrder=function(){return 14},s.prototype.getDependencies=function(){return[new o.FocusableRowExtension]},s.prototype.beforeDestroy=function(){this._isDisposed=!0},s.prototype.shouldRetainRowMetadata=function(n){return this._createdItems().some((function(t){return n.item===t}))},s.prototype.getName=function(){return s.Name},s.prototype.setRowAriaLabel=function(n){n.emptyRow()&&n.ariaLabel(this._options.newRowAriaLabel||a.Grid.newRowAriaLabel)},s.prototype._rowAdd=function(n){var i=this._widget,r=!0,t=st(n),u={targets:e(n).find(">td.azc-grid-cell").children(),editableRow:t,preventExitEditing:function(){r=!1}};(t.existingItem||vt(t))&&!p(t.rowMetadata)&&ft(n)&&(t.rowMetadata._addedOnce=!0,i.trigger("rowAdd",null,
u),i.options.events("rowAdd",u),r&&t.rowMetadata.editing(!1))},s.prototype._rowEdit=function(n,t){var i={targets:e(n).find(">td.azc-grid-cell").children(),editableRow:st(n),type:t};i.editableRow.rowMetadata.editState(i.editableRow.existingItem?2:1);this._widget.trigger("rowEdit",null,i);this._widget.options.events("rowEdit",i)},s.prototype._editableRowFormat=function(n){var t=this.options.editableFormatter;return t?t({rowMetadata:n}):""},s.prototype._editableCellFormat=function(n,t){return t.editableFormatter?t.editableFormatter(n.item[t.itemKey],{item:n.item,rowMetadata:n,column:t}):""},s.prototype._isRowEdited=function(n){return n.editState()!==0},s.prototype._isRowDeleted=function(n){return n.editState()===3},s.Name=u,s})(s.Extension);n.EditableRowExtension=yt})(p||(p={})),p}));define("MsPortalImpl.Controls/Controls/Base/Formatters",["require","exports","f","ko","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.EditableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers",
"MsPortalFx/Globalization","MsPortalImpl/Base/Base.Sanitization","MsPortalImpl/Base/Base.ImplUtils","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer","MsPortalImpl/Resources/ImplScriptResources"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";var a;return (function(t){function tt(n,t,i,r,e){var h=!!e,s;switch(t){case u.ShortTime:return f.date(o.DateTimeFormat.shortTimePattern,i);case u.LongTime:return f.date(o.DateTimeFormat.longTimePattern,i);case u.ShortDate:return f.date(o.DateTimeFormat.shortDatePattern,i);case u.LongDate:return f.date(o.DateTimeFormat.longDatePattern,i);case u.MonthDay:return f.date(o.DateTimeFormat.monthDayPattern,i);case u.YearMonth:return f.date(o.DateTimeFormat.yearMonthPattern,i);case u.CustomDate:return f.date(r.dateFormat||"",i);case u.TextLookup:return f.textLookup(r.textLookup||{});case u.Text:return f.text;case u.Number:return f.numberFormat(r.numberFormat);case u.Icon:return it;case u.HtmlBindings:return f.htmlBindings(n,rt(r.htmlBindingsType,r.htmlBindingsTemplate,
h),ut(n,r.htmlBindingsType,r.htmlBindingsData));case u.PercentageBar:return f.percentageBar(r.percentageBar||{})}switch(t){case u.Html:s=f.html;break;case u.IconLookup:s=f.iconLookup(r.iconLookup||{});break;case u.Uri:s=f.uri;break;default:s=f.text}return h||(s=ft(s)),s}function it(n){var t=r.unwrap(n),i=e.isUndefined,u=t&&!i(t.text)&&!i(t.uri)?t.uri:t;return s.sanitizeUri(u+"")?f.icon(n):""}function rt(t,i,r){var u=i||"";switch(t){case a.MultiselectDropDown:case a.TextBox:case a.CheckBox:case a.DropDown:case a.CheckBoxRowSelection:return"<div data-bind='formElement: $data'><\/div>"}return r?u:c.sanitizeHTML(new p(u,n)).sanitizedMarkup}function ut(n,t,i){switch(t){case a.MultiselectDropDown:return v.multiselectDropDown(n,i);case a.TextBox:return v.textBox(n,i);case a.CheckBox:return v.checkBox(n,i);case a.DropDown:return v.dropDown(n,i);case a.CheckBoxRowSelection:return v.rowSelectionCheckBox(n);case a.Default:default:return function(n,t,i){return{value:t,settings:i}}}}function ft(t){
return function(i,r){switch(t){case f.uri:r=r||{};r.cssClass="msportalfx-link-primary"}var u=t(i,r);return c.sanitizeHTML(new p(u,n)).sanitizedMarkup}}var p=h.ProvenanceContainer,w=i.ViewModels.Controls.Lists.Grid,u=w.Format,a=w.HtmlBindingsType,b=i.ViewModels.Forms,k=b.CheckBox.ViewModel,d=i.ViewModels.Obsolete.Forms.GroupDropDown,g=i.ViewModels.Obsolete.Forms.MultiSelectDropDown,nt=b.TextBox.ViewModel,y={invalidBindingData:"The formatOptions property was not correctly set. The htmlBindingsData needs to be specified correctly for rendering the {0}."},v;(function(n){function u(n,u){return function(n,f,e){var o,s=i(f),h,c;if(!n||!u||!r.isObservable(u.groups))throw new Error(y.invalidBindingData.format("MultiselectDropDownFormField"));return h=r.observable(s()),c={getOriginalObservable:function(){return h},getEditableObservable:function(){return s},createdByBaseFormClass:!0},o=new g.ViewModel(n,{label:r.observable(u.label||""),groups:u.groups,multiselect:u.multiselect,validations:r.observableArray(
u.validations),infoBalloonContent:r.observable(u.infoBalloonContent),ariaLabel:e&&e.column&&e.column.name}),o.maxSelectAllowed=u.maxSelectAllowed,o.multiItemsDisplayFormat=u.multiItemsDisplayFormat,o.multiItemsMaxDisplayFormat=u.multiItemsMaxDisplayFormat,o.valueSeparator=u.valueSeparator,o.displaySeparator=u.displaySeparator,o._setEditScopeAccessors(c),t(n,o,s,e&&e.rowMetadata,u&&u.validate),o}}function f(n,u){return function(n,f,e){var o=i(f);if(!n||!u||!r.isObservable(u.items))throw new Error(y.invalidBindingData.format("GroupDropDownFormField"));var h=r.observable(o()),c={getOriginalObservable:function(){return h},getEditableObservable:function(){return o},createdByBaseFormClass:!0},s=new d.ViewModel(n,{label:r.observable(u.label||""),items:u.items,validations:r.observableArray(u.validations),infoBalloonContent:r.observable(u.infoBalloonContent),filter:u.filter,filterPlaceholder:u.filterPlaceholder,customFilter:u.customFilter,multiselect:u.multiselect,selectAll:u.selectAll,selectAllOverride:
u.selectAllOverride,ariaLabel:e&&e.column&&e.column.name});return s._setEditScopeAccessors(c),t(n,s,o,e&&e.rowMetadata,u&&u.validate),s}}function e(n,u){return function(n,f,e){var s=i(f),o,h=r.observable(s()),c={getOriginalObservable:function(){return h},getEditableObservable:function(){return s},createdByBaseFormClass:!0};return o=new nt(n,{label:r.observable(u&&u.label?u.label:""),valueUpdateTrigger:4,validations:r.observableArray(u?u.validations:null),emptyValueText:r.observable(u?u.emptyValueText:null),infoBalloonContent:r.observable(u?u.infoBalloonContent:null),ariaLabel:e&&e.column&&e.column.name}),o._setEditScopeAccessors(c),t(n,o,s,e&&e.rowMetadata,u&&u.validate),o}}function o(n,u){return function(n,f,e){var o=i(f),h=r.observable(o()),c={getOriginalObservable:function(){return h},getEditableObservable:function(){return o},createdByBaseFormClass:!0},s=new k(n,{label:r.observable(u&&u.label?u.label:""),validations:r.observableArray(u?u.validations:null),infoBalloonContent:r.observable(
u?u.infoBalloonContent:null),inlineLabel:!0,ariaLabel:e&&e.column&&e.column.name});return s._setEditScopeAccessors(c),t(n,s,o,e&&e.rowMetadata,u&&u.validate),s}}function s(n,u){return function(n,f,e){var o=i(f),s,h,c;if(!u||!r.isObservable(u.options))throw new Error(y.invalidBindingData.format("DropDownFormField"));return o()===undefined&&o(u.options()[0].value),h=r.observable(o()),c={getOriginalObservable:function(){return h},getEditableObservable:function(){return o},createdByBaseFormClass:!0},s=new d.ViewModel(n,{label:r.observable(u.label||""),items:u.options,validations:r.observableArray(u.validations),infoBalloonContent:r.observable(u.infoBalloonContent),ariaLabel:e&&e.column&&e.column.name}),s._setEditScopeAccessors(c),t(n,s,o,e&&e.rowMetadata,u&&u.validate),s}}function h(){return function(n,t,i){t=i.rowMetadata.selected;var u=new k(n,{ariaLabel:l.Grid.selectionCheckBoxAriaLabel}),r=!1,f=!0;return t.subscribe(n,(function(n){try{r=!0;u.value(n)}finally{r=!1}})),u.value.subscribe(n,
(function(n){if(!f&&!r)try{r=!0;u.value(!n)}finally{r=!1}f=!1})),u}}function t(n,t,i,u,f){if(t.rowMetadata=u,u.editState&&u.editState()===0){t.performValidation(!1);var e=n.createChildLifetime();i.subscribe(e,(function(){u.editState()!==0&&(t.performValidation()||t.performValidation(!0),t.ensureValidation())}));f&&r.isObservable(f)&&(f.subscribe(n,(function(){t.validate(t.validate()+1)})),u.editing.subscribe(e,(function(n){n||e.dispose()})))}}function i(n){return r.isObservable(n)?n:r.observable(n)}n.multiselectDropDown=u;n.groupDropDown=f;n.textBox=e;n.checkBox=o;n.dropDown=s;n.rowSelectionCheckBox=h})(v=t.ControlViewModels||(t.ControlViewModels={}));t.getFormatter=tt})(a||(a={})),a}));define("MsPortalImpl/Svg/Startup/RequiredField.svg",[],(function(){"use strict";return{type:1,data:"<svg viewBox='0 0 6 6' class='msportalfx-svg-placeholder' role='presentation' focusable='false' xmlns:svg='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g><title><\/title><path d='M3.543 2.352l2.08-.716L6 2.687l-2.076.675L5.21 5.158l-.942.676-1.242-1.867-1.264 1.867-.97-.676 1.305-1.796L0 2.687.38 1.63l2.058.743V.233h1.105v2.119z' class='msportalfx-svg-c22'/><\/g><\/svg>"}})
);define("Viva.Controls/Util/Viva.Positioning",["require","exports","f","MsPortalImpl/Base/Base.BrowserDetection"],(function(n,t,i,r){"use strict";var u;return (function(n){function t(n,t){return!!(n&&t&&n&t)}function u(n){return[[n[0],n[2],n[4]],[n[1],n[3],n[5]],[0,0,1]]}function l(n){return[n[0][0],n[1][0],n[0][1],n[1][1],n[0][2],n[1][2]]}function f(n){return n[0][0]*n[1][1]-n[0][1]*n[1][0]}function a(n){var t=u(n),i=f(t);if(i===0)return h.assert(!1,"transform cannot be inverted. returning identity matrix instead."),[1,0,0,1,0,0];var r=t[1][1]/i,e=-t[0][1]/i,o=f([[t[0][1],t[0][2]],[t[1][1],t[1][2]]])/i,s=-t[1][0]/i,c=t[0][0]/i,l=-f([[t[0][0],t[0][2]],[t[1][0],t[1][2]]])/i;return[r,s,e,c,o,l]}function v(n,t){for(var i,r,o=u(n),s=u(t),e=[[0,0,0],[0,0,0],[0,0,0]],f=0;f<3;f++)for(i=0;i<3;i++)for(r=0;r<3;r++)e[f][i]+=o[f][r]*s[r][i];return l(e)}var s=i.Base.Diagnostics,e=window,o=jQuery,h=new s.Log("Positioning"),c;(function(n){function h(n,e,o){var s,rt;o||(o={});var y=r.isIe,w=u(y?e:n),h=
y?1:w,b=y?w:1,k=n.outerWidth(),d=n.outerHeight(),p=f(e.offset(),h),g=e.outerWidth()*b,nt=e.outerHeight()*b,a=o.elementAlign||3,v=o.baseAlign||10,tt=o.horizontalOverflowBehavior||2,it=o.verticalOverflowBehavior||3;t(v,4)&&(p.left+=g);t(v,8)&&(p.top+=nt);s=i.clone(p);t(a,4)&&(s.left-=k);t(a,8)&&(s.top-=d);s.left=Math.round(s.left);s.top=Math.round(s.top);it!==1&&(rt=l(s,{elementAlign:a,elementSize:d,baseElementAlign:v,baseElementSize:nt,scaleFactor:h},it===3))&&(s.top=rt.top);tt!==1&&c(s,{elementAlign:a,elementSize:k,baseElementAlign:v,baseElementSize:g,scaleFactor:h},tt===3);var ut=f(n.offset(),h),ft={top:parseInt(n.css("top"),10)||0,left:parseInt(n.css("left"),10)||0},et={top:s.top-ut.top+ft.top,left:s.left-ut.left+ft.left};n.css(et)}function u(n){var t=(n[0].getBoundingClientRect().width||0)/(n.width()||1);return t||1}function f(n,t){return{left:n.left/t,top:n.top/t}}function s(n,t){var i=o(e),r;return r=i.height()+i.scrollTop(),n-r/t}function c(n,i,r){var s=o(e),u=n.left+i.elementSize-
(s.width()+s.scrollLeft())/i.scaleFactor,f;r?(f=t(i.elementAlign,2)?-i.elementSize:i.elementSize,n.left+=n.left<0?f+i.baseElementSize:u>0?f-i.baseElementSize:0):n.left=u>0?Math.max(0,n.left-u):Math.max(0,n.left)}function l(n,i,r){var o=0,u=n.top,h=r?(t(i.elementAlign,1)?-1:1)*i.elementSize:0,e=0-u,f=0,c;return e>0?(u=r?u+h+i.baseElementSize:0,f=s(u+i.elementSize,i.scaleFactor),f>0&&(r&&f>=e?(u=n.top,o=e):o=f)):(f=s(u+i.elementSize,i.scaleFactor),f>0&&(r?(c=(t(i.baseElementAlign,1)?1:-1)*i.baseElementSize,u+=h+c):u-=f,e=0-u,e>0&&(r&&e>=f?(u=n.top,o=f):(u=0,o=e)))),{top:u,shrinkAmount:o}}n.position=h;n.getScaleFactor=u})(c=n.Positioning||(n.Positioning={}));n.Invert2DTransformationMatrix=a;n.multiplyTransformArrays=v})(u||(u={})),u}));define("_generated/Less/Viva.Controls/Controls/Viva.Balloon.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.fxc-preview,.fxs-button{font-family:az_ea_font,"Segoe UI",wf_segoe-ui_semibold,"Segoe UI Semibold","Segoe WP Semibold","Segoe WP",Tahoma,Arial,sans-serif;font-weight:600}.fxc-preview,.fxs-ellipsis{white-space:nowrap;text-overflow:ellipsis}.azc-grid:focus{outline:0!important}.fxs-extension-frame,.fxs-manifest-frame{position:absolute;left:10px;top:10px;border:0;height:1px;width:1px;display:none}.fxs-portal{position:fixed;left:0;right:0;top:0;bottom:0;overflow:hidden;transition:background .25s ease;z-index:0;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.fxs-button,.fxs-inner-dotted-border,.fxs-portal-main{position:relative}.fxs-portal-main{display:-webkit-flex;display:flex;-webkit-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-align-items:stretch;align-items:stretch;height:calc(100% - 40px);z-index:1;-webkit-flex:1 1 auto;flex:1 1 auto;min-height:0}.fxs-portal-content{-webkit-flex:1 1 auto;flex:1 1 auto;position:relative;overflow:hidden;transition:margin .2s ease;z-index:1}.fxs-portal-controlloadfailed>svg{vertical-align:bottom;height:18px}.fxs-portal-tip-content{max-width:400px}.fxs-portal-tip.azc-balloon .azc-balloon-content{padding:0}.fxs-portal-tip.azc-balloon .azc-balloon-pointer{border-color:#fff}.fxc-preview{font-size:10px;line-height:normal;text-transform:uppercase;margin-top:3px;overflow:hidden}.fxs-portal-shield{position:fixed;width:100%;height:100%;background-color:rgba(0,0,0,.7);z-index:99999}.fxs-portal-shield-icon>svg{width:20px;height:20px}.fxs-portal-shield-icon-warning{background-color:#ff8c00}.fxs-portal-shield-icon-error{background-color:#e81123}.fxs-portal-shield-icon-on-topbar{position:absolute;height:40px;width:40px}.fxs-portal-shield-icon-on-topbar>svg{margin:10px}.fxs-button,.fxs-input{height:24px;margin:0;box-sizing:border-box}.fxs-portal-shield-modaldialog{position:fixed;width:430px}.fxs-portal-shield-modaldialog .fxs-messagebox{background-color:#fff;color:#1f2327}.fxs-portal-shield-modaldialog .fxs-messagebox .fxs-messagebox-title{padding:22px 27px}.fxs-portal-shield-modaldialog .fxs-messagebox .fxs-messagebox-text{max-height:calc(100vh - 295px - 160px);overflow-y:auto}.fxs-portal-shield-modaldialog .fxs-messagebox .msportalfx-form{background-color:inherit;border-top-width:0}.fxs-portal-shield-modaldialog .fxs-messagebox .msportalfx-form>div{border-top-width:0}.fxs-portal-shield-modaldialog .fxs-messagebox a{text-decoration:underline;color:#00bcf2}.fxs-portal-shield-modaldialog-on-jumpbar{left:85px;top:295px}.fxs-input{padding:0;border-width:1px;border-style:solid;outline:0;text-indent:10px}.fxs-button{line-height:22px;font-size:12px;cursor:pointer;border:1px solid;padding:0 20px}.fxs-button.fxs-button-disabled{cursor:default}.fxs-inner-dotted-border:focus::after{content:"";position:absolute;top:1px;left:1px;right:1px;bottom:1px;display:block;border-width:1px;border-style:dotted;pointer-events:none}.fxs-hidden-important{display:none!important}.fxs-ellipsis{overflow:hidden}.fxs-full-height{height:100%}.fxs-full-width{width:100%}@-webkit-keyframes fxs-progress-animatedEllipses{0%{opacity:1}30%{opacity:.6}60%{opacity:.3}}@keyframes fxs-progress-animatedEllipses{0%{opacity:1}30%{opacity:.6}60%{opacity:.3}}fxs-progress{position:absolute;width:100%;height:100%;top:0;z-index:194}.fxs-progress-dots{position:absolute;top:calc(50% - 6px/2);width:100%;line-height:0;text-align:center}.fxs-progress-dots>div{display:inline-block;height:6px;width:6px;-webkit-animation:fxs-progress-animatedEllipses 1.5s infinite;animation:fxs-progress-animatedEllipses 1.5s infinite;background:#aab3bd;margin:0 2.5px}.fxs-progress-dots>div:nth-child(1){-webkit-animation-delay:0s;animation-delay:0s}.fxs-progress-dots>div:nth-child(2){-webkit-animation-delay:.2s;animation-delay:.2s}.fxs-progress-dots>div:nth-child(3){-webkit-animation-delay:.4s;animation-delay:.4s}.azc-balloon{position:fixed;word-wrap:break-word;height:auto;text-align:left;z-index:250;min-width:75px}.azc-balloon.azc-balloon-box-bottom.azc-balloon-position-alternate .azc-balloon-pointer,.azc-balloon.azc-balloon-box-bottom.azc-balloon-position-preferred .azc-balloon-pointer,.azc-balloon.azc-balloon-box-top.azc-balloon-position-alternate .azc-balloon-pointer,.azc-balloon.azc-balloon-box-top.azc-balloon-position-preferred .azc-balloon-pointer{width:0;height:0;background:0 0;border-style:solid;border-right-color:transparent!important;border-left-color:transparent!important}.azc-balloon.azc-balloon-hidden{visibility:hidden}.azc-balloon.azc-balloon-forcedisplayblock{display:block!important}.azc-balloon.azc-balloon-box-top.azc-balloon-position-preferred .azc-balloon-pointer{left:0;bottom:-8px;border-width:8px 8px 0 0;border-bottom-color:transparent!important}.azc-balloon.azc-balloon-box-top.azc-balloon-position-alternate .azc-balloon-pointer{right:0;bottom:-8px;border-width:8px 0 0 8px;border-bottom-color:transparent!important}.azc-balloon.azc-balloon-box-bottom.azc-balloon-position-preferred .azc-balloon-pointer{left:0;top:-8px;border-width:0 8px 8px 0;border-top-color:transparent!important}.azc-balloon.azc-balloon-box-bottom.azc-balloon-position-alternate .azc-balloon-pointer{right:0;top:-8px;border-width:0 0 8px 8px;border-top-color:transparent!important}.azc-balloon .azc-balloon-help-title{font-family:az_ea_font,"Segoe UI",wf_segoe-ui_bold,"Segoe UI Bold","Segoe WP Bold","Segoe WP",Tahoma,Arial,sans-serif;font-weight:700;text-transform:uppercase;font-size:12px}.azc-balloon .azc-balloon-content{font-size:12px;padding:15px;white-space:normal}.azc-balloon .azc-balloon-pointer{position:absolute}.azc-balloon .azc-balloon-pointer2{position:absolute;width:16px;height:16px;transform:rotate(45deg);z-index:-1}.azc-balloon .azc-balloon-pointer2.azc-balloon-pointer2-1{bottom:0;transform-origin:left bottom;left:8px}.azc-balloon .azc-balloon-pointer2.azc-balloon-pointer2-2{transform-origin:left top;top:8px}.azc-balloon .azc-balloon-pointer2.azc-balloon-pointer2-3{transform-origin:left top;transform:rotate(-45deg);left:8px}.azc-balloon .azc-balloon-pointer2.azc-balloon-pointer2-4{right:0;transform:rotate(-45deg);transform-origin:right top;top:8px}.azc-balloon-dialog,.azc-balloon-pointer2{background-color:#fff;color:#1f2327;box-sizing:border-box;box-shadow:0 5px 15px 2px rgba(0,0,0,.3);border:1px solid}.azc-balloon-curtain{background-color:#fff}')})
);define("Viva.Controls/Controls/Viva.Balloon",["require","exports","f","o","ko","$","MsPortalImpl/Base/Base.BrowserDetection","MsPortalImpl/Base/Base.EventTypes","MsPortalImpl/Base/Base.ImplUtils","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer","Viva.Controls/Util/Viva.Positioning","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Base/Viva.Base","_generated/Less/Viva.Controls/Controls/Viva.Balloon.css","MsPortalImpl/Base/Base.KnockoutExtensions.SanitizedAttrBinding","MsPortalImpl/Base/Base.KnockoutExtensions.SanitizedHtmlBinding"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a){"use strict";function k(n){for(var t,r=v.splice(0),i=0,u=r.length;i<u;i++)t=r[i],t!==n&&t&&t.options.visible(!1);n&&(v[0]=n)}var ot=s.ProvenanceContainer,st=window,w="hidden",nt="azc-balloon",b="azc-balloon-content",y="azc-balloon-pointer2",p="azc-balloon-hidden",tt="azc-balloon-position-preferred",it="azc-balloon-position-alternate",ht="<!-- ko ifnot: data.renderMode--><div class='azc-br-muted-80-10 azc-balloon-pointer'><\/div><!--/ko--><!-- ko if: data.renderMode-->"+
("<div class='"+y+"'><\/div>")+"<!--/ko-->"+("<div class='azc-bg-muted-80-10 fxs-text-white "+b+"'>")+"<div class='azc-balloon-text' data-bind='attr: { id: $ctl.balloonTextElemId }'><\/div><!--ko if: data.link()--><div class='azc-balloon-link-content' data-bind='if: data.link().linkUri && data.link().linkText'><a class='azc-balloon-link fxs-trim-text-primary' data-bind='sanitizedAttr: { href: data.link().linkUri }, sanitizedHtml: data.link().linkText' target='_blank'><\/a><\/div><!--/ko--><\/div>",rt=9,v=[],ct=function(){return l.defaultBox},d,g,ut,ft,et;t.getBox=l.getBox;t.hideAllBalloons=k;d=(function(n){function t(){n.apply(this,arguments);this.visible=u.observable(!1);this.box=u.observable(ct);this.content=u.observable("");this.link=u.observable();this.closeOtherBalloons=!1;this.renderMode=u.observable()}return __extends(t,n),t})(a.ViewModel);t.ViewModel=d;g={"aria-atomic":"true","data-popup":"true",hidden:"",role:"tooltip"};ut=(function(t){function u(r,u,e){var v=this,s;e=e||{};e.viewModelType=
e.viewModelType||d;t.call(this,r,u,e);s=this.ltm;this.balloonTextElemId=i.getUniqueId();var o=this.options,c=this.element,l="";o.content()||o.content(c.html());c.attr(g).addClass(nt).addClass(p).addClass("azc-balloon-forcedisplayblock").html(ht);this._bindDescendants();var y=e&&e.isTrusted,b=c.findByClassName("azc-balloon-text"),a=function(){o.visible()?f.trim(l)!==""||o.link()&&o.link().linkText&&o.link().linkUri?v._toggle(!0):v._toggle(!1):v._toggle(!1)};o.link.subscribe(s,(function(){a()}));o.content.subscribeAndRun(s,(function(t){l=t;y||(l=h.sanitizeHTML(new ot(t,n)).sanitizedMarkup);b.html(l);a()}));o.visible.subscribeAndRun(s,(function(){a()}));o.box.subscribe(s,(function(){c.attr(w)===undefined&&a()}))}return __extends(u,t),u.prototype.dispose=function(){if(!this._checkExistsOrRegisterDestroyId(t.prototype.dispose)){var n=v.indexOf(this);n!==-1&&v.splice(n,1);this._cleanElement(nt,p,"azc-balloon-forcedisplayblock");this.element.removeAttr(r.keys(g).join(" ")).css({top:"",left:"",opacity:
"",display:"",width:""});this._removePointerClassTransform();this._detachEvents();t.prototype.dispose.call(this)}},r.defineProperty(u.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),u.prototype._toggle=function(n){var t=this.element,nt=this.options,o,i,c,a,st,d,ht,g;if(n){if(o=nt.box(),i=typeof o=="function"?o():o,i){nt.closeOtherBalloons&&k(this);this._removePointerClassTransform();var ut=f("html"),ft=ut.find(".fxs-portal-content"),e=ft.length?ft.offset():{left:0,top:0},u=i.left+i.width/2,s=ut.width(),ot=f(window).scrollTop();t.width("auto");t.offset(e);var h=t.width()+1,ct=t.find("."+y),r={top:null,left:null};switch(this.options.positionHint){case 1:r.left=i.left;r.top=i.top-t.height()-10;break;case 2:r.left=i.left+i.width+10;r.top=i.top;break;case 3:r.left=i.left;r.top=i.top+i.height+10;break;case 4:r.left=i.left-t.width()-10;r.top=i.top;break;default:c=void 0;c=h<s-u?!0:h<u-e.left?!1:u-e.left<(s-e.left)/2;a=function(n){var r,i;return h<n?h:
(r={left:s-n},t.offset(r),i=(t.width()>n?n:t.width())+1,t.width(i),i)};c?(t.addClass(tt),a(s-u),r.left=u):(t.addClass(it),st=a(u-e.left),r.left=u-st);t.offset(r);d=i.top-t.height()-rt-ot;ht=i.top+i.height+rt-ot;d>e.top?(t.addClass("azc-balloon-box-top"),r.top=d):(t.addClass("azc-balloon-box-bottom"),r.top=ht)}g=t.find("."+b);this.options.renderMode()?(t.addClass("azc-balloon-dialog"),ct.addClass(y+"-"+this.options.positionHint),g.addClass("azc-balloon-curtain")):g.addClass("azc-bg-muted-80-10 fxs-text-white");et(this,r);v.splice(0,0,this);this._attachEvents();t.removeAttr(w).removeClass(p);l.forceScreenRead(t[0])}}else this._detachEvents(),t.attr(w,"").addClass(p)},u.prototype._attachEvents=function(){if(!this._resizeEventLifeTime){var n=f(st);(this._resizeEventLifeTime=this.ltm.createChildLifetime()).registerForDispose(n.setEvents([o.default.resize,function(){v.length>0&&k()}]))}},u.prototype._detachEvents=function(){i.disposeDisposable(this._resizeEventLifeTime);this._resizeEventLifeTime=
null},u.prototype._removePointerClassTransform=function(){for(var t=["azc-balloon-box-top azc-balloon-box-bottom azc-balloon-dialog",tt,it],n=0;n++;n<=4)t.push(y+"-"+n);this.element.removeClass(t.join(" ")).css({"-webkit-transform":"",transform:""});this.element.find("."+b).removeClass("azc-bg-muted-80-10 fxs-text-white")},u})(a.Widget);t.Widget=ut;ft=function(n){var r=n.element.parents("div[style*='transform']"),t,i,u;if(r.length>0){for(t=[1,0,0,1,0,0],i=0;i<r.length;i++)u=f(r[i]).css("transform").split(/[(),/s]+/).slice(1,-1).map((function(n){return+n})),t=c.multiplyTransformArrays(t,u);return t}return null};et=function(n,t){var f=ft(n),r=n.element,i,u;if(f&&!e.isIe){i=c.Invert2DTransformationMatrix(f);u="matrix({0})".format(i.join(","));r.css("transform",u);r.offset(t);var o=r[0].getBoundingClientRect(),s=t.left-o.left,h=t.top-o.top;i[4]+=s*i[0];i[5]+=h*i[3];u="matrix({0})".format(i.join(","));r.css("transform",u)}else r.offset(t)}}));define("_generated/Less/Viva.Controls/Controls/Viva.DockedBalloon.css",
["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-dockedballoon.azc-dockedballoon-info{display:inline-block;text-align:center;width:20px;height:20px;cursor:pointer;position:relative}.azc-dockedballoon.azc-dockedballoon-info .azc-dockedballoon-anchor{width:100%;height:100%;stroke:none}.azc-dockedballoon.azc-dockedballoon-info .azc-dockedballoon-anchor img{display:inline-block;margin-top:5px}.azc-dockedballoon-requiredwidget.azc-dockedballoon-required{display:inline-block;text-align:center;width:11px;height:6px;cursor:pointer;position:relative}.azc-required-anchor{height:6px;width:6px;margin-right:5px}.azc-required-anchor svg{vertical-align:4px}.azc-dockedballoon-anchor-target{height:9px;width:9px;margin-left:3px}.azc-dockedballoon-validation{display:inline-block;vertical-align:top;box-sizing:border-box}.azc-dockedballoon-validation .azc-dockedballoon-anchor{cursor:pointer;font-weight:700;color:#fff;font-size:12px;text-align:center;text-decoration:none;display:block}.azc-dockedballoon-validation .azc-dockedballoon-anchor svg{display:none}.azc-dockedballoon-validation .azc-dockedballoon-anchor:before{content:"!"}.azc-dockedballoon-required{fill:#e81123}')})
);define("Viva.Controls/Controls/Viva.DockedBalloon",["require","exports","f","o","ko","$","MsPortalImpl.Controls/Controls/Base/WidgetBinding","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","MsPortalImpl/Base/Base.EventTypes","MsPortalImpl/Svg/Startup/RequiredField.svg","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Base/Viva.Base","Viva.Controls/Controls/Viva.Balloon","_generated/Less/Viva.Controls/Controls/Viva.DockedBalloon.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a){"use strict";var v;return (function(n){function tt(t){for(var r,u=t.findByClassName(n.classes.anchor),i=0;i<u.length;i++)r=e.contextFor(u[i]),r.$vm.balloonVisible(!1),r.$ctl._balloonPinned=!1}var b=i.Base.Images,g=i.getUniqueId,p,w;n.classes={widget:"azc-dockedballoon",requiredWidget:"azc-dockedballoon-requiredwidget",anchor:"azc-dockedballoon-anchor",anchorTarget:"azc-dockedballoon-anchor-target",balloon:"azc-dockedballoon-balloon",info:"azc-dockedballoon-info",required:"azc-dockedballoon-required",validation:
"azc-dockedballoon-validation azc-bg-default",balloonVisible:"azc-dockedballoon-balloonVisible"};var t=window,f=jQuery,v=n.classes,k="scroll.dockedBalloon",nt="<div class='"+n.classes.anchor+'\' data-bind=\'attr: { "aria-hidden" : $ctl._isCheckPopulated() || $ctl._isRequired(), "aria-label": $("<p>" + ko.unwrap(data.content) + "<\/p>").text(), "aria-expanded": data.balloonVisible().toString(), "aria-owns": data.balloonId, "aria-controls": data.balloonId }\' aria-haspopup=\'true\' role=\'button\'><!-- ko if: $ctl._isImageShown() -->'+("<div class='fxs-portal-svg-secondary azc-fill-hovered-heavy "+n.classes.anchorTarget+"' data-bind='css: { \"azc-fill-heavy\": data.balloonVisible() }'>")+"<span data-bind='image: $ctl._circleIcon'><\/span><\/div><!-- /ko --><!-- ko if: $ctl._isCheckPopulated() --><span data-bind=\"image: $ctl._checkIcon\"><\/span><!-- /ko --><!-- ko if: $ctl._isRequired() --><div data-bind='image: $ctl._requiredIcon' class='azc-required-anchor'><\/div><!-- /ko --><\/div>"+
("<div role='tooltip' class='"+n.classes.balloon+"' data-bind='attr: { id: data.balloonId }'><\/div>"),y=[],d={info:{showImage:!0,altText:"Info"},validation:{showImage:!1},required:{showImage:!1,required:!0}};y[0]="info";y[2]="validation";y[3]="required";p=(function(t){function i(){t.apply(this,arguments);this.type=0;this.content=u.observable("");this.link=u.observable();this.balloonVisible=u.observable(!1);this.stopClickPropagation=u.observable(!0);this.isTabbable=u.observable(!0);this.balloonId=n.classes.balloon+"-"+g()}return __extends(i,t),i})(l.ViewModel);n.ViewModel=p;w=(function(i){function e(t,r,u){u=u||{};u.viewModelType=u.viewModelType||p;i.call(this,t,r,u);this._requiredIcon=h;this._circleIcon=b.StatusBadge.Solid.Info({isLogo:!0});this._checkIcon=b.Check({palette:4});this._typeString=y[this.options.type];this._balloonHoverTimeoutHandle=null;this.element.addClass(this.options.type===3?n.classes.requiredWidget:n.classes.widget).addClass(v[this._typeString]).html(nt).find("."+n.classes.
balloon).addClass(v[this._typeString]);this._bindDescendants();this._initializeBalloonWidget();this._initializeKoDependencies();this._attachEvents()}return __extends(e,i),e.prototype.dispose=function(){if(!this._checkExistsOrRegisterDestroyId(i.prototype.dispose)){this._balloonViewModel&&(this._balloonViewModel=null);this._detachEvents();this._cleanElement();for(var n in v)this.element.removeClass(v[n]);i.prototype.dispose.call(this)}},r.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e.prototype._initializeKoDependencies=function(){var t=this,i=this._balloonViewModel,r=this.ltm,f=this.options;u.computed(r,f.link,(function(n){i.link(n)}));this._balloonViewModel.visible.subscribe(r,f.balloonVisible);u.computed(this.ltm,i.visible,(function(n){n||(t._balloonPinned=!1)}));u.computed(r,f.isTabbable,(function(n){t.tabindex(n?0:-1)}));u.computed(r,this.$tabIndex,(function(i){t.element.findByClassName(n.classes.anchor).attr("tabindex",i)}));i.
box((function(){return a.getBox(t.element.findByClassName(n.classes.anchor))}));u.computed(r,f.balloonVisible,(function(r){if(t._scrollableParents&&(t._scrollableParents.off(k,t._parentScrollHandler),t._scrollableParents=null,t._parentScrollHandler=null),r){t._scrollableParents=c.getScrollableParents(t.element,!0);t._scrollableParents.on(k,t._parentScrollHandler=function(){t._scrollOrResizeWindow()})}i.visible(r);t.element.toggleClass(n.classes.balloonVisible,r)}));u.isObservable(f.content)?f.content.subscribe(r,(function(n){i.content(n)})):i.content(this.options.content);this.$disabled.subscribe(r,(function(n){if(n!==i.disabled()){i.disabled(n);t._balloonPinned=!1;var r=t.options;n&&r.balloonVisible()&&r.balloonVisible(!1)}}))},e.prototype._initializeBalloonWidget=function(){var i=this,e=this.element.find("div."+n.classes.balloon),t=this._balloonViewModel=new a.ViewModel(this.vmBasicOption),r;t.visible(this.options.balloonVisible());t.content(u.unwrap(this.options.content));t.closeOtherBalloons=
!0;r=new a.Widget(e,t);this.ltm.registerForDispose([r,function(){e[0].addEventListener("click",(function(n){(n.target===i.element[0]||f.contains(i.element[0],n.target))&&(t.visible(!1),i._balloonPinned=!1,n.stopPropagation())}),!0)},]);this.balloonTextElemId=r.balloonTextElemId;this.element.children("div."+n.classes.anchor).attr("aria-describedby",this.balloonTextElemId)},e.prototype._attachEvents=function(){var i=this;this._detachEvents();this._mouseEnterHandler=function(){i._mouseEnter()};this._mouseLeaveHandler=function(){i._mouseLeave()};this._anchorClickHandler=function(n){n.preventDefault();i._anchorClick(n)};this._anchorFocusInHandler=function(){i._anchorFocusIn()};this._anchorFocusOutHandler=function(){i._anchorFocusOut()};this._keyDownHandler=function(n){i._keyDown(n)};this.element.find("."+n.classes.anchor).on("click",this._anchorClickHandler).end().on(s.default.focusin,this._anchorFocusInHandler).on(s.default.focusout,this._anchorFocusOutHandler).on(s.default.keydown,this._keyDownHandler).
on(s.default.mouseenter,this._mouseEnterHandler).on(s.default.mouseleave,this._mouseLeaveHandler);f(t).on(s.default.resize,this._resizeEventHandler=function(){i._scrollOrResizeWindow()}).on(s.default.mousedown,this._documentMouseDownHandler=function(n){i._documentMouseDown(n)})},e.prototype._detachEvents=function(){var i=this.element.findByClassName(n.classes.anchor);this._mouseEnterHandler&&(this.element.off(s.default.mouseenter,this._mouseEnterHandler),this._mouseEnterHandler=null);this._mouseLeaveHandler&&(this.element.off(s.default.mouseleave,this._mouseLeaveHandler),this._mouseLeaveHandler=null);this._anchorClickHandler&&(i.off("click",this._anchorClickHandler),this._anchorClickHandler=null);this._anchorFocusInHandler&&(this.element.off(s.default.focusin,this._anchorFocusInHandler),this._anchorFocusInHandler=null);this._anchorFocusOutHandler&&(this.element.off(s.default.focusout,this._anchorFocusOutHandler),this._anchorFocusOutHandler=null);this._keyDownHandler&&(this.element.off(
s.default.keydown,this._keyDownHandler),this._keyDownHandler=null);this._resizeEventHandler&&(f(t).off(s.default.resize,this._resizeEventHandler),this._resizeEventHandler=null);this._documentMouseDownHandler&&(f(t).off(s.default.mousedown,this._documentMouseDownHandler),this._documentMouseDownHandler=null)},e.prototype._mouseEnter=function(){var n=this;this._balloonPinned||this._balloonHoverTimeoutHandle||(this._balloonHoverTimeoutHandle=t.setTimeout((function(){n.options.balloonVisible(!0);n._clearBalloonHoverTimeout()}),200))},e.prototype._anchorClick=function(n){n.preventDefault();var t=this.options;t.stopClickPropagation()&&n.stopPropagation();this._balloonPinned?(t.balloonVisible(!1),this._balloonPinned=!1):(t.balloonVisible(!0),this._balloonPinned=!0)},e.prototype._mouseLeave=function(){this._clearBalloonHoverTimeout();this._balloonPinned||this.options.balloonVisible(!1)},e.prototype._keyDown=function(n){(n.keyCode===13||n.keyCode===32)&&(n.stopImmediatePropagation(),this.options.balloonVisible(
!0),n.preventDefault())},e.prototype._clearBalloonHoverTimeout=function(){this._balloonHoverTimeoutHandle&&(t.clearTimeout(this._balloonHoverTimeoutHandle),this._balloonHoverTimeoutHandle=null)},e.prototype._anchorFocusIn=function(){this.element.findByClassName(n.classes.anchorTarget).addClass("azc-fill-heavy")},e.prototype._anchorFocusOut=function(){var t=this;this.element.findByClassName(n.classes.anchorTarget).removeClass("azc-fill-heavy");setTimeout((function(){var n=document.activeElement;n!==null&&t.element.has(n).length===0&&(t.options.balloonVisible(!1),t._balloonPinned=!1)}),1)},e.prototype._scrollOrResizeWindow=function(){this._balloonPinned=!1;this.options.balloonVisible(!1)},e.prototype._documentMouseDown=function(n){n.target===this.element[0]||f.contains(this.element[0],n.target)||(this._balloonPinned=!1,this.options.balloonVisible(!1))},e.prototype._isImageShown=function(){return d[this._typeString].showImage},e.prototype._isRequired=function(){return d[this._typeString].required}
,e.prototype._isCheckPopulated=function(){return this.element.hasClass("azc-dockedballoon-validation")},e})(l.Widget);n.Widget=w;u.bindingHandlers.azcDockedBalloon=o.getBindingHandler(w);n.DismissAllBalloons=tt})(v||(v={})),v}));define("_generated/Less/Viva.Controls/Controls/Forms/Viva.Button.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-button{display:inline-flex;align-items:center;justify-content:center;border-width:1px;border-style:solid;box-sizing:border-box;overflow:hidden;min-width:60px;font-size:12px;padding:2px 22px 3px;height:23px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;text-align:center}.azc-button:focus{outline-width:1px}.azc-button img{margin-right:3px}.azc-button svg{height:100%;width:100%}")}));define("Viva.Controls/Controls/Forms/Viva.Button",["require","exports","o","ko","$","Viva.Controls/Controls/Base/Viva.Base","MsPortalImpl/Base/JQueryHelper","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler",
"_generated/Less/Viva.Controls/Controls/Forms/Viva.Button.css"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var h=jQuery,t,u,s;(function(n){n[n.Initial=0]="Initial";n[n.Hover=1]="Hover";n[n.Active=2]="Active"})(n.MouseState||(n.MouseState={}));t=n.MouseState;u=(function(n){function i(){n.apply(this,arguments);this.submit=!1;this.selector=r.observable(null);this.toggle=r.observable(!1);this.pressed=r.observable(!1);this.state=r.observable(t.Initial);this.click=h.noop;this.uri=r.observable({});this.text=r.observable({});this.tabindex=r.observable(0);this.visible=r.observable(!0);this.isDefault=r.observable(!1)}return __extends(i,n),i})(f.ViewModel);n.ViewModel=u;s=(function(n){function f(t,i,r){var f=this,e;r=r||{};r.viewModelType=r.viewModelType||u;n.call(this,t,i,r);this.element.addClass("azc-button fxt-button").attr({role:"button",type:"button"}).on("click",this._clickHandler=function(n){return f._click(n)}).on("mousedown",this._mouseDownHandler=function(){f._mouseDown(
)}).on("mouseenter",this._mouseEnterHandler=function(){f._mouseEnter()}).on("mouseleave",this._mouseLeaveHandler=function(){f._mouseLeave()});if(!this.element.is("button")){e=!1;this.element.on("keydown",this._keyDownHandler=function(n){var t=function(){f.element.trigger("click",n)};n.which===13&&t();e=!1;n.which===32&&(e=!0,n.stopPropagation())}).on("keyup",this._keyUpHandler=function(n){e&&n.which===32&&(e=!1,f.element.trigger("click",n),n.stopPropagation())})}this._initializeComputeds()}return __extends(f,n),f.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._cleanElement("azc-button fxt-button fxs-inner-dotted-border azc-button-default fxs-portal-button-primary fxs-button-default fxs-button-disabled azc-disabled"),this.element.removeAttr("role tabindex aria-pressed aria-disabled aria-label"),this._mouseLeaveHandler&&(this.element.off("mouseleave",this._mouseLeaveHandler),this._mouseLeaveHandler=null),this._mouseEnterHandler&&(this.element.
off("mouseenter",this._mouseEnterHandler),this._mouseEnterHandler=null),this._mouseDownHandler&&(this.element.off("mousedown",this._mouseDownHandler),this._mouseDownHandler=null),this._removeMouseUpHandler(),this._keyUpHandler&&(this.element.off("keyup",this._keyUpHandler),this._keyUpHandler=null),this._keyDownHandler&&(this.element.off("keydown",this._keyDownHandler),this._keyDownHandler=null),this._clickHandler&&(this.element.off("click",this._clickHandler),this._clickHandler=null),n.prototype.dispose.call(this))},i.defineProperty(f.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),f.prototype._initializeComputeds=function(){var n=this,t=this.ltm,u=this.options,i=this.element;this.$tabIndex.subscribeAndRun(t,(function(n){i.attr("tabindex",n)}));r.computed(t,(function(){u.toggle()?i.attr("aria-pressed",u.pressed()):i.removeAttr("aria-pressed")}));r.computed(t,(function(){var t=u.selector();n._previousSelector!==t&&n._previousImg&&n._previousImg.attr(
{src:"",alt:""});n._previousSelector=t;n._previousImg=i.find(t).attr({src:n._getUri(),alt:n._getAlt()})}));r.computed(t,(function(){var t=n.$disabled();i.toggleClass("fxs-button-disabled azc-disabled",t).toggleClass("fxs-inner-dotted-border",!t).attr("aria-disabled",t).filter(":button").prop("disabled",t)}));r.computed(t,(function(){var n=u.isDefault();i.toggleClass("azc-button-default fxs-portal-button-primary",n).toggleClass("fxs-button-default",!n)}));r.computed(t,(function(){e.toggle(i,u.visible()!==!1)}));u.tabindex.subscribeAndRun(t,(function(t){n.tabindex(t)}))},f.prototype._click=function(n){return this.$disabled()?!1:(this.options.pressed(!this.options.pressed()),this.options.click&&this.options.click.call(this.element,n),this.options.submit&&this.element.submit(),!0)},f.prototype._getAlt=function(){var n,i,r,u;return(n=this.options.text(),typeof n=="string")?n:n?(i=this._getObject(n),r=this.options.state(),u=t[r].toLowerCase(),i[u]||null):null},f.prototype._getObject=function(n){return this.
options.toggle()&&n.normal&&n.pressed&&(n=this.options.pressed()?n.pressed:n.normal),n.enabled&&n.disabled&&(n=this.$disabled()?n.disabled:n.enabled),n},f.prototype._getUri=function(){var n,i,r,u;return(n=this.options.uri(),typeof n=="string")?n:n?(i=this._getObject(n),r=this.options.state(),u=t[r].toLowerCase(),i[u]||null):null},f.prototype._mouseDown=function(){var n=this;this.element.addClass("azc-button-state-active");this.options.state(t.Active);this._removeMouseUpHandler();this._body&&this._body.length===1||(this._body=h("body"));this._body.on("mouseup",this._mouseUpHandler=function(){n.element.removeClass("azc-button-state-active");n.options.state(t.Initial);n.element.hasClass("azc-button-state-hover")?n._mouseEnter():n._mouseLeave();n._removeMouseUpHandler()})},f.prototype._mouseEnter=function(){this.element.addClass("azc-button-state-hover");this.options.state()!==t.Active&&this.options.state(t.Hover)},f.prototype._mouseLeave=function(){this.element.removeClass("azc-button-state-hover");
this.options.state()!==t.Active&&this.options.state(t.Initial)},f.prototype._removeMouseUpHandler=function(){this._mouseUpHandler&&(this._body.off("mouseup",this._mouseUpHandler),this._mouseUpHandler=null)},f})(f.Widget);n.Widget=s;r.bindingHandlers.azcButton=o.getBindingHandler(s,{controlsDescendantBindings:!1})})(s||(s={})),s}));define("MsPortalImpl.Controls/Fields/Base/LabelAndBalloonWidget",["require","exports","f","ko","$","MsPortalImpl/Base/JQueryHelper","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Viva.DockedBalloon","MsPortalImpl/Base/Base.ImplUtils","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer","MsPortalImpl/Base/Base.EventTypes"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(t){var w=s.ProvenanceContainer,b=i.ViewModels,v=b.Forms.LabelPosition,k=b.Forms.SubLabelPosition,l=jQuery,ut=window,ft="azc-text-label",d="azc-text-sublabel",g="msportalfx-tooltip-overflow",et="azc-text-sublabel-neighbor",y="fxc-left-label",nt="fxc-right-sublabel",
ot="azc-form-labelcontainer",st="azc-required-balloon",ht="azc-checkBoxField-inlineLabelContainer",tt="fxs-hidden-important",ct="msportalfx-form-formelement",lt="azc-formElementContainer",it="azc-formElementSubLabelContainer",rt="fxc-has-sublabel",p="<div/>",at="<label/>",vt="azc-validationBelowCtrl",u=r.unwrap,a=r.isObservable,yt=(function(){function t(n,t){var i=this.ltm=n.createChildLifetime();this.vmBaseOptions={ltm:i};this._options=t;this._initializeRequiredComputed();n.registerForDispose(this)}return t.prototype._initializeRequiredComputed=function(){var t=this,n=this._options.validations;n&&(this.required=r.pureComputed((function(){var i=u(n)||[];return i.firstIndex((function(n){return!!n&&!!n.type&&n.type===1}))>=0&&!!u(t._options.label)})))},t.prototype.appendWidgetToDom=function(n,t){var r=this,i=this._options,e,f;i.subLabel?(e=l(p).addClass(it).append(t),n.append(e)):n.append(t);i.subLabel&&(a(i.subLabel)&&i.subLabel.subscribe(this.ltm,(function(t){n.toggleClass(rt,t.length>0)})),f=
u(i.subLabel),f&&f.length>0&&n.addClass(rt));this.ltm.registerForDispose(n.setEvents([c.default.keydown,function(n){if(n.which===112)return r.toggleBalloon(),!1;n.which===27&&r.toggleBalloon(!1)}],[c.default.focusout,function(){ut.setTimeout((function(){r.ltm.isDisposed()||l.contains(n[0],document.activeElement)||r.toggleBalloon(!1)}))}]))},t.prototype.insertLabelBefore=function(n,t){var r,i;t===void 0&&(t={});r=this._options.subLabel&&!t.inlineLabel?n.parent():n;this.labelContainer=this._createLabelContainer(t.inlineLabel?ht:ot);i=this.labelContainer;i&&(t.inlineLabel?r.after(i):r.before(i),t.emptyLabel||this._appendLabelContent(i))},t.prototype._createLabelContainer=function(n){var i=null,t=this._options;return(t.label||t.infoBalloonContent||t.infoBalloonLinkContent)&&(i=l(p).addClass(n).addClass(ft),r.reactor(this.ltm,(function(){var n=u(t.label),r=u(t.labelPosition),f=(n||u(t.infoBalloonContent)||t.infoBalloonLinkContent())&&r!==v.Hidden;i.toggleClass(tt,!f);i.attr("aria-hidden",f?null:
!0);i.parent().toggleClass(y,r===v.Left&&!!n)}))),i},t.prototype._appendLabelContent=function(t){var ot=this,k=this._options,d=k.label,c,ft,rt,s,et,g,nt,ut,b;d&&(this.labelId="azc-form-guid-"+i.getUniqueId(),c=l("<label id='"+this.labelId+"' for='"+this.labelId+"-for'><\/label>"),ft=function(){var i=h.sanitizeHTML(new w(u(d),n),!0).sanitizedMarkup;c.html(i);i&&(c.parent()[0]||t.append(c),r.applyBindingsToDescendants(r.contextFor(c[0]),c[0]))},this.required&&(rt=l(p).addClass(st),s=null,this.required.subscribeAndRun(this.ltm,(function(n){n&&!s&&(s=new o.ViewModel(ot.vmBaseOptions),s.type=3,a(s.content)&&s.content(e.requiredField),s.isTabbable(!1),ot.ltm.registerForDispose(new o.Widget(rt,s)),t.prepend(rt));f.toggle(rt,n)}))),et=t.parent(),et.toggleClass(y,u(k.labelPosition)===v.Left&&!!u(d)),k._msPortalFxLeftLabelWidth.subscribeAndRun(this.ltm,(function(n){n&&(t.attr("style","width: "+n+"px;"),et.findByClassName(it).attr("style","width: calc(100% - "+n+"px);"))})),a(d)?d.subscribeAndRun(this.
ltm,(function(){ft()})):ft());g=k.infoBalloonContent;nt=k.infoBalloonLinkContent;(g||nt)&&(this.labelId=this.labelId||"azc-form-guid-"+i.getUniqueId(),this.balloonId=this.labelId+"-balloon",ut=l("<div id='"+this.balloonId+"'/>",document),b=new o.ViewModel(this.vmBaseOptions),b.type=0,b.isTabbable(!1),g&&(b.content=g),nt&&(b.link=nt),this._widget=new o.Widget(ut,b),this.balloonTextElemId=this._widget.balloonTextElemId,this.ltm.registerForDispose(this._widget),t.append(ut),r.reactor(this.ltm,(function(){ut.toggleClass(tt,!u(g)&&!u(nt))})))},t.prototype.insertSubLabelAfter=function(t){var i=this,u=this._options,f;u.subLabel&&(f=r.utils.wrap(u.subLabel),this._subLabelElement=l(at).addClass(d).addClass(g),f.subscribeAndRun(this.ltm,(function(r){i._subLabelElement.html(r?h.sanitizeHTML(new w(r,n)).sanitizedMarkup:"");var u=i._subLabelElement.html().length>0;i.labelContainer&&i.labelContainer.toggleClass(et,u);i._subLabelElement.attr("aria-hidden",u?null:!0);i._updateWidth(t)})),t.after(this._subLabelElement),
u.subLabelPosition&&(a(u.subLabelPosition)?u.subLabelPosition.subscribeAndRun(this.ltm,(function(n){i._rightSublabel=n===k.Right;i._updateWidth(t)})):(this._rightSublabel=r.unwrap(u.subLabelPosition)===k.Right,this._updateWidth(t))))},t.prototype.insertValidationMessageBelowControlAfter=function(n,t,i){t.element.addClass(vt);var u=l("<label class='azc-validation-messages "+g+"' id='"+this.labelId+"-err' aria-live='polite' aria-atomic='true'><!-- ko foreach: items --><!-- ko if: state === 1 --><div data-bind=\"untrustedHtml: message\"><\/div><!-- /ko --><!-- /ko --><\/label>");n.after(u);r.applyBindings({items:i},u[0])},t.prototype.toggleBalloon=function(n){if(this._widget&&this._widget.options&&this._widget.element.filter(":visible").length){var t=this._widget.options.balloonVisible;i.isNullOrUndefined(n)&&(n=!t());t(n)}},t.prototype._updateWidth=function(n){var t="style",i=n.parent(),r=i.findByClassName(lt),u=n.closest("."+ct),f;this._subLabelElement.html().length>0&&this._rightSublabel?
(u.addClass(nt),f=i.findByClassName(d).width()+1,r.attr(t,"width: calc(100% - "+f+"px)")):(r.attr(t,""),u.removeClass(nt))},t.prototype.dispose=function(){var n=this.labelContainer,t=this._subLabelElement;n&&(n.parent().removeClass(y),n.remove());t&&t.remove();this.ltm&&this.ltm.dispose()},t})();t.LabelAndBalloonWidgetHelper=yt})(l||(l={})),l}));define("_generated/Less/Viva.Controls/Controls/Base/Viva.ValidationPlacements.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-validatableControl .azc-dockedballoon-validation,.azc-validatableControl-valid-validated .azc-dockedballoon-anchor::before,div.azc-validationBelowCtrl .azc-validatableControl-invalid div.azc-dockedballoon.azc-dockedballoon-validation,div.azc-validationBelowCtrl.azc-validatableControl-invalid div.azc-dockedballoon.azc-dockedballoon-validation{display:none}.azc-dropdown.azc-validatableControl-invalid,.azc-editableCombo.azc-validatableControl-invalid,.azc-inputbox.azc-validatableControl-invalid,.azc-inputbox.azc-validatableControl-pending,.azc-inputbox.azc-validatableControl-valid-validated{padding-right:14px}.azc-dropdown.azc-validatableControl-invalid div.azc-dockedballoon.azc-dockedballoon-validation,.azc-editableCombo.azc-validatableControl-invalid div.azc-dockedballoon.azc-dockedballoon-validation,.azc-inputbox.azc-validatableControl-invalid div.azc-dockedballoon.azc-dockedballoon-validation,.azc-inputbox.azc-validatableControl-pending div.azc-dockedballoon.azc-dockedballoon-validation,.azc-inputbox.azc-validatableControl-valid-validated div.azc-dockedballoon.azc-dockedballoon-validation{display:inline-block;width:14px;margin-right:-14px}.azc-checkBox.azc-validatableControl-invalid .azc-dockedballoon-validation{display:inline-block}div.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid,div.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid .azc-validatableControl-invalid{padding-right:0}div.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid.azc-validation-border{border-width:2px;border-style:solid;border-color:#e81123;width:100%}div.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid.azc-validation-border.azc-optionPicker{width:calc(100% - 4px)}div.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid .azc-validation-border{border-width:2px;border-style:solid;border-color:#e81123;width:100%}.fxc-group-dropdown.azc-validationBelowCtrl .azc-validatableControl-invalid div.azc-validation-border{border-width:2px;border-style:solid;border-color:#e81123;width:100%;width:calc(100% - 12px);padding-right:0}.fxc-group-dropdown.azc-validationBelowCtrl .azc-validatableControl-invalid .fxc-group-dropdown-arrow:before{right:10px}.fxc-group-dropdown.fxc-dropdown-filter.azc-validationBelowCtrl:not(.fxc-dropdown-multiselect) .azc-validatableControl-invalid{height:25px}.fxc-group-dropdown.fxc-dropdown-filter.azc-validationBelowCtrl:not(.fxc-dropdown-multiselect) .azc-validatableControl-invalid .azc-validation-border{width:100%;height:25px;padding-top:2px;padding-bottom:3px}.azc-validation-messages{clear:both;line-height:15px;margin-top:5px}.azc-validation-messages.azc-show-validation{display:block}.azc-validatableControl.azc-textBox{box-sizing:border-box}.azc-validatableControl-invalid .azc-dockedballoon-validation .azc-dockedballoon-anchor{padding-top:3px;line-height:normal}.azc-checkBox .azc-dockedballoon-validation .azc-dockedballoon-anchor{padding:0 2px 0 0}.azc-validatableControl-invalid .azc-inputbox-wrapper{display:inline-block}.azc-validatableControl-pending{overflow:visible;position:relative}.azc-validatableControl-pending .azc-dockedballoon-validation .azc-dockedballoon-anchor:before{content:url(Content/static/azc-validatableControl-pending.gif);position:absolute;top:4px;right:3px}.azc-validatableControl-pending .azc-dockedballoon-validation .azc-dockedballoon-anchor,.azc-validatableControl-valid-validated .azc-dockedballoon-validation .azc-dockedballoon-anchor{cursor:default;padding:1px 1px 0 0}.fxc-selector-requiredBalloon .azc-dockedballoon-anchor{padding:0}.azc-validatableControl-pending .azc-inputbox-wrapper,.azc-validatableControl-valid-validated .azc-inputbox-wrapper{display:inline-block;margin:0;padding:0;border-width:0;text-decoration:none;border-right-color:transparent;float:left}.azc-validatableControl-pending .azc-dockedballoon-validation,.azc-validatableControl-valid-validated .azc-dockedballoon-validation{border-width:1px 1px 1px 0;border-style:solid;outline:0}.azc-inputbox.azc-validatableControl-pending .azc-inputbox-wrapper .azc-input,.azc-inputbox.azc-validatableControl-valid-validated .azc-inputbox-wrapper .azc-input{border-right-width:0}.azc-validatableControl-valid-validated .azc-dockedballoon-validation .azc-dockedballoon-anchor svg{display:block;height:10px;width:10px;margin-top:5px}")})
);define("Viva.Controls/Controls/Base/ValidationPlacements/Viva.Base",["require","exports","ko","Viva.Controls/Util/Viva.Util","_generated/Less/Viva.Controls/Controls/Base/Viva.ValidationPlacements.css"],(function(n,t,i,r){"use strict";var u;return (function(n){var t=(function(){function n(n){this._destroyIds=[];this._container=n;this._ltm=n.createChildLifetime()}return n.prototype._checkExistsOrRegisterDestroyId=function(n){return r.existsOrRegisterId(this._destroyIds,n)},n.prototype.isDestroyed=function(){return this._destroyIds.length>0},n.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(null)||this._ltm&&(this._ltm.dispose(),this._ltm=this._container.createChildLifetime())},n.prototype.initialize=function(n,t){var u=this,r;this._element=n;this._validatable={enableValidation:t.enableValidation,valid:t.valid,validationState:t.validationState,validators:t.validators};r=this._ltm;this._errorMessage||(this._errorMessage=i.computed(r,(function(){var r="",i=u._validatable.validators(
),n,t;if(i)for(n=0;n<i.length;n++)if(t=i[n],!t.valid()&&t.message()){r=t.message();break}return r})));this._initializeSubscriptions(r)},n.prototype.onErrorMessageChanged=function(){},n.prototype.onValidationStateChanged=function(){},n.prototype._initializeSubscriptions=function(n){var t=this;this._validatable.validationState.subscribeAndRun(n,(function(n){t.onValidationStateChanged(n)}));this._errorMessage.subscribeAndRun(n,(function(n){t.onErrorMessageChanged(n)}))},n})();n.Base=t})(u||(u={})),u}));define("Viva.Controls/Controls/Base/ValidationPlacements/Viva.Css",["require","exports","ko","Viva.Controls/Controls/Base/ValidationPlacements/Viva.Base"],(function(n,t,i,r){"use strict";var u;return (function(n){var t=[],f="azc-validatableControl-none",e="azc-validatableControl-invalid",o="azc-validatableControl-pending",u="azc-validatableControl-valid-validated",s="data-validatable-control-valid",c="data-validatable-control-validation-state",h;t[0]="none";t[1]="invalid";t[2]="valid";t[3]="pending";
h=(function(n){function r(){n.apply(this,arguments);this._input=null}return __extends(r,n),r.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._element&&this._element.removeClass([f,e,o,u].join(" ")),this._input&&this._input.removeAttr(s))},r.prototype.initialize=function(t,r){var f=this,e;n.prototype.initialize.call(this,t,r);e=this._ltm;this._valid=i.computed(e,(function(){return f._validatable.enableValidation()&&f._validatable.validators().length>0&&f._validatable.validationState()===2}));this._valid.subscribe(e,(function(n){f._element.toggleClass(u,n)}));this._input=this._element.find("input, select, textarea");this._validatable.validationState.notifySubscribers(this._validatable.validationState());this._setValidationAttribute(this._validatable.validationState())},r.prototype.onValidationStateChanged=function(n){var t=this._element;t.toggleClass(f,n===0);t.toggleClass(e,n===1);t.toggleClass(o,n===3);t.toggleClass(
u,this._valid&&this._valid());this._setValidationAttribute(n)},r.prototype._setValidationAttribute=function(n){this._input&&(this._input.attr(s,n===2||this._validatable.validators().length===0),this._input.attr(c,t[n]))},r})(r.Base);n.Css=h})(u||(u={})),u}));define("Viva.Controls/Controls/Base/ValidationPlacements/Viva.DockedBalloon",["require","exports","i","ko","Viva.Controls/Controls/Base/Viva.Validators","Viva.Controls/Controls/Viva.DockedBalloon","Viva.Controls/Controls/Base/ValidationPlacements/Viva.Base"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var o=jQuery,t={length:4},u;t[0]="none";t[1]="invalid";t[2]="valid";t[3]="pending";u=(function(n){function u(t,i){n.call(this,t);this._inputSelector="input, select";this._settings=i}return __extends(u,n),u.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._detachEvents(),this._widget&&(this._widget.dispose(),this._widget=null),this._element&&this.
_widgetElement&&(r.cleanNode(this._widgetElement[0]),this._widgetElement.remove()),this._errorMessagesListWidget&&(this._errorMessagesListWidget.dispose(),this._errorMessagesListWidget=null))},u.prototype.onValidationStateChanged=function(i){if(n.prototype.onValidationStateChanged.call(this,i),!this._widgetElement){if(i===0)return;this._createDockedBalloon()}if(this._widgetElement.removeClass("fxs-bg-error"),this._inputElement)switch(i){case 0:case 1:this._widgetElement.addClass("fxs-bg-error");case 2:case 3:this._widgetViewModel.disabled(!this._validationStateBalloonOptions[t[i]].balloonVisible)}},u.prototype._setInputSelector=function(n){this._inputSelector=n},u.prototype._createDockedBalloon=function(){var n,t,r;this._inputElement=this._element.find(this._inputSelector);this._widgetElement||(this._widgetElement=o("<div />"));n=new i.TriggerableLifetimeManager;this._widgetViewModel=new f.ViewModel({ltm:n});this._widgetViewModel.content=this._errorMessage;this._widgetViewModel.isTabbable(
!1);this._initializeValidationStateDockedBalloonOptions(this._settings);this._element.append(this._widgetElement);this._widgetViewModel.type=2;t=this._element.innerHeight();r=this._widget=new f.Widget(this._widgetElement,this._widgetViewModel);r.ltm.registerForDispose(n);this._widgetElement.css("height",t);this._attachEvents();this.onValidationStateChanged(this._validatable.validationState())},u.prototype._initializeValidationStateDockedBalloonOptions=function(n){var i=function(n){return n!==undefined&&n!==null},u=function(n){return{balloonVisible:n}};if(this._validationStateBalloonOptions={none:u(!1),invalid:u(!0),valid:u(!1),pending:{}},n&&n.validationStateBalloonOptions){var r=n.validationStateBalloonOptions,f=r.none,e=r.invalid,o=r.valid,s=r.pending,t=this._validationStateBalloonOptions;f&&(t.none.balloonVisible=i(f.balloonVisible)?f.balloonVisible===!0:t.none.balloonVisible);e&&(t.invalid.balloonVisible=i(e.balloonVisible)?e.balloonVisible===!0:t.invalid.balloonVisible);o&&(t.valid.
balloonVisible=i(o.balloonVisible)?o.balloonVisible===!0:t.valid.balloonVisible);s&&(t.pending.balloonVisible=i(s.balloonVisible)?s.balloonVisible===!0:t.pending.balloonVisible)}},u.prototype._attachEvents=function(){var n=this;this._detachEvents();this._inputElementFocusHandler=function(){n._onInputElementFocus()};this._inputElementBlurHandler=function(){n._onInputElementBlur()};this._widgetAnchorElementClickHandler=function(n){n.preventDefault()};this._element.find("input,select").on("focus",this._inputElementFocusHandler).on("blur",this._inputElementBlurHandler);this._widgetElement.find("a").on("click",this._widgetAnchorElementClickHandler)},u.prototype._detachEvents=function(){this._inputElementFocusHandler&&(this._inputElement.off("focus",this._inputElementFocusHandler),this._inputElementFocusHandler=null);this._inputElementBlurHandler&&(this._inputElement.off("blur",this._inputElementBlurHandler),this._inputElementBlurHandler=null);this._widgetAnchorElementClickHandler&&(this._widgetElement.
find("a").off("blur",this._widgetAnchorElementClickHandler),this._widgetAnchorElementClickHandler=null)},u.prototype._onInputElementFocus=function(){this._widget&&!this._validatable.valid()&&this._widget.options.balloonVisible(!0)},u.prototype._onInputElementBlur=function(){this._widget&&this._widget.options.balloonVisible(!1)},u.defaultOptions={validationStateBalloonOptions:{pending:{balloonVisible:!1}}},u})(e.Base);n.DockedBalloon=u})(o||(o={})),o}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRow",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl"],(function(n,t,i){"use strict";var r;return (function(n){var t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getName=function(){return"Focusable"},t.prototype.getOrder=function(){return 0},t})(i.GridExtension);n.FocusableRowExtension=t})(r||(r={})),r}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRowActivate.css",["require","exports",
"module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-grid-activateableRow tr.azc-grid-row td[data-activatable=true]{font-family:az_ea_font,"Segoe UI",wf_segoe-ui_semibold,"Segoe UI Semibold","Segoe WP Semibold","Segoe WP",Tahoma,Arial,sans-serif;font-weight:600}.azc-grid-activateableRow .azc-grid-activateonselected tr.azc-grid-row:not([aria-disabled=true]),.azc-grid-activateableRow tr.azc-grid-row:not([aria-disabled=true]) td[data-activatable=true],.azc-grid-link{cursor:pointer}')}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRowActivate",["require","exports","o","ko","$","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Base/Base.EventTypes","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRowActivate.css"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){var v=MsPortalFx,h=v.isNullOrUndefined,u=f.RowSelectionMode,
t=jQuery,y="keypress.",c="azcActivation",p="azc-grid-virtualFocus",l="tbody tr[data-grid-activateable=true]",w=l+":not([aria-disabled=true])",a=w+" ["+e.Constants.dataActivatableAttribute+"=true]",b=w+", "+a,d="tbody tr[data-grid-activateable=true]:not([aria-disabled=true])",g='css: { "fxs-portal-selected fxs-portal-activated": activated() }',nt='css: { "azc-grid-activateonselected": $ctl.getPlugin("azc-grid-activateableRow")._activateOnSelected }',tt='attr: { "data-grid-activateable": "true", "data-grid-row-activated": activated() ? "true" : "false" }',it='css: { "azc-grid-link": !$disabled() && link() && link().uri }',rt='attr: { "data-activatable": activatable(), "data-grid-cell-activated": $parent.activated() === $data.itemKey ? "true" : "false" }',ut=v.disposeDisposable,k;n.windowOpen=function(n,t){window.open(n,t)};k=(function(o){function v(n){o.call(this);this._disposables=[];this._options=n=n||{};this._activatedColumnKey=n.activatedColumnKey||r.observable();this._primaryActivateColumnKey=
n.primaryActivateColumnKey||r.observable();this._activateOnSelected=n.activateOnSelected||r.observable(!1);this._preserveSelection=r.observable(!1);this._activatedRow=null;this._selfActivation=!1}return __extends(v,o),i.defineProperty(v.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),v.prototype.getActivatedRows=function(){return this._widget._getAllRowMetadata().filter((function(n){return!h(n.activated.peek())}))},v.prototype.afterSetTemplates=function(n){var u=n.getHtmlTemplate("bodyRowsCore"),t="data-bind",f=[tt,it,g],i,r;u.addAttribute("tr",t,f);i=n.getHtmlTemplate("bodyCell");i.addAttribute("td",t,[rt]);r=n.getHtmlTemplate("table");r.addAttribute("table",t,[nt])},v.prototype.getDefaultRowMetadataProperties=function(){return{activated:r.observable(null),activatedInfo:r.observable(null),link:r.observable(null),useDefaultActivation:r.observable(!0)}},v.prototype.getDefaultColumnProperties=function(){return{activatable:r.observable(!!this.options.
activateRow)}},v.prototype.afterAttachEvents=function(){var i=this,n=this;this._disposables.push(this._widget.element.setEvents(["click.azcActivationCell",a,function(t){n._handleActivationKeyPressOrClick(t,this)}],[y+"azcActivationRow",d,function(t){n._handleActivationKeyPressOrClick(t,this)}],[y+"azcActivationCell",a,function(t){n._handleActivationKeyPressOrClick(t,this);t.stopPropagation()}],["rowSelect."+c,function(t,i){n._onRowSelect(t,i)}],["focus."+c,b,function(n){var i=t(n.currentTarget);i.closest(l).addClass(p)}],["blur."+c,b,function(n){var i=t(n.currentTarget);i.closest(l).removeClass(p)}],["beforeRowSelect."+c,function(n,t){i._onBeforeRowSelect(n,t)}]))},v.prototype.afterCreate=function(){var n=this,t=this._widget.ltm,i=this._widget.options;this._selectableRowExtension=this._widget.getPlugin(f.SelectableRowExtension.Name);this._widget._getAllRowMetadata().filter((function(n){return!h(n.activated.peek())&&n.selected.peek()})).forEach((function(n){n.activated(null)}));r.computed(t,
(function(){var t=i.columns();n._firstColumnKey=t&&t.length>0?t[0].itemKey:null}));i.items.map(t,(function(t,i){var r=n._widget.getRowMetadata(i),u=!1;r.selected.subscribe(t,(function(t){var i=n._activateOnSelected();if(t&&i)n._activateRow(r);else if(i&&!u)try{u=!0;r.activated(null)}finally{u=!1}}));r.activated.subscribe(t,(function(t){var i=!h(t);if(i){if(!u&&!n._selfActivation)try{u=!0;n._activateOnSelected()&&r.selected(!0);n._activatedColumnKey.peek()!==t&&n._activatedColumnKey(t)}finally{u=!1}n._activatedRow=r}}))}));r.computed(t,(function(){n._widget.element.toggleClass("azc-grid-selectionActivates",n._activateOnSelected())}));this._widget._getAllRowMetadata().forEach((function(t){t.activated()&&(n._activatedRow=t,n._activateOnSelected()&&t.selected(!0))}))},v.prototype.getOrder=function(){return 40},v.prototype.getDependencies=function(){return[new f.SelectableRowExtension(this.options)]},v.prototype.beforeDestroy=function(){ut(this._disposables);this._disposables=[]},v.prototype.getName=function(
){return v.Name},v.prototype.shouldNotAllowSelectAll=function(){return this._activateOnSelected()},v.prototype.shouldNotChangeSelection=function(n,i){var f=this.options,r=f.mode?f.mode():u.Off,c=r===u.MultipleAdd||r===u.MultipleReplace,o,h;if(!!f.activateRow&&c&&!f.hideMultiSelectCheckbox&&i.type===s.default.click&&t(i.target).closest("td").attr("data-activatable")==="true")return!0;if(r===u.MultipleReplace){if(t(n).attr("aria-selected")==="true"&&!(i.shiftKey||i.ctrlKey)&&(o=t(i.target),h=o.attr(e.Constants.dataActivatableAttribute)==="true"?o:o.closest("["+e.Constants.dataActivatableAttribute+"=true]"),h.length>0&&t.contains(n,h[0])))return!0}else if(r===u.Single||r===u.AlwaysSingle)return i.ctrlKey||i.shiftKey;return!1},v.prototype.previous=function(){return this._selectableRowExtension.previous()},v.prototype.next=function(){return this._selectableRowExtension.next()},v.prototype._changeActivation=function(n,i){var h=this.options,f=r.dataFor(n),a=t(i.currentTarget),y=a.closest(".azc-grid-cell"),
k=t(n).find(".azc-grid-cell"),d=y[0]?y:k,g=r.dataFor(d[0]),p=f.selected.peek(),nt=f.activated.peek(),w=!1,o=g.itemKey,c,l,v,b;if(p&&(i.ctrlKey||i.shiftKey)&&nt===o&&(w=!0),h.activateRow||p||i.type!=="keypress"||(c=e.cloneEvent(i,"keydown"),c.which=32,t.extend(c,{which:32,target:n,ctrlKey:i.ctrlKey,altKey:i.altKey,shiftKey:i.shiftKey}),t(n).trigger(c),i.stopPropagation(),i.preventDefault()),w||(this._activatedInfo=a.attr(e.Constants.dataActivateInfoAttribute),this._activatedColumnKey(o)),l=this._activatedRow,l!==null&&l!==f&&l.activated(null),f!==null)if(h.activateRow)f.activated()||h.activateRow(f);else if(v=f.useDefaultActivation,!v||v())try{this._selfActivation=!0;b=h.mode()!==u.MultipleAdd||!(f.activated()!==o&&f.selected());this._activatedColumnKey(o);f.activated(o);b||i.stopPropagation()}finally{this._selfActivation=!1;a.trigger(s.default.fxensurebladevisible,{})}},v.prototype._handleActivationKeyPressOrClick=function(n,i){if(n.type!==s.default.keypress||n.which===13&&!n.ctrlKey||
n.which===10&&n.ctrlKey||n.which===32&&!this.options.activateRow){var r=t(i).closest("tr[data-grid-activateable=true]");r.length>0&&this._changeActivation(r[0],n)}},v.prototype._onBeforeRowSelect=function(n,t){if(this._activateOnSelected()){var i=t&&t.selected,r=i&&i.selected;r&&r()&&this._activateRow(i)}},v.prototype._onRowSelect=function(t,i){var u=i.selected,r,f;u&&(r=u.link&&u.link(),r&&(f=r.uri,f&&(n.windowOpen(f,r.target),this._selectableRowExtension.unselectAllRows())))},v.prototype._activateRow=function(n){this._lastActivatedRow&&this._lastActivatedRow.activated(null);this._lastActivatedRow=n;var t=this._activatedColumnKey();h(t)&&(t=this._primaryActivateColumnKey()||this._firstColumnKey);h(t)||n.activated()===t||n.useDefaultActivation&&!n.useDefaultActivation()||n.activated(t)},v.Name="azc-grid-activateableRow",v})(o.Extension);n.SelectableRowActivateExtension=k})(h||(h={})),h}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SelectableRow",["require","exports","f","i",
"ko","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRowActivate","MsPortalImpl/Base/Base.Selectable2.ClickContext","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.EventTypes"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a){"use strict";var v;return (function(n){var p=i.ViewModels,w=p.Controls.Lists.Grid,t=s.RowSelectionMode,v=i.isNullOrUndefined,y=(function(n){function f(){n.apply(this,arguments);this._lifetime=new r.TriggerableLifetimeManager}return __extends(f,n),f.prototype.beforeDestroy=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null)},f.prototype.getExtension=function(n){var l=this,f=n,r=u.observable(t.Off),i=f&&f.selectableRow,e,o,s,c;if(i){s=i.selectionMode||0;switch(s){case 1:r(t.Single);break
case 2:r(t.MultipleReplace);break;case 3:r(t.MultipleAdd);break;default:r(t.Off)}this._activatedColumnKey=i.activatedColumnKey;this._primaryActivateColumnKey=i.primaryActivateColumnKey;this._activateOnSelected=i.activateOnSelected;e=i.disableRequireSingleModeAssistKey;o=i.enableSelectableCursor||u.observable(!1)}return this._activatedColumnKey||(this._activatedColumnKey=u.observable()),this._primaryActivateColumnKey||(this._primaryActivateColumnKey=u.observable()),this._activateOnSelected||(this._activateOnSelected=u.observable(!1)),f.onRowClicked&&(c=function(n){var t=l._selectable2ClickHandler;if(t)t.onClick({item:n.item,metadata:n})}),this._vivaSelectableRowActivation=new h.SelectableRowActivateExtension({mode:r,disableSelectAll:i.disableSelectAll,activatedColumnKey:this._activatedColumnKey,primaryActivateColumnKey:this._primaryActivateColumnKey,activateOnSelected:this._activateOnSelected,disableRequireSingleModeAssistKey:e,enableSelectableCursor:o,hasNextSelectableItem:u.observable(
!1),hasPreviousSelectableItem:u.observable(!1),activateRow:c})},f.prototype.getActivatedColumnKey=function(){return this._activatedColumnKey.peek()||this._primaryActivateColumnKey.peek()},f.prototype.initializeExtension=function(){var v=this,n=this._widget,u=n.options.extensionsOptions,r=this._lifetime,f,e,o=u.onRowClicked,h,t;o&&(h=this._selectable2ClickHandler=c.getListSelectableWithClickHandler(n.options.selectableData,$(n.element),o),h.activationState.subscribe(r,(function(n){var i=n.previous&&n.previous.metadata&&n.previous.metadata.activated,t,r;i&&i(null);t=n.current&&n.current.metadata;r=t&&t.activated;t&&(!t.useDefaultActivation||t.useDefaultActivation())&&r(v.getActivatedColumnKey())})));t=n._instance.element;t.on(s.EventTypes.RowSelect,f=function(t,r){var o,s,e,f,h;t.stopPropagation();o=u.selectableRow.rowSelect;o&&o(t,r);s=r._reason;(s===4||s===2)&&(n._instance._ariaLive(""),e=r.selected,f="",e?(f=e.ariaLabel&&e.ariaLabel(),f=i.isNullOrWhiteSpace(f)?l.Grid.rowSelected:l.Grid.
rowSelectedTemplate.format(f)):(h=r.unselected[0],f=h.ariaLabel&&h.ariaLabel(),f=i.isNullOrWhiteSpace(f)?l.Grid.rowUnselected:l.Grid.rowUnselectedTemplate.format(f)),n._instance._ariaLive(f))});r.registerForDispose((function(){t.off(s.EventTypes.RowSelect,f)}));t.on(s.EventTypes.RowClick,e=function(t,i){var f=$(t.target),e=i.rowMetadata,r=f.closest("a"),o=r&&$(i.item).find(r).length>0,u;if(!o){var s=n.options.extensionsOptions,h=s.selectableRow,c=h.selectionMode===1;c&&(t.ctrlKey||t.shiftKey)&&(t.stopPropagation(),t.preventDefault(),u=n.options.selectableData,$(t.target).trigger(a.default.fxopeninnewtab,{selectableSet:u,item:e.item}))}});r.registerForDispose((function(){t.off(s.EventTypes.RowClick,e)}))},f.prototype.getName=function(){return"Selectable"},f.prototype.getOrder=function(){return 1},f.prototype.getDependencies=function(){return[new e.FocusableRowExtension]},f.prototype.registerSubscriptionsToConnectMetadataProperties=function(n,t){var r=this,i=n.createChildLifetime();return this.
_widget.options.selectableData.selectableItems.subscribe(i,(function(){r._widget._connectMetadataAndDisposeSubscriptions(i,t)})),i},f.prototype.disallowConnectRowMetadataProperties=function(n,t){var r=-1,u=this._widget.options,i;return(u.selectableData.selectableItems().some((function(n,i){return n.data===t.item?(r=i,!0):!1})),r>=0)?(i=-1,u.items().some((function(t,r){return t===n?(i=r,!0):!1})),i===-1)?!1:r!==i:!0},f.prototype.connectRowMetadataProperties=function(n,t,i){function f(n,t){e._twoWayBinding(o,n,t)}var l=this,e=this._widget,o=e.ltm.createChildLifetime(),s=e.options.selectableData.selectableItems().first((function(t){return t.data===n})),h=t,r=i,c;return r.link&&h.link&&f(r.link,h.link),f(s.isSelected,t.selected),f(t.selected,r.selected),c=u.computed(o,{read:function(){var n=r.activated();return!(n===null||n===undefined)},write:function(n){var t,i;n?r.activated()||(t=l.getActivatedColumnKey(),v(t)&&(i=e.options.columns().first((function(n){return n.activatable&&n.activatable()})),t=v(
i)?null:i.itemKey),v(t)||r.activated(t)):r.activated(null)}}),f(t.activated,r.activated),f(s.isActivated,c),f(t.disabled,r.disabled),f(t.useDefaultActivation,r.useDefaultActivation),o},f})(o.GridExtension);n.SelectableRowExtension=y;f.registerPlugin(w.Extensions.SelectableRow,y)})(v||(v={})),v}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.RightClickableRow",["require","exports","f","o","ko","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Base/Base.EventTypes"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var t=i.disposeDisposable,s=(function(n){function i(t){n.call(this);this._disposables=[];t=this._options=t||{};t.disabled===undefined&&(t.disabled=u.observable(!1))}return __extends(i,n),r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.afterAttachEvents=function(){var i=this._options,t=this._widget,n="rowRightClick";this._disposables.push(t.element.
setEvents([o.default.fxcontextmenurequest+".azcGrid","tbody[class!=azc-grid-empty] tr",function(r){var e;i.disabled()||(e={rowMetadata:u.dataFor(this),clientX:r.clientX,clientY:r.clientY},t.trigger(n,f.cloneEvent(r,n),e,r.target),t.options.events(n,e))}],["keydown.azcGrid",function(i){switch(i.which){case 121:if(i.shiftKey){var r=$(i.target).closest("tr")[0],e=$(r).offset(),o={rowMetadata:u.dataFor(r),clientX:e.left+r.offsetWidth-232,clientY:e.top+10};t.trigger(n,f.cloneEvent(i,n),o,i.target);t.options.events(n,o);i.preventDefault();i.stopPropagation()}}}]))},i.prototype.beforeDestroy=function(){t(this._disposables);this._disposables=[]},i.prototype.getName=function(){return i.Name},i.Name="azc-grid-rightClickableRow",i})(e.Extension);n.RightClickableRowExtension=s})(s||(s={})),s}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.RightClickableRow",["require","exports","f","ko","$","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SelectableRow",
"MsPortalImpl/UI/Commands/UI.Commands.Base","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.RightClickableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","MsPortalImpl/Base/Base.EventTypes"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";var a;return (function(n){var o=i.ViewModels,a=o.Controls,v=a.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){this._rightClickHandler&&(this._widget._instance.element.off("rowRightClick",this._rightClickHandler),this._rightClickHandler=null)},t.prototype.getExtension=function(n){var t=n;return this._commands=t.controlCommands,new h.RightClickableRowExtension},t.prototype.initializeExtension=function(){var n=this;this._widget._instance.element.on("rowRightClick",this._rightClickHandler=function(t,i){return n._triggerRightClickEvent(t,i)})},t.prototype.getName=function(){return"RightClickableRow"},t.prototype.getOrder=
function(){return 1},t.prototype.getDependencies=function(){return[new e.SelectableRowExtension]},t.prototype._triggerRightClickEvent=function(n,t){var f=this._widget.options,e=f.selectableData,i=t.rowMetadata,r;return!!i&&!!i.item?(this._updateSelectionFollowingRightClick(i),i.disabled()||this._widget._extensionTrigger("shouldHideContextMenu",i).some((function(n){return!!n})))?!1:(r=u.Event(l.default.fxrightclick),r.clientX=t.clientX,r.clientY=t.clientY,u(n.target).trigger(r,this._getCommandRightClickEventArgs(e,i.item)),n.preventDefault(),n.stopPropagation(),!0):!1},t.prototype._updateSelectionFollowingRightClick=function(n){var i;if(!n.selected()){var t=this._widget,u=t.options,r=u.selectableData.selectableItems();r.forEach((function(n){n.isSelected(!1)}));i=r.first((function(i){return!t.getRowMetadata(i.data).disabled()&&i.data===n.item}));i&&(i.isSelected(!0),t._instance.getPlugin(c.FocusableRowExtension.Name).focusRowByRowMetadata(n))}},t.prototype._getCommandRightClickEventArgs=function(
n,t){var o=this._widget,y=n.selectableItems().filter((function(n){return n.isSelected()})),l=y.map((function(n){return n.data})),s=l[0],a=o.getRowMetadata(t),h,i,f,v,c,e;return s&&(i=r.unwrap(s.commandGroup),f=r.unwrap(s.commandGroupOwner),v=l.some((function(n){return r.unwrap(n.commandGroup)!==i||r.unwrap(n.commandGroupOwner)!==f})),v&&(i=null,f=null)),h={selectableSet:n,deleteRowCommandTitle:null,markForDelete:null},o._extensionTrigger("enableRowDelete",a).some((function(n){return!!n}))&&o._extensionTrigger("getListDataForRightClick",a).forEach((function(n){u.extend(h,n)})),c={entityType:1,commandGroup:i,commandGroupOwner:f,viewModel:t,listData:h},e=this._commands&&this._commands(),e&&e.length&&u.extend(c,{controlCommands:e}),c},t})(s.GridExtension);n.RightClickableRowExtension=t;f.registerPlugin(v.Extensions.RightClickableRow,t)})(a||(a={})),a}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ContextMenuShortcut.css",["require","exports","module"],(function(n,t,i){"use strict";window.
fx.injectCss(i,".azc-grid-contextMenuShortcut .azc-grid-contextMenuShortcut-col{width:32px}.azc-grid-contextMenuShortcut table tbody tr:not([aria-disabled=true]) td.azc-grid-contextMenuShortcut-cell{padding:0 4px 0 0;text-align:center}.azc-grid-contextMenuShortcut table tbody tr:not([aria-disabled=true]) td.azc-grid-contextMenuShortcut-cell a{width:100%;height:28px;font-size:23px;margin-right:2px;text-decoration:none;line-height:14px}.azc-grid-contextMenuShortcut table tbody .azc-row-disabled .azc-grid-contextMenuShortcut-cell a{display:none}")}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ContextMenuShortcut",["require","exports","o","ko","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ContextMenuShortcut.css"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var a=MsPortalFx,
t=jQuery,s="azc-grid-contextMenuShortcut-cell",h="tbody tr[data-grid-selectable=true]:not([aria-disabled=true]) .azc-grid-contextMenuShortcut-cell a",v='attr: { "data-grid-contextmenushortcut": true }',y="<col class='azc-grid-contextMenuShortcut-col' />",p="<th aria-hidden='true' class='azc-grid-contextMenuShortcut-header'><\/th>",c="<td role='gridcell' class='"+s+" azc-br-muted'><a class='msportalfx-inherit-color fxs-portal-svg' href=\"\" role='button' title='"+u.ContextMenu.ariaLabel+"' aria-label='"+u.ContextMenu.ariaLabel+"' data-bind='attr: { tabindex: focused() ? 0: -1}'>&#8230<\/a><\/td>",l="azcGridContextMenuShortcut",w="click."+l,b="keydown."+l,k=(function(n){function u(t){n.call(this);this._options=t||{}}return __extends(u,n),i.defineProperty(u.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),u.prototype.afterSetTemplates=function(n){var i=n.getHtmlTemplate("bodyRowsCore"),r=n.getHtmlTemplate("header"),u=n.getHtmlTemplate("colgroup"),t=
n.getHtmlTemplate("editableBodyRowsCorePerColumn");i.addAttribute("tr","data-bind",[v]).append("tr",c);r.append("tr",p);u.append("colgroup",y);a.isNullOrUndefined(t)||t.append("tr",c)},u.prototype.afterAttachEvents=function(){var n=this._widget,i=function(i){var f=t(i.target),o=f.offset(),s=f.closest("tr")[0],h={rowMetadata:r.dataFor(s),clientX:o.left,clientY:o.top},u="rowContextMenuShortcutClick";n.trigger(u,e.cloneEvent(i,u),h,s);n.options.events(u,h);i.preventDefault()},u=function(n){(n.which===32||n.which===13)&&(i(n),n.stopPropagation(),n.preventDefault())};this._widget.ltm.registerForDispose([this._widget.element.setEvents([w,h,i],[b,h,u])])},u.prototype.getOrder=function(){return 40},u.prototype.getDependencies=function(){return[new f.SelectableRowExtension]},u.prototype.beforeDestroy=function(){this._detachEvents&&this._detachEvents()},u.prototype.getName=function(){return u.Name},u.prototype.shouldNotChangeSelection=function(n,i){var r=t(i.target),u=r.closest("tr").attr("aria-selected")===
"true",f=!!r.closest("."+s).length;return u&&f?!0:!1},u.prototype.getAdditionalColumns=function(){return 1},u.Name="azc-grid-contextMenuShortcut",u})(o.Extension);n.ContextMenuShortcutExtension=k})(s||(s={})),s}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ContextMenuShortcut",["require","exports","f","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.RightClickableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ContextMenuShortcut"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var o=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){this._onClick&&(this._widget._instance.element.off("rowContextMenuShortcutClick",this._onClick),this._onClick=null)},t.prototype.getExtension=function(){return new e.ContextMenuShortcutExtension},t.prototype.initializeExtension=
function(){var n=this;this._widget._instance.element.on("rowContextMenuShortcutClick",this._onClick=function(t,i){var r=n._widget.getPlugin("RightClickableRow");return r?r._triggerRightClickEvent(t,i):!1})},t.prototype.getName=function(){return"ContextMenuShortcut"},t.prototype.getOrder=function(){return 1},t.prototype.getDependencies=function(){return[new u.RightClickableRowExtension]},t})(f.GridExtension);n.ContextMenuShortcutExtension=t;r.registerPlugin(o.Extensions.ContextMenuShortcut,t)})(o||(o={})),o}));define("MsPortalImpl/Controls/Helpers/Validation",["require","exports","i","Viva.Controls/Controls/Base/Viva.Validators"],(function(n,t,i,r){"use strict";var u;return (function(n){function u(n,i){var u,f;switch(i.type){case 0:u=new r.Invalid(n,i);break;case 2:u=new r.Match(n,i);break;case 3:u=new r.NotMatch(n,i);break;case 4:u=new r.Contains(n,i);break;case 5:u=new r.NotContains(n,i);break;case 6:u=new r.ContainsCharacters(n,i);break;case 7:u=new r.NotContainsCharacters(n,i);break;case
8:u=new r.HasDigit(n,i);break;case 9:u=new r.HasLetter(n,i);break;case 10:u=new r.HasUpperCaseLetter(n,i);break;case 11:u=new r.HasLowerCaseLetter(n,i);break;case 12:u=new r.HasPunctuation(n,i);break;case 13:u=new r.Equals(n,i);break;case 22:u=new r.CaseInsensitiveComparison(n,i);break;case 23:u=new r.LocaleAwareCaseInsensitiveComparison(n,i);break;case 14:u=new r.LengthRange(n,i);break;case 15:u=new r.MinLength(n,i);break;case 16:u=new r.MaxLength(n,i);break;case 1:u=new r.Required(n,i);break;case 17:u=new r.Numeric(n,i);break;case 18:u=new r.ValueRange(n,i);break;case 19:u=new r.MinValue(n,i);break;case 20:u=new r.MaxValue(n,i);break;case 21:f=t.getMetadataId(i);u=new r.CustomAsyncValidator(n,i,f);break;case 24:u=new r.Uri(n,i)}return u&&i.isEmptyValid&&(u.isEmptyValid=i.isEmptyValid),u}function f(n,t){for(var i,r=n.validators(),u=0;u<t.length;u++)for(i=0;i<r.length;i++)if(t[u]===r[i].fxViewModel){r.splice(i,1);break}n.validators(r)}var t=i.Po;n.convertValidation=u;n.removeValidations=
f})(u||(u={})),u}));define("_generated/Less/MsPortalImpl.Controls/Fields/Fields.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".fxs-bladestyle-context .azc-form-labelcontainer,.fxs-hubPane .azc-form-labelcontainer{color:#fff}.azc-checkBoxField.azc-checkBoxField-inlineLabel div.azc-checkBox{display:inline-block;width:auto}.azc-checkBoxField-inlineLabel .azc-form-labelcontainer{display:none}.azc-checkBoxField-inlineLabel .azc-text-label{margin-left:6px}.azc-checkBoxField-inlineLabel label{line-height:16px;max-width:100%}.azc-checkBoxField-inlineLabelContainer{display:inline-block;max-width:calc(100% - 17px - 6px)}.fxc-CheckBoxField .azc-formElementSubLabelContainer{min-height:17px}.fxc-hide-check .azc-validatableControl-valid-validated div.azc-dockedballoon-anchor{display:none}")}));define("MsPortalImpl.Controls/Fields/Base/Field",["require","exports","f","o","ko","MsPortalImpl.Controls/Fields/Base/FormValidation","MsPortalImpl.Controls/Fields/Base/LabelAndBalloonWidget",
"MsPortalImpl.Controls/Controls/Base/Loadable","Viva.Controls/Controls/Base/Viva.Validators","MsPortalImpl/Base/Telemetry","MsPortalImpl/Controls/Helpers/Validation","_generated/Less/MsPortalImpl.Controls/Fields/Fields.css"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){var b=i.Base,k=b.Diagnostics.Telemetry,d=e.LabelAndBalloonWidgetHelper,g="azc-input",a="msportalfx-form-formelement",v="msportalfx-form-formelement-disabled",nt="azc-formElementSubLabelContainer",tt="azc-formElementContainer",s="fxc-hide-check",y="aria-label",l="aria-labelledby",t="aria-describedby",p="focusin.focusTelemetry",w="focusout.focusTelemetry",it=(function(n){function e(t,i,r){var u=this;n.call(this,t,i,r);this.options._msPortalFxClearValidation((function(){return u._clearValidation()}));this.options._msPortalFxTriggerValidation((function(){return u.triggerValidation()}));this.valid=this.options.valid;this._initializeWidgets();this._attachTelemetryEvents()}return __extends(e,n),e.prototype._initializeField=
function(){var n=this;this.element.addClass(a);this.options.disabled.subscribeAndRun(this.ltm,(function(t){n.element.toggleClass(v,t)}));this._widgetInstances=[];this._createContent()},e.prototype._initializeWidgets=function(){var n=this;this._labelHelper=new d(this.ltm,this.options);this._required=this._labelHelper.required;this._initializeField();u.isObservable(this.options.hideValidationCheck)?this.options.hideValidationCheck.subscribeAndRun(this.ltm,(function(t){n.element.toggleClass(s,t)})):this.element.toggleClass(s,this.options.hideValidationCheck);this._createLabelAndSubLabel();f.markFormFieldElement(this.element[0],this.options,this.validatableViewModel,this)},e.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._widgetInstances=null,this.element.removeClass(a),this.element.removeClass(v),this.element.removeClass(s),this._container&&this._container.remove(),this._disposeOfTelementryEvents(),n.prototype.dispose.call(this))},r.defineProperty(
e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(e.prototype,"validatableViewModel",{get:function(){return this._widgets[0].validatableViewModel},enumerable:!0,configurable:!0}),r.defineProperty(e.prototype,"validatableWidget",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.getPerformValidationFromViewModel=function(){return this.options.performValidation()===null||this.options.performValidation()},e.prototype.addValidations=function(){var n=this;u.unwrap(this.options.validations).forEach((function(t){var i=c.convertValidation(n.ltm,t);i&&n.validatableViewModel.validators.push(i)}))},e.prototype.removeValidations=function(n){c.removeValidations(this.validatableViewModel,n)},e.prototype.linkValidatableControlViewModels=function(){var f=this,t=this.ltm,n=this.validatableViewModel,i=this.options,r;this.linkFieldViewModels();n.valid.subscribe(t,(function(t){n.validators().some((function(n){return!n.valid()}));i.
valid(t)}));this.addValidations();u.isObservable(i.validations)&&i.validations.subscribeArrayEdits(t,(function(i){var r=[],u=[];i.forEach((function(n){if(n.status==="added"){var i=c.convertValidation(t,n.value);i&&u.push(i)}else n.status==="deleted"&&r.push(n.value)}));n.validators(n.validators().concat(u));r.length&&f.removeValidations(r)}));n.enableValidation=i.enableValidation;n.enableValidation.subscribe(t,(function(t){t||n.validators().forEach((function(n){n.validationState(0)}))}));r=i.validationResults;n.validationResults.subscribe(t,(function(n){r(n)}))},e.prototype.validateField=function(n){this.getPerformValidationFromViewModel()&&(this.validatableViewModel.enableValidation()?this.validatableWidget.validate(n):(this.validatableViewModel.enableValidation(!0),this.validatableWidget.validate(!0)))},e.prototype.setupValidationBindings=function(){var n=this;this.options.validate.subscribe(this.ltm,(function(){n.validateField(!0)}));this.options.ensureValidation.subscribe(this.ltm,(function(){n.
validateField()}));this.options.performValidation.subscribeAndRun(this.ltm,(function(t){n.options.performValidation()!==null&&(n.validatableViewModel.enableValidation(t),t&&n.validatableWidget&&n.validatableWidget.validate(!0))}))},e.prototype.linkFieldViewModels=function(){var n=this;this.options.enabled.subscribeAndRun(this.ltm,(function(t){n.validatableViewModel.disabled(!t)}));this.validatableViewModel.loading=this.options.loading;this.validatableViewModel.dirty=this.options.dirty},e.prototype.appendControl=function(n){return this._container.append(n),this},e.prototype.triggerValidation=function(){var r,n,t,f;if(!this.$disabled()&&(r=this.validatableViewModel,n=r&&u.unwrap(r.validators),n&&n.length)){this.validateField(!0);var s=n.some((function(n){return n.validationState()===1})),e=Q(!s),o=n.filter((function(n){return n.validationState()===3}));return o.length?(t=this.ltm.createChildLifetime(),f=o.map((function(n){var r=Q.defer(),u=t.createChildLifetime();return n.validationState.subscribe(
u,(function(n){(n===1||n===2)&&(r.resolve(n===2),u.dispose())})),u.registerForDispose((function(){Q.isPending(r.promise)&&r.reject(i.Errors.disposedCanceledError)})),r.promise})),f.push(e),Q.all(f).then((function(n){return n.every(i.identity)})).finally((function(){t&&!t.isDisposed()&&t.dispose()}))):e}return Q(!0)},e.prototype._getLabelId=function(){return this._labelHelper.labelId},e.prototype._getBalloonId=function(){return this._labelHelper.balloonId},e.prototype._getBalloonTextElemId=function(){return this._labelHelper.balloonTextElemId},e.prototype._addWidget=function(n){n&&this._widgetInstances.push(n)},e.prototype._createContent=function(){this._createControlsContainer()},e.prototype._createControlsContainer=function(){this._container=$("<div/>").addClass(tt);this._labelHelper.appendWidgetToDom(this.element,this._container);this._container.toggleClass(nt,!this.options.subLabel)},e.prototype._createLabelAndSubLabel=function(){this._attachLabelAndSubLabel()},e.prototype._attachLabelAndSubLabel=
function(n){var a=this,f,e,s,h,c;n===void 0&&(n={});f=this._labelHelper;e=this.options;f.labelId=f.labelId||"azc-form-guid-"+i.getUniqueId();n.inhibitLabel||f.insertLabelBefore(n.insertLabelBefore||this._container,n);!n.emptyLabel&&e.showValidationMessagesBelowControl&&f.insertValidationMessageBelowControlAfter(this._container,this,e.validationResults);n.inhibitSubLabel||f.insertSubLabelAfter(n.insertSubLabelAfter||this._container);var r=this.element.findByClassName(n.controlClassName||g),o=n.toAriaLabel||r,v=o.attr(l)||"",p=n.ariaLabel||u.observable();u.computed(this.ltm,[e.label,p],(function(n,t){if(t=(t||"").trim(),o.removeAttr(l).removeAttr(y),t)o.attr(y,t);else{n=(n||"").trim();var i=(v+" "+(n?f.labelId||"":"")).trim();i&&o.attr(l,i)}}));s=i.getUniqueId();h=f.labelId+"-err";o.each((function(n,i){var r=$(i).attr(t)||"";u.computed(a.ltm,[e.infoBalloonContent,e.infoBalloonLinkContent],(function(n,u){var o=[e.showValidationMessagesBelowControl?h:s],c;r&&o.push(r);n=(n||"").trim();(n||u)&&
o.push(f.balloonTextElemId);c=o.join(" ").trim();c?$(i).attr(t,c):$(i).removeAttr(t)}))}));r.attr("id")||r.attr("id",f.labelId+"-for");this._required&&this._required.subscribeAndRun(this.ltm,(function(n){r.attr("aria-required",n?n:null)}));this.options.valid&&this.options.valid.subscribeAndRun(this.ltm,(function(n){return r.attr("aria-invalid",!n)}));this.options.valid&&!e.showValidationMessagesBelowControl&&r.length>0?(c=$("<div aria-live='polite' aria-atomic='true' class='fxs-hide-accessible-label' id='"+s+"'><\/div>"),$(r[0]).parent().append(c),r!==o&&r.attr(t,((r.attr(t)||"")+" "+s).trim()),this.validatableViewModel&&this.validatableViewModel.validationResults.subscribeAndRun(this.ltm,(function(n){var t=n.filter((function(n){return n.state!==0&&!n.valid})).map((function(n){return n.message})).join(" ").trim();c.text(t);o.attr("aria-errormessage",t||null);o!==r&&r.attr("aria-errormessage",t||null)}))):e.showValidationMessagesBelowControl&&r!==o&&r.each((function(n,i){var r=$(i);r.attr(t,[r.attr(
t)||"",h].join(" ").trim())}))},e.prototype._clearValidation=function(){return this.validatableViewModel&&this.validatableViewModel.validators().forEach((function(n){n.validationState(0)})),Q()},e.prototype._attachTelemetryEvents=function(){var n=this;if(this.options.telemetryKeys&&this.options.telemetryKeys.focus)this.element.on(p+" "+w,(function(t){n.element.has(t.relatedTarget).length||k.trace({source:h.Source.FormControl,action:h.Action.FormFocused,actionModifier:n.options.telemetryKeys.focus})}))},e.prototype._disposeOfTelementryEvents=function(){this.element.off(p+" "+w)},e})(o.Widget);n.FieldWidget=it})(l||(l={})),l}));define("MsPortalImpl.Controls/Fields/TextField",["require","exports","f","o","ko","MsPortalImpl.Controls/Fields/Base/Field","Viva.Controls/Controls/Forms/Viva.TextBox","Viva.Controls/Controls/Base/ValidationPlacements/Viva.Css","Viva.Controls/Controls/Base/ValidationPlacements/Viva.DockedBalloon","MsPortalImpl.Controls/Controls/Lists/Base/Controls.Lists.ActionHandler"],(function(
n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){var l=jQuery,t="azc-textField",c="fxc-TextField",a=(function(n){function f(t,i,r){n.call(this,t,i,r)}return __extends(f,n),f.prototype._initializeField=function(){n.prototype._initializeField.call(this);this.element.addClass(t).addClass(c);this.textFieldInit()},f.prototype._createLabelAndSubLabel=function(){this._attachLabelAndSubLabel({ariaLabel:this._options.ariaLabel})},f.prototype.dispose=function(){this._textBoxWidget&&(this._textBoxWidget.dispose(),this._textBoxWidget=null,this._textBoxViewModel=null);this._cleanElement(t,c);n.prototype.dispose.call(this)},r.defineProperty(f.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(f.prototype,"validatableViewModel",{get:function(){return this._textBoxViewModel},enumerable:!0,configurable:!0}),r.defineProperty(f.prototype,"validatableWidget",{get:function(){return this._textBoxWidget},enumerable:!0,configurable:!0}),f.prototype.
textFieldInit=function(){var n=this,t=this._textBoxViewModel=new e.ViewModel(this.vmBasicOption),c=t.lifetimeManager,r,f;t.events={};t.validationPlacements.push(new o.Css(c));t.validationPlacements.push(new s.DockedBalloon(c,s.DockedBalloon.defaultOptions));this.options.actionHandler&&(r=this.ltm,this._actionHandler=h.getOrCreateActionHandler(u.unwrap(this.options.actionHandler)),u.isObservable(this.options.actionHandler)&&this.options.actionHandler.subscribe(r,(function(t){n._actionHandler=h.getOrCreateActionHandler(t)})),this._textBoxViewModel.events.enterPressed=function(){var t=n._actionHandler();t&&u.unwrap(n.options.actionsEnabled)&&t.activateFirstItem()},this._textBoxViewModel.events.downPressed=function(){var t=n._actionHandler();t&&u.unwrap(n.options.actionsEnabled)&&t.focusFirstItem()},this._textBoxViewModel.events.focus=function(){var t=n._actionHandler();t&&u.unwrap(n.options.actionsEnabled)&&t.pseudoFocusFirstItem()},this._textBoxViewModel.events.blur=function(){var t=n._actionHandler(
);t&&t.pseudoBlurFirstItem()},this._actionHandler.subscribe(r,(function(n){n&&t.focused()&&n.pseudoFocusFirstItem()})));f=l("<div />");this.appendControl(f);this.linkTextBoxViewModels();this._addWidget(this._textBoxWidget=new e.Widget(f,this._textBoxViewModel));this.setupValidationBindings();this.options.value.subscribeAndRun(this.ltm,(function(t){n.element.findByClassName("azc-input").toggleClass("fxc-inputhasvalue",!!t)}));this.options.showValidationsAsPopup&&i.require("MsPortalImpl/Controls/Helpers/ValidationPopup").then((function(t){n._popupWidget=new t.Widget(n.ltm,{targetElement:n.element.find(".azc-inputbox-wrapper"),widget:n,validationResults:n._textBoxViewModel.validationResults})}))},f.prototype.linkTextBoxViewModels=function(){var n=this;this._textBoxViewModel.value=this.options._msPortalFxWidgetValue;this._textBoxViewModel.placeholder(this.options.emptyValueText());this.options.emptyValueText.subscribe(this.ltm,(function(t){n._textBoxViewModel.placeholder(t)}));this._textBoxViewModel.
valueUpdateTrigger=this.options.valueUpdateTrigger;this._textBoxViewModel.readonly=u.utils.wrap(this.options.readonly);this._textBoxViewModel.spellcheck=u.utils.wrap(this.options.spellcheck);this._textBoxViewModel.onEnterPressed=function(t){n.options.onEnterPressed&&n.options.onEnterPressed(t)};this.linkValidatableControlViewModels()},f})(f.FieldWidget);n.Widget=a})(c||(c={})),c}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.EditableRow",["require","exports","f","a","ko","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRow","MsPortalImpl.Controls/Fields/Base/FormValidation","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.EditableRow","MsPortalImpl.Controls/Fields/TextField"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function r(n,t){return t=u.unwrap(t),c(t)||n.length<t}function p(n){switch(n){case t.Created:return 1;case t.
Deleted:return 3;case t.Updated:return 2;case t.None:default:return 0}}function w(n,t){return n===t||n&&t&&n[l]&&n[l]===t[l]}var b=i.Base,k=b.Diagnostics,t=i.Data.EditState,d=i.ViewModels,a=d.Controls.Lists.Grid,g=a.Format,nt=a.HtmlBindingsType,c=i.isNullOrUndefined,tt=new k.Log("ImplGrid.EditableRowExtension"),y=h.EditableRowExtension.Name,l,v;n.getVivaEditableRowState=p;l="__gridGuid";v=(function(n){function i(){n.apply(this,arguments);this._creatingEmptyRow=!1}return __extends(i,n),i.prototype.beforeDestroy=function(){var n=this._detach;n&&n()},i.prototype.getExtension=function(n){var i=n,t=i.editableRow||{},r={placement:t.placement,allowEditExistingItems:!!t.allowEditExistingItems,allowEditCreatedItems:!!t.allowEditCreatedItems,newRowAriaLabel:t.newRowAriaLabel};return this._editableExtn=new h.EditableRowExtension(r)},i.prototype.initializeExtension=function(){var f=this,e=this._widget,s=e.ltm,n=e.options,h=e._instance,t=h.getPlugin(y),k=n.extensionsOptions,l=k.editableRow,o=l.maxBufferedRows,
i=t.createdItems,a=this._ensureValidation.bind(this),p={rowAdd:function(i,r){r.preventExitEditing();a(r.targets,t,(function(){n.rowAdd&&n.rowAdd(i,r);r.editableRow.rowMetadata.editing(!1)}))},rowEdit:function(u,e){var h=e.editableRow,s=h.rowMetadata,c,v;s.emptyRow(!1);h.existingItem||(c=n.createdItems().some((function(n){return w(n,s.item)})),c||l.addCreated(s.item));a(null,t);v=l.placement||0;v===0&&r(i(),o)&&f._ensureNewRow(t)}},b=h.element,v;b.on(p);this._detach=function(){f._detach=null;b.off(p)};v=l.validate;v&&v.subscribe(s,(function(){a(e.element,t)}));u.utils.arrayPushAll(i,n.createdItems());n.addEmptyRow.subscribeAndRun(s,(function(n){if(n&&r(i(),o)){var t=h.getRowMetadata(n);t.editing(!0);t.emptyRow(!0);i.push(n)}}));n.createdItems.subscribeArrayEdits(s,(function(n){if(n=u.utils.adjustArrayEdits(n),n.length){var s=i(),l=!1;i.valueWillMutate();n.forEach((function(n){var i=!c(n.moved),r,u,t;n.status==="added"?(r=s.some((function(t){return w(t,n.value)})),(i||!r)&&s.splice(n.index,0,n.value)):
n.status==="deleted"&&(u=s.splice(n.index,1)[0],i||(l=!0,t=h.getRowMetadata(u),t.editing(!1),t.editState(0)))}));i.valueHasMutated();l&&(r(s,o)&&f._ensureNewRow(t),f._ensureValidation(e.element,t))}}));u.isObservable(o)&&o.subscribe(s,(function(n){return f._onMaxBufRowsChange(n)}))},i.prototype.getName=function(){return"EditableRow"},i.prototype.getOrder=function(){return 1},i.prototype.getDependencies=function(){return[new e.FocusableRowExtension]},i.prototype.columnAdded=function(n,t,i){var r=this._widget,u,f=t.editableFormat;u=c(f)?r._getFormatter(g.HtmlBindings,{htmlBindingsType:nt.TextBox}):r._getFormatter(f,t.editableFormatOptions||{});i.editableFormatter=u},i.prototype.columnRemoved=function(){},i.prototype.connectRowMetadataProperties=function(n,i,r){var f=this,e=this._widget.ltm.createChildLifetime();return u.computed(e,(function(){var n=r.editState();u.ignoreDependencies((function(){var r=p(n);i.editState(r);i.editing()||i.editing(n===t.Created||n===t.Updated);r===3&&f._ensureValidation(
f._widget.element,f._widget._instance.getPlugin(h.EditableRowExtension.Name))}))})),e},i.prototype.getAdditionalItems=function(){return this._editableExtn.createdItems()},i.prototype.registerSubscriptionsToConnectMetadataProperties=function(n,t){var r=this,i=n.createChildLifetime();return this._editableExtn.createdItems.subscribe(i,(function(){r._widget._connectMetadataAndDisposeSubscriptions(i,t)})),i},i.prototype.enableRowDelete=function(){var n=this._widget.options.extensionsOptions;return n.editableRow.enableRowDelete!==!1},i.prototype.shouldHideContextMenu=function(n){return n.item===this._getEmptyRowItem()},i.prototype.getListDataForRightClick=function(){var n={},i=this._widget.options.extensionsOptions,t=i.editableRow;return n.deleteRowCommandTitle=t.deleteRowCommandTitle,n.markForDelete=function(n){t.markForDelete(n)},n},i.prototype._ensureValidation=function(n,i,u){var e=this,f=this._widget.options.extensionsOptions;n&&(o.gatherFormFields(n).forEach((function(n){var i=n.viewmodel,r=
i.rowMetadata;r.editState&&r.editState()!==t.None&&i.performValidation()!==null&&i.performValidation(!0)})),u&&o.ensureFormFieldValidation(n,!1).then((function(n){if(n){u();var t=f.editableRow;t.placement===1&&r(i.createdItems(),t.maxBufferedRows)&&e._ensureNewRow(i)}})));o.ensureFormFieldValidation(this._widget.element,!1).then((function(n){var t=f.editableRow;t.valid&&t.valid(n)}))},i.prototype._getEmptyRowItem=function(){var n=this;return this._editableExtn.createdItems().first((function(i){return n._widget.getRowMetadata(i).editState()===t.None}))},i.prototype._ensureNewRow=function(n){var i=this,t;if(!this._creatingEmptyRow){if(t=this._widget.options.extensionsOptions,t.editableRow.enableRowAdd===!1)return;this._emptyNewRowExists(n)||(this._creatingEmptyRow=!0,t.editableRow.create().finally((function(){i._creatingEmptyRow=!1})))}},i.prototype._emptyNewRowExists=function(n){var t=this;return n.createdItems().some((function(n){var i=t._widget._instance.getRowMetadata(n);return i.emptyRow()}))}
,i.prototype._onMaxBufRowsChange=function(n){var e=this._widget,t=e._instance.getPlugin(y),i=t.createdItems(),u=i.length,f=this._emptyNewRowExists(t);!f&&r(i,n)?this._ensureNewRow(t):f&&!c(n)&&u>n&&t.createdItems.splice(u-1,1)},i})(s.GridExtension);n.EditableRowExtension=v;f.registerPlugin(a.Extensions.EditableRow,v)})(c||(c={})),c}));define("_generated/Less/Viva.Controls/Controls/Forms/Viva.SearchBox.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-searchBox{position:relative;display:inline-block;font-size:12px;padding-right:30px;height:23px}.azc-searchBox-button-state-hidden .azc-button,.azc-searchBox-state-hidden{display:none}.azc-searchBox ::-ms-clear{display:none}.azc-searchBox .azc-button{height:23px;width:23px;min-width:23px;font-size:16px;line-height:normal;vertical-align:top;margin-left:0;padding:0;border:none;top:0;position:absolute}.azc-searchBox-button-state-hidden{padding-right:0}.azc-searchBox-button-icon{position:absolute;top:-1px;left:6px}.azc-searchBox-wrapper{width:100%;height:100%;position:relative;float:left;padding:0}.azc-searchBox-input{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.azc-searchBox-input .azc-textBox-wrapper{padding-right:0;width:100%}.azc-searchBox-input .azc-textBox-wrapper input{display:inline-block;padding-right:0}.azc-searchBox-search-icon{position:absolute;width:14px;height:14px;top:4px;left:6px;pointer-events:none;display:none}.azc-searchBox-search-icon-visible .azc-searchBox-search-icon{display:block}.azc-searchBox-search-icon-visible .azc-textBox-wrapper input{padding-left:24px}")})
);define("Viva.Controls/Controls/Forms/Viva.SearchBox",["require","exports","o","ko","$","Viva.Controls/Controls/Base/Viva.ValueUpdateTrigger","Viva.Controls/Controls/Forms/Viva.TextBox","Viva.Controls/Controls/Forms/Viva.Button","Viva.Controls/Controls/Base/Viva.ValidatableControl","MsPortalImpl/Base/Base.KeyboardHelper","MsPortalImpl/Svg/Startup/Search.svg","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","MsPortalImpl/Base/Base.SvgHelper","_generated/Less/Viva.Controls/Controls/Forms/Viva.SearchBox.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a){"use strict";var v;return (function(n){var v=jQuery,t="azc-searchBox",b="azc-searchBox-state-hover",y="azc-searchBox-state-hidden",p="azc-searchBox-button-state-hidden",k="__azc-searchBox",d="<div class='azc-searchBox-wrapper' data-bind='css: { \"azc-searchBox-search-icon-visible\": data.searchIconVisible }'><div class='azc-searchBox-search-icon fxs-portal-svg-secondary msportalfx-svg-flip-horizontal' aria-hidden='true'>"+a.getSvgReferenceOrFallBackToData(
c,{palette:99})+"<\/div><div class='azc-searchBox-input' data-bind='azcTextBox: $ctl._textBoxViewModel'><\/div><\/div><button data-bind='azcButton: $ctl._buttonViewModel'><div class='azc-searchBox-button-icon'>&times;<\/div><\/button>",g=0,w=(function(n){function t(){n.apply(this,arguments);this.queryString=r.observable("");this.visible=r.observable(!0);this.closeButtonVisible=r.observable(!0);this.searchIconVisible=r.observable(!0);this.placeholder=r.observable("Search...")}return __extends(t,n),t})(s.ViewModel),u;n.ViewModel=w;u=(function(n){function u(i,r,u){var s=this;u=u||{};u.viewModelType=u.viewModelType||w;n.call(this,i,r,u);this.element.addClass(t).html(d);this._name=this.options.name||k+g++;this._button=this.element.find("button");this._input=this.element.find(".azc-searchBox-input");this.options.keyDownEvent=this.options.keyDownEvent||v.noop;this._textBoxViewModel=new e.ViewModel(this.vmBasicOption);this._textBoxViewModel.value=this.options.queryString;this._textBoxViewModel.valueUpdateTrigger=
f.ValueUpdateTrigger.Input;this._textBoxViewModel.placeholder=this.options.placeholder;this._buttonViewModel=new o.ViewModel(this.vmBasicOption);this._buttonViewModel.isDefault(!0);this._buttonViewModel.visible=this.options.closeButtonVisible;this._attachEvents();this._initializeComputeds();this._bindDescendants();this._afterCreate();this.options.placeholder&&this.options.placeholder.subscribeAndRun(this.ltm,(function(n){n&&s._input.find(".azc-input").attr("aria-label",n)}));this.options.ariaControls&&this._input.find(".azc-input").attr("aria-controls",this.options.ariaControls)}return __extends(u,n),u.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._detachEvents(),this._cleanElement(t,b,y,p),n.prototype.dispose.call(this))},i.defineProperty(u.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),u.prototype._getElementToFocus=function(){var n=this.element.find("input");return n.length?n[0]:null},u.prototype.
_initializeComputeds=function(){var n=this,t=this.ltm;r.computed(t,(function(){var t=n.$disabled();n._buttonViewModel.disabled(t);n._textBoxViewModel.disabled(t);n._textBoxViewModel.dirty(n.options.dirty())}));r.computed(t,(function(){n.element.toggleClass(y,!n.options.visible())}));r.computed(t,(function(){n.element.toggleClass(p,!n.options.closeButtonVisible())}))},u.prototype._attachEvents=function(){var n=this;this._detachEvents();this._buttonClickHandler=function(){n.options.queryString("");n.options.visible(!1)};this._inputKeyDownHandler=function(t){v.contains(n._input[0],document.activeElement)&&(h.getModifierKeys(t)===0&&t.which===27&&(n.options.queryString(""),t.preventDefault()),n.options.keyDownEvent(t))};this._button.on("click."+t,this._buttonClickHandler);this.element.on("keydown.azcSearchBox",this._inputKeyDownHandler)},u.prototype._detachEvents=function(){this._buttonClickHandler&&(this._button.off("click."+t,this._buttonClickHandler),this._buttonClickHandler=null);this._inputKeyDownHandler&&
(this.element.off("keydown.azcSearchBox",this._inputKeyDownHandler),this._inputKeyDownHandler=null)},u})(s.Widget);n.Widget=u;r.bindingHandlers.azcSearchBox=l.getBindingHandler(u)})(v||(v={})),v}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Filterable.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-filterable.azc-grid.azc-grid-headerHidden:not(.azc-grid-groupable) .azc-grid-filterable-searchBox{margin-bottom:14px}.azc-grid-filterable.azc-grid.azc-grid-filterable-active .azc-grid-reorderRow-cell div{visibility:hidden}.azc-grid-filterable.azc-grid .azc-grid-filterable-searchBox{display:block}.azc-grid-filterable.azc-grid .azc-grid-filterable-searchBox.azc-searchBox-state-hidden{display:none}.azc-grid-filterable.azc-grid .azc-grid-filterable-match{font-style:normal}")}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable",["require","exports","f","o","ko","$","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow",
"Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.KeyboardHelper","Viva.Controls/Controls/Forms/Viva.SearchBox","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Filterable.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";var a;return (function(n){var a=window,p=" ",v="azc-grid-filterable-active",t="azc-grid-filterable",w="<div class='azc-grid-filterable-searchBox' data-bind='azcSearchBox: $ctl.getPlugin(\""+t+"\")._searchBoxVM'><\/div>"+("<div aria-live='polite' aria-atomic='true' class='fxs-hide-accessible-label' data-bind='text: $ctl.getPlugin(\""+t+"\")._ariaLive'><\/div>"),y="###EXISTING_TEMPLATE_BODY_CORE###",b='<!-- ko ifnot: $ctl.getPlugin("'+t+'").options.serverFilter() -->'+('<!-- ko if: $ctl.getPlugin("'+t+'").filterActive() -->')+('<!-- ko if: $ctl.getPlugin("'+t+'").results().length -->')+"<tbody class='azc-grid-groupdata' role='rowgroup'>"+
("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+t+'").results() } --><!-- /ko -->')+"<\/tbody><!-- /ko -->"+('<!-- ko ifnot: $ctl.getPlugin("'+t+'").results().length -->')+"<!-- ko if: data.items().length --><tbody role='rowgroup' class='azc-grid-empty' data-bind='if: data.noRowsMessage'><tr role='row'><td role='gridcell' class='azc-br-muted' data-bind='attr: { colspan: $ctl._getTotalColumns() }, html: data.noRowsMessage'><\/td><\/tr><\/tbody><!-- /ko --><!-- /ko --><!-- /ko --><!-- /ko -->"+('<!-- ko if: $ctl.getPlugin("'+t+'").options.serverFilter() || !$ctl.getPlugin("'+t+'").filterActive() -->')+y+"<!-- /ko -->",k="(['|\"]?)([\"|']?trustedHtml[\"|']?:)(.*),",d="$1$2 "+('$ctl.getPlugin("'+t+'").filterActive() ')+('? $ctl.getPlugin("'+t+'")._filterableCellFormat($parentContext.$parentContext.$index, $index, $parent, $data) ')+": $3,",g='<em class="azc-grid-filterable-match fxs-highlight">$&<\/em>',nt=(function(n){function s(t){n.call(this);this._options=f.extend(this.
_getDefaultFilterableOptions(),t);this._results=u.observableArray();this._filterActive=u.observable(!1);this._displayedCols=[];this._colMap={};this._colNumMap={};this._resultTokenMap={};this._ariaLive=u.observable("")}return __extends(s,n),r.defineProperty(s.prototype,"filterActive",{get:function(){return this._filterActive},enumerable:!0,configurable:!0}),r.defineProperty(s.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(s.prototype,"results",{get:function(){return this._results},enumerable:!0,configurable:!0}),s.prototype.afterSetTemplates=function(n){var u=n.getHtmlTemplate("table"),f=n.getTemplate("bodyCore"),e=b.replace(y,f),t=n.getTemplate("bodyCellContent"),i=new RegExp(k),r=t;t.match(i)&&(r=t.replace(i,d));u.prepend(".azc-grid-container",w);n.setTemplate({bodyCore:e,bodyCellContent:r})},s.prototype.afterCreate=function(){var n=this,t=this._widget,i=this.ltm;[function(){n._searchBoxVM.visible(n._options.searchBoxVisible(
))},function(){var t=f.trim(n._searchBoxVM.queryString());n._queryTimeout&&a.clearTimeout(n._queryTimeout);n._queryTimeout=a.setTimeout((function(){n._queryTimeout=null;n._resetResults();n._filterHandler(t)}),n.options.valueUpdateDelayTimeout())},function(){var i=t.options.columns();n._colMap={};n._colNumMap={};i.forEach((function(t,i){n._colMap[t.itemKey]=t;n._colNumMap[t.itemKey]=i;n._displayedCols.push(t.itemKey)}))},function(){t.element.toggleClass(v,n._filterActive())},function(){t.options.items();n._filterActive.peek()&&n._results(n._getResultItems(n._parseQueryString(n._searchBoxVM.queryString.peek())))}].forEach((function(r){u.computed(i,r,n,{disposeWhenNodeIsRemoved:t.element[0]})}));this.options.serverFilter.subscribe(i,(function(){n._resetAndFilterResults(f.trim(n._searchBoxVM.queryString()))}))},s.prototype.beforeCreate=function(){var n=this;this._searchBoxVM=new l.ViewModel(this.vmBasicOption);this._searchBoxVM.queryString=this.options.queryString;this._searchBoxVM.closeButtonVisible=
this.options.searchBoxCloseButtonVisible;this._searchBoxVM.placeholder=this.options.searchBoxPlaceholder;this._searchBoxVM.ariaControls=this._widget.id;this._searchBoxVM.keyDownEvent=function(t){var r=n._widget.getPlugin(e.FocusableRowExtension.Name),i=c.getModifierKeys(t);r&&t.which===9&&(i===0||i===4)&&r._focus(t);i===0&&t.which===13&&n._resetAndFilterResults(f.trim(n._searchBoxVM.queryString()))}},s.prototype.beforeDestroy=function(){this._widget.element.removeClass(v)},s.prototype.getDefaultRowMetadataProperties=function(){return{}},s.prototype.getName=function(){return s.Name},s.prototype.getOrder=function(){return 100},s.prototype.shouldNotAllowDrag=function(){return this._widget.element.hasClass(v)?!0:!1},s.prototype._parseQueryString=function(n){for(var i=n.split(p),t=0;t<i.length;t++)this._resultTokenMap[i[t]]=[];return i},s.prototype._resetAndFilterResults=function(n){this._queryTimeout&&(a.clearTimeout(this._queryTimeout),this._queryTimeout=null,this._resetResults());this._filterHandler(
n)},s.prototype._filterHandler=function(n){var t=this;this.options.serverFilter()&&this.options.filterCallback()?Q(this.options.filterCallback()(n)).then((function(){t._ariaLive(h.Grid.serverFilterAriaLive.format(n))})):n===""?(this._filterActive(!1),this._ariaLive(h.Grid.noFilterAriaLive.format(this._widget.options.items()))):(this._filterActive(!0),this._results(this._getResultItems(this._parseQueryString(i.encodeHtml(n)))),this._ariaLive(h.Grid.filterAriaLive.format(this._results().length,n)))},s.prototype._getResultItems=function(n){var t=this,o=this._getSearchableColumns(),r,s,h=[],u=[],i,f,e;return this._widget.options.items().forEach((function(c,l){for(u=[],f=0;f<o.length;f++)if(r=o[f],c.hasOwnProperty(r))for(s=t._getFormattedItemValue(c[r],{item:c,rowMetadata:t._widget.getRowMetadata(c),rowNumber:function(){return l},columnNumber:function(){return t._colNumMap[r]},column:t._colMap[r]}),e=0;e<n.length;e++)i=n[e],s.toLowerCase().indexOf(i.toLowerCase())!==-1&&(u.indexOf(i)===-1&&u.push(
i),t._resultTokenMap[i].indexOf(c)===-1&&t._resultTokenMap[i].push(c));u.length===n.length&&h.push(c)})),h},s.prototype._filterableCellFormat=function(n,t,i,r){var o=i.item,s=r.itemKey,l=o[s],a={item:i.item,rowNumber:n,columnNumber:t,rowMetadata:i,column:r},u=this._getFormattedItemValue(l,a),v=this._getSearchableColumns(),h,f=[],c;for(var e in this._resultTokenMap)h=this._resultTokenMap.hasOwnProperty(e)&&this._resultTokenMap[e].indexOf(o)!==-1&&v.indexOf(s)!==-1,h&&f.push(this._regexStringEscape(e));return f.length&&(c="("+f.join("|")+")",u=this._highlightMatches(u,c)),u},s.prototype._highlightMatches=function(n,t){var i=n;return i.replace(new RegExp(t,"gi"),g)},s.prototype._regexStringEscape=function(n){var t=new RegExp("([!\"#$%&'()*+,./:;<=>?@[\\]^`{|}~\\\\])","g");return n.replace(t,"\\$1")},s.prototype._getFormattedItemValue=function(n,t){var i,r;if(t.column&&t.column.filterFormatter)r=t.column.filterFormatter(n,t);else{i=u.toJS(n);switch(typeof i){case"object":r=o.text(JSON.stringify(
i),t);break;default:r=o.text(i,t)}}return r},s.prototype._getSearchableColumns=function(){return this.options.searchableColumns().length?this.options.searchableColumns():this._displayedCols},s.prototype._resetResults=function(){this._results.removeAll();this._resultTokenMap={}},s.prototype._getDefaultFilterableOptions=function(){return{searchableColumns:u.observableArray(),searchBoxVisible:u.observable(!0),searchBoxPlaceholder:u.observable(h.Viva.Grid.Filterable.placeholder),searchBoxCloseButtonVisible:u.observable(!0),queryString:u.observable(""),serverFilter:u.observable(!1),filterCallback:u.observable(null),valueUpdateDelayTimeout:u.observable(300)}},s.Name=t,s})(s.Extension);n.FilterableExtension=nt})(a||(a={})),a}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Filterable",["require","exports","f","ko","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable"],
(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var s=i.ViewModels.Controls.Lists.Grid,h=300,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getExtension=function(n){var u=n,t=u&&u.filterable,i;return t&&(i={searchBoxCloseButtonVisible:t.searchBoxCloseButtonVisible||r.observable(!0),searchBoxPlaceholder:t.searchBoxPlaceholder||r.observable(e.Viva.Grid.Filterable.placeholder),searchBoxVisible:t.searchBoxVisible||r.observable(!0),searchableColumns:t.searchableColumns||r.observableArray(),queryString:t.queryString||r.observable(""),serverFilter:t.serverFilter||r.observable(!1),valueUpdateDelayTimeout:t.valueUpdateDelayTimeout||r.observable(h)}),this._options=i,new o.FilterableExtension(i)},t.prototype.getName=function(){return"Filterable"},t.prototype.getOrder=function(){return 0},t.prototype.columnAdded=function(n,t,i){i.filterFormatter=null;var r=t.filterableFormat;r!==undefined&&(i.filterFormatter=this._widget._getFormatter(r,t.filterableFormatOptions||
{}))},t})(f.GridExtension);n.FilterableExtension=t;u.registerPlugin(s.Extensions.Filterable,t)})(s||(s={})),s}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRowHover",["require","exports","o","ko","$","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var t=MsPortalFx,s=window,h='css: { "azc-external-hovered": $data === $ctl.getPlugin("azc-grid-hoverableRow")._hoveredRowMetadata() }',c=t.disposeDisposable,l=(function(n){function o(t){n.call(this);this._disposables=[];this._options=t||{};this._hoverIDKey=this._options.hoverIDKey||r.observable();this._hoveredID=this._options.hoveredID||r.observable();this._hoveredRowMetadata=r.observable(null);this._backupIdMax=0}return __extends(o,n),i.defineProperty(o.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),o.prototype.beforeCreate=function(
){this._focusableRowExtension=this._widget.getPlugin(f.FocusableRowExtension.Name);this._focusableRowExtension.externalHover=!0},o.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore");t.addAttribute("tr","data-bind",[h])},o.prototype.getDefaultRowMetadataProperties=function(){return{hovered:r.observable(!1)}},o.prototype.afterAttachEvents=function(){var t=this,n=this,i=this._widget.element;this._disposables.push(i.setEvents(["rowFocus.azcHovered",function(t,i){n._onRowFocus(t,i)}],["mouseenter.azcHovered","> .azc-grid-container .azc-grid-full > tbody > tr.azc-grid-row:not([aria-disabled=true])",function(i){var u;!t._preventMouseHandler&&i.currentTarget&&(u=r.dataFor(i.currentTarget),n._hoveredRowMetadata(u))}],["mouseleave.azcHovered",function(){t._preventMouseHandler||n._hoveredRowMetadata(null)}],["focus.azcHovered",function(t){if(!n._hoveredRowMetadata()){var i=void 0;t.currentTarget&&(i=r.dataFor(t.currentTarget),n._hoveredRowMetadata(i),n._focusedByEvent=
!0)}}],["blur.azcHovered","tbody.azc-grid-groupdata",function(){n._focusedByEvent&&n._hoveredRowMetadata()&&(n._hoveredRowMetadata(null),n._focusedByEvent=!1)}]))},o.prototype.afterCreate=function(){var n=this,t,i,u,f;this._rebuildIdRowMetadaMap();u=this._widget;f=this.ltm;u.options.items.subscribeArrayChanges(f,(function(f){i=r.unwrap(f[n._hoverIDKey()]);i||(i=(n._backupIdMax++).toString());t=u.getRowMetadata(f);t.hoverID=i;n._idRowMetadataMap[i]=t}),(function(i){t=u.getRowMetadata(i);delete n._idRowMetadataMap[t.hoverID]}));this._hoveredID.subscribe(f,(function(t){n.hoverRowByHoverId(t)}));this._hoveredRowMetadata.subscribe(f,(function(t){var i=t?t.hoverID:null;i!==n._hoveredID.peek()&&n._hoveredID(i)}))},o.prototype.getOrder=function(){return 30},o.prototype.getDependencies=function(){return[new f.FocusableRowExtension(this.options)]},o.prototype.beforeDestroy=function(){c(this._disposables);this._disposables=[];this._resetPreventMouseHandlerTimer()},o.prototype.getName=function(){return o.
Name},o.prototype.hoverRowByHoverId=function(n){var t=this._getRowMetadataFromHoverID(n);this.hoverRowByRowMetadata(t)},o.prototype.hoverRowByRowMetadata=function(n,i){if(this._hoveredRowMetadata.peek()!==n){if(this._inHoverRowByRowMetadata){console.error(" FocusableRowHoverExtension hoverRowByRowMetadata go into recursive called. Please verify."+t.getCurrentCallStack(!0));return}try{if(this._inHoverRowByRowMetadata=!0,this._hoveredRowMetadata(n),n){var r={hovered:n};this._widget.trigger("rowHover",i?e.cloneEvent(i,"rowHover"):u.Event("rowHover"),r);this._widget.options.events("hover",r)}}finally{this._inHoverRowByRowMetadata=!1}}},o.prototype._resetPreventMouseHandlerTimer=function(){this._preventMouseHandler=!1;this._preventMouseHandlerTimer!==null&&(s.clearTimeout(this._preventMouseHandlerTimer),this._preventMouseHandler=null)},o.prototype._onRowFocus=function(n,t){var r=this,i;this._focusedByEvent=!!n;this._focusedByEvent&&(this._resetPreventMouseHandlerTimer(),this._preventMouseHandler=
!0,this._preventMouseHandlerTimer=s.setTimeout((function(){r._resetPreventMouseHandlerTimer()}),250));t.focused?(i=t.focused,this.hoverRowByRowMetadata(i,n)):this.hoverRowByRowMetadata(null)},o.prototype._getRowMetadataFromHoverID=function(n){var i;return t.isNullOrUndefined(n)||(i=this._idRowMetadataMap[n]),i||null},o.prototype._rebuildIdRowMetadaMap=function(){var i=this,u=this._widget._getAllRowMetadata(),f=this._hoverIDKey.peek(),n,t={};this._backupIdMax=0;u.forEach((function(u){n=r.unwrap(u.item[f]);n=n?n.toString():(i._backupIdMax++).toString();t[n]=u;u.hoverID=n}));this._idRowMetadataMap=t},o.Name="azc-grid-hoverableRow",o})(o.Extension);n.FocusableRowHoverExtension=l})(s||(s={})),s}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRowHover",["require","exports","f","ko","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRowHover"],(function(n,
t,i,r,u,f,e){"use strict";var o;return (function(n){var o=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){},t.prototype.getExtension=function(n){var i=n,t=i.hoverable||{};return new e.FocusableRowHoverExtension({focusable:t.focusable||r.observable(!0),hoverIDKey:t.hoverIDKey||r.observable(),hoveredID:t.hoveredID||r.observable()})},t.prototype.initializeExtension=function(){},t.prototype.getName=function(){return"FocusableRowHover"},t.prototype.getOrder=function(){return 0},t})(f.GridExtension);n.FocusableRowHoverExtension=t;u.registerPlugin(o.Extensions.Hoverable,t)})(o||(o={})),o}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FormatterHtmlBindings",["require","exports","f","MsPortalImpl.Controls/Controls/Base/Formatters","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters",
"MsPortalImpl/Base/Base.KnockoutTemplateSanitizer","MsPortalImpl/Base/Base.ImplUtils"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(t){function w(t,i,r,u){var f=i||"";switch(t){case h.MultiselectDropDown:case h.TextBox:case h.CheckBox:case h.DropDown:case h.GroupDropDown:case h.CheckBoxRowSelection:return"<div data-bind='formElement: $data' data-grid-formelement='"+h[t]+"'><\/div>"}return r||(f=o.sanitizeHTML(new y(f,n,u),{}).sanitizedMarkup),f}function v(n,t,i){switch(t){case h.MultiselectDropDown:return c.multiselectDropDown(n,i);case h.TextBox:return c.textBox(n,i);case h.CheckBox:return c.checkBox(n,i);case h.DropDown:return c.dropDown(n,i);case h.GroupDropDown:return c.groupDropDown(n,i);case h.CheckBoxRowSelection:return c.rowSelectionCheckBox(n);case h.Default:default:return function(n,t,i){return{value:t,settings:i}}}}var y=s.ProvenanceContainer,a=i.ViewModels.Controls.Lists.Grid,p=a.Format,h=a.HtmlBindingsType,c=r.ControlViewModels,l;t.getHtmlBindingsViewModel=
v;l=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getName=function(){return"FormatterHtmlBindings"},t.prototype.getOrder=function(){return 0},t.prototype.getSafeFormatter=function(n,t,i){switch(n){case p.HtmlBindings:var r=this._widget&&this._widget.element;return e.htmlBindings(this._widget.ltm,w(t.htmlBindingsType,t.htmlBindingsTemplate,i,r),v(this._widget.ltm,t.htmlBindingsType,t.htmlBindingsData))}return null},t})(f.GridExtension);t.FormatterHtmlBindingsExtension=l;u.defaultPlugins.push(l)})(h||(h={})),h}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Groupable.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-grid-groupable.azc-grid.azc-grid-headerHidden .azc-grid-groupdata:first-of-type .azc-grid-groupheader td{border-top-width:0}.azc-grid-groupable.azc-grid .azc-grid-groupdata:first-of-type .azc-grid-groupheader td{border-top-width:1px}.azc-grid-groupable.azc-grid .azc-grid-groupdata .azc-grid-groupheader td{padding-top:15px;font-size:10px;font-family:az_ea_font,"Segoe UI",wf_segoe-ui_semibold,"Segoe UI Semibold","Segoe WP Semibold","Segoe WP",Tahoma,Arial,sans-serif;font-weight:600;text-transform:uppercase;border-top-width:0}.azc-grid-groupable.azc-grid .azc-grid-groupdata .azc-grid-groupheader:hover{background-color:inherit}.azc-grid-groupable.azc-grid .azc-grid-groupdata tr:not(.azc-grid-groupheader) td.azc-grid-cell:first-of-type{padding-left:30px}')})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Groupable",["require","exports","f","o","ko","$","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Groupable.css"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){function f(n){return n=u.toJS(n),h(n)?"":n}function y(n,t,i){var r=[],f=[];return t===0?f=n:(n.forEach((function(n){n.sortFormatter?r.push(n.sortFormatter(u.toJS(n.value))):r.push(u.toJS(n.value))})),i?r.sort(i):r.sort(),t===2&&r.reverse(),r.forEach((function(t){n.forEach((function(n){var i=n.sortFormatter?n.sortFormatter(u.toJS(n.value)):u.toJS(n.value);t.toString()===i.toString()&&f.push(n)}))}))),f}function p(n,t,i){var r,u,e;n.options.items().forEach((function(o){r="";e=f(o[i]);t.forEach((function(n){u=f(n.value);e.toString()===u.toString()&&(r=u)}));n.getRowMetadata(o).groupId(r)}))}function w(n,t,i){if(
i===null||i===undefined)throw new Error("groupId cannot be null or undefined when fetching group items.");return u.computed(n,(function(){var n=[],e=u.toJS(i).toString(),r;return t.options.items().forEach((function(i){r=f(t.getRowMetadata(i).groupId);r.toString()===e&&n.push(i)})),n}))}var h=i.isNullOrUndefined,c=jQuery,t="azc-grid-groupable",v="<!-- ko if: data.items().length -->"+('<!-- ko foreach: $ctl.getPlugin("'+t+'").groups -->')+"<tbody class='azc-grid-groupdata' role='rowgroup' data-bind='attr: { \"aria-label\": ariaLabel }' ><tr aria-hidden='true' class='azc-grid-groupheader'>"+("<td class='azc-br-muted' data-bind='trustedHtml: $ctl.getPlugin(\""+t+"\")._headerCellFormat(formatter, value), attr: { colspan: $ctl._getTotalColumns() }'><\/td>")+"<\/tr>"+('<!-- ko if: $ctl.getPlugin("'+t+'").getItemsByGroup(value)().length -->')+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+t+'").getItemsByGroup(value)() } --><!-- /ko -->')+"<!-- /ko -->"+('<!-- ko ifnot: $ctl.getPlugin("'+
t+'").getItemsByGroup(value)().length -->')+"<tr role='row'><td role='gridcell' data-bind='attr: { colspan: $ctl._getTotalColumns() }, html: $vm.noRowsMessage' class='azc-br-muted'><\/td><\/tr><!-- /ko --><\/tbody><!-- /ko -->"+('<!-- ko if: $ctl.getPlugin("'+t+'").getItemsByGroup("")().length -->')+"<tbody class='azc-grid-groupdata' role='rowgroup'><tr role='row' class='azc-grid-groupheader'>"+("<td rol='gridcell' class='azc-br-muted' data-bind='trustedHtml: $ctl.getPlugin(\""+t+'").options.noGroupLabel(), attr: { "aria-label": $ctl.getPlugin("'+t+"\").options.noGroupLabel(), colspan: $ctl._getTotalColumns() }'><\/td>")+"<\/tr>"+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+t+'").getItemsByGroup("")() } --><!-- /ko -->')+"<\/tbody><!-- /ko --><!-- /ko -->",l=(function(){function n(n,t,i,r){this.value=n;this.formatter=t||e.text;this.sortFormatter=i;this.ariaLabel=r}return n})(),a;n.Group=l;a=(function(n){function i(t){n.call(this);this._groupItems={};this._options=c.
extend(this._getDefaultGroupOptions(),t);h(this._options.groups)&&(this._options.groups=u.observable(null))}return __extends(i,n),r.defineProperty(i.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.afterSetTemplates=function(n){n.setTemplate("bodyCore",v)},i.prototype.beforeCreate=function(){var n=this,r=function(t,i,r,e){var o=[],s=[],h=[];return r.forEach((function(n){var t=f(n[i]),r=t.toString();s.indexOf(r)===-1&&(o.push(t),s.push(r))})),o.forEach((function(t){var i=u.observable();n._options&&n._options.getGroupAriaLabel?Q(n._options.getGroupAriaLabel(t)).then((function(n){i(n)})):i(t&&t.toString());h.push(new l(t,e,null,i))})),h},i=this.ltm,t;this._groups=u.computed(i,(function(){t&&t.dispose();t=i.createChildLifetime();var u=[],f=n.options.groups(),o;return f?u=f:(o=n.options.headerFormatter||e.text,u=r(t,n.options.groupKey(),n._widget.
options.items(),o)),p(n._widget,u,n.options.groupKey()),y(u,n.options.sortOrder(),n.options.sortFunction)}))},i.prototype.beforeDestroy=function(){var n=this;this._groupItems&&(r.getOwnPropertyNames(this._groupItems).forEach((function(t){var i=n._groupItems[t];i&&(c.isFunction(i.dispose)&&i.dispose(),n._groupItems[t]=null)})),this._groupItems=null)},i.prototype.getItemsByGroup=function(n){return n=u.toJS(n),this._groupItems[n]||(this._groupItems[n]=w(this.ltm,this._widget,n)),this._groupItems[n]},i.prototype.getDefaultRowMetadataProperties=function(){return{groupId:u.observable("")}},i.prototype.getName=function(){return i.Name},i.prototype.getOrder=function(){return 70},i.prototype._getDefaultGroupOptions=function(){return{groupKey:u.observable(""),headerFormatter:e.text,groups:u.observable(null),noGroupLabel:function(){return s.Viva.Grid.Groupable.noGroupLabel},sortOrder:u.observable(1),sortFunction:null}},i.prototype._headerCellFormat=function(n,t){return n(t)},i.Name=t,i})(o.Extension);
n.GroupableExtension=a})(h||(h={})),h}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Groupable",["require","exports","f","ko","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Groupable","MsPortalImpl/Resources/ImplScriptResources"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){function h(n){var i,r=t.SortFunction;switch(n){case r.DateTime:i=function(n,t){var i=new Date(n).getTime(),r=new Date(t).getTime();return i<r?-1:i>r?1:0};break;case r.SettingListGroupOrder:i=function(n,t){var i=s.Part.SettingList.Group.support;return n===i?-1:t===i?1:0};break;default:i=null}return i}var t=i.ViewModels.Controls.Lists.Grid,e=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){},t.prototype.getExtension=function(n){var f=n||{},i=this._widget,e=i.ltm.
createChildLifetime(),s=i.element[0],t=f.groupable,u=t.getGroupAriaLabel&&t.getGroupAriaLabel.bind(f);return new o.GroupableExtension({groupKey:t.groupKey,headerFormatter:i._getFormatter(t.headerFormat,t.headerFormatOptions),groups:r.computed(e,(function(){var n;return t&&t.groups&&(n=[],t.groups().forEach((function(t){var s=i._getFormatter(t.format,t.formatOptions),e=null,f;t.sortFormat&&(e=i._getFormatter(t.sortFormat,t.sortFormatOptions));f=r.observable();u?Q(u(t.value)).then((function(n){f(n)})):f(t.value&&t.value.toString());n.push(new o.Group(t.value,s,e,f))}))),n}),this,{disposeWhenNodeIsRemoved:s}),noGroupLabel:i._getFormatter(t.noGroupLabelFormat,t.noGroupLabelFormatOptions),sortFunction:h(t.sortFunction),sortOrder:r.computed(e,(function(){var n=1;return t&&t.sortOrder&&(n=t.sortOrder()),n}),this,{disposeWhenNodeIsRemoved:s}),getGroupAriaLabel:u})},t.prototype.initializeExtension=function(){},t.prototype.getName=function(){return"Groupable"},t.prototype.getOrder=function(){return 0},t.
prototype.connectRowMetadataProperties=function(n,t,i){var r=this._widget.ltm.createChildLifetime();return this._widget._twoWayBinding(r,i.groupId,t.groupId),r},t})(f.GridExtension);n.GroupableExtension=e;n.getSortFunction=h;u.registerPlugin(t.Extensions.Groupable,e)})(h||(h={})),h}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Hierarchical.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-hierarchical-cell-flexcontainer{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center}.azc-grid-hierarchical-cell-flexcontainer .azc-grid-cellContent{flex:1 1 auto}.azc-grid-hierarchical-header>a{padding-left:26px}.azc-grid-hierarchical-icon,.azc-grid-hierarchical-indent{display:inline-block;flex:0 0 auto;width:16px;height:16px;top:3px}.azc-grid-hierarchical-icon-collapsed,.azc-grid-hierarchical-icon-expanded{width:0;height:0;background:0 0;border-style:solid;border-right-color:transparent!important;border-bottom-color:transparent!important}.azc-grid-hierarchical-icon-collapsed{margin-top:3px;margin-left:5.5px;border-width:5px 0 5px 5px;border-top-color:transparent!important}.azc-grid-hierarchical-icon-expanded{margin-top:5.5px;margin-left:3px;border-width:5px 5px 0;border-left-color:transparent!important}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Hierarchical",["require","exports","f","o","ko","$","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","MsPortalImpl/Base/Base.KeyboardHelper","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.EventTypes","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Hierarchical.css"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){var f=h.Grid.Accessibility,l=jQuery,v='css: { "azc-grid-hierarchical-toplevel": item.depth() === 0 }',y='css: { "azc-grid-hierarchical-header": hierarchical }',a="tr[data-grid-focusable]",p=".azc-grid-hierarchical-icon[data-grid-expandable]",t="azc-grid-hierarchical",w=i.encodeAttribute(f.Expander.ariaDetail),b="<div class='azc-grid-hierarchical-cell-flexcontainer'><!-- ko if: hierarchical --><!-- ko foreach: new Array($parent.item.depth()) --><div class='azc-grid-hierarchical-indent'><\/div><!-- /ko -->"+("<div class='azc-grid-hierarchical-icon' data-bind='if: $ctl.getPlugin(\""+
t+'")._isExpandable($parent.item), clickBubble: false, attr: { "aria-label": $ctl.getPlugin("'+t+'")._isExpandable($parent.item) ? "expander" : null, "aria-details": $ctl.getPlugin("'+t+'")._isExpandable($parent.item) ? "'+w+'" : null, "aria-expanded": $ctl.getPlugin("'+t+'")._isExpandable($parent.item) ? $parent.item.expanded().toString() : "undefined", "data-grid-expandable": $ctl.getPlugin("'+t+'")._isExpandable($parent.item) ? "true" : null, tabindex: $ctl.getPlugin("'+t+"\")._isExpandable($parent.item) ? $tabIndex() : $focusIndex() }'>")+'<div data-bind=\'css: {"azc-grid-hierarchical-icon-collapsed": !$parent.item.expanded(), "azc-grid-hierarchical-icon-expanded": $parent.item.expanded() }\'><\/div><\/div><!-- /ko --><div class=\'azc-grid-cellContent\' data-bind=\'css: { "azc-grid-cell-ellipse": $data.enableEllipse, "azc-grid-cell-fullheight": $data.fullHeight }, trustedHtml: $ctl._cellFormat($parentContext.$parentContext.$index, $index, $parent, $data)\'><\/div><\/div>',k=i.disposeDisposable,
d=(function(n){function t(t){n.call(this);this._disposables=[];this._options=l.extend(this._getDefaultHierarchicalOptions(),t)}return __extends(t,n),r.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),t.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore"),i=n.getHtmlTemplate("headerCell");i.addAttribute("th","data-bind",[y]);t.addAttribute("tr","data-bind",[v]);n.setTemplate("bodyCellContent",b)},t.prototype.afterCreate=function(){},t.prototype.afterAttachEvents=function(){var t=this,n=!0,i=this.options;this._disposables.push(this._widget.element.setEvents([c.default.keydown+".azcGrid",a,function(r){var o=l(r.target),e=o.closest(a),f=u.dataFor(e[0]),h=f?f.item:null,c=s.getModifierKeys(r);if(c===0&&e&&e.length>0){switch(r.which){case 37:n=t._expandOrCollapse(i,f,!1);break;case 39:n=t._expandOrCollapse(i,f,!0);break;case 13:case 32:n=t._expandOrCollapse(i,f,!h.expanded());break;default:n=!1}n&&(r.preventDefault(
),r.stopPropagation())}}],[c.default.click+".azcGrid",p,function(r){var o=l(r.target),f=o.closest(a),e=u.dataFor(f[0]),s=e?e.item:null;f&&f.length>0&&(n=t._expandOrCollapse(i,e,!s.expanded()));n&&(r.preventDefault(),r.stopPropagation())}]))},t.prototype.beforeDestroy=function(){k(this._disposables);this._disposables=[]},t.prototype.getName=function(){return t.Name},t.prototype.getOrder=function(){return 18},t.prototype.getDependencies=function(){return[new o.FocusableRowExtension]},t.prototype.getDefaultColumnProperties=function(){return{hierarchical:!1}},t.prototype.shouldNotAllowSelectAll=function(){return!0},t.prototype._expandOrCollapse=function(n,t,i){var r=t?t.item:null,u=n.hierarchy;return r&&this._isExpandable(r)?(i?r.expanded()||(u.expand(t.item),this._widget._ariaLive(f.expanded)):r.expanded()&&(u.collapse(t.item),this._widget._ariaLive(f.collapsed)),!0):!1},t.prototype._getDefaultHierarchicalOptions=function(){return{hierarchy:null}},t.prototype._isExpandable=function(n){return n.
expandable&&(n.expandable()===!0||n.expandable()===undefined)},t.Name="azc-grid-hierarchical",t})(e.Extension);n.HierarchicalExtension=d})(l||(l={})),l}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Hierarchical",["require","exports","f","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Hierarchical"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){var e=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getExtension=function(n){var t=n,i=t&&t.hierarchical;return new f.HierarchicalExtension(i)},t.prototype.initializeExtension=function(){},t.prototype.beforeDestroy=function(){},t.prototype.getName=function(){return"Hierarchical"},t.prototype.getOrder=function(){return 0},t})(u.GridExtension);n.HierarchicalExtension=t;r.registerPlugin(e.Extensions.Hierarchical,t)})(e||(e={})),e}));define(
"_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Pageable.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer{display:block;height:38px;text-decoration:none;text-align:center}.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer .azc-grid-pageable-loadMoreLabel{font-size:12px;line-height:38px}.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer .azc-grid-pageable-loadMoreIcon{display:inline-block;margin-top:10px}.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer .azc-grid-pageable-loadMoreIcon:before{content:url(Content/static/azc-validatableControl-pending.gif)}.azc-grid-pageable.azc-grid .azc-grid-pageable-pager{float:right}.azc-grid-pageable.azc-grid.azc-grid-pageable-onePage .azc-grid-pageable-pager{display:none}")}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Pageable",["require","exports","f","o","ko","$","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1",
"MsPortalImpl/Resources/ImplScriptResources","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Pageable.css"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){function p(){return{label:u.observable(o.Grid.loadMore),showLabel:u.observable(!0),loading:u.observable(!1)}}var t="azc-grid-pageable",h=t+"-loadMoreContainer",c="."+h+"[href]",l=t+"-onePage",s=t+"-full",a='<!-- ko ifnot: $ctl.getPlugin("azc-grid-pageable").options.pagerViewModel --><a aria-label=\''+i.encodeAttribute(o.Grid.loadMoreAriaLabel)+'\' class=\'azc-grid-pageable-loadMoreContainer\' data-bind=\'attr: { href: $ctl.getPlugin("azc-grid-pageable").options.loading() ? null : "#", "aria-controls": $ctl.id }, visible: $ctl.getPlugin("azc-grid-pageable").options.showLabel\'><span class=\'azc-grid-pageable-loadMoreLabel\' data-bind=\'visible: !$ctl.getPlugin("azc-grid-pageable").options.loading(), text: $ctl.getPlugin("azc-grid-pageable").options.label\'><\/span><span class=\'azc-grid-pageable-loadMoreIcon\' data-bind=\'visible: $ctl.getPlugin("azc-grid-pageable").options.loading, css: { "azc-grid-pageable-showLoadingIcon": $ctl.getPlugin("azc-grid-pageable").options.loading }\'><\/span><\/a><!-- /ko --><!-- ko if: $ctl.getPlugin("azc-grid-pageable").options.pagerViewModel --><div class=\'azc-grid-pageable-pager\' data-bind=\'azcPager: $ctl.getPlugin("azc-grid-pageable").options.pagerViewModel\'><\/div><!-- /ko -->',
v="<!-- ko template: { name: ko.pureComputed(function () { return data.items().length ? 'bodyCore' : ($ctl.getPlugin(\"azc-grid-pageable\").options.loading() ? 'bodyCore' : 'bodyNoItems'); }), data: $data } --><!-- /ko -->",y=(function(n){function i(t){n.call(this);this._options=f.extend(p(),t)}return __extends(i,n),r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("table");t.append(".azc-grid-container",a);n.setTemplate("body",v)},i.prototype.afterCreate=function(){var t=this,n=this.options.pagerViewModel;n&&u.computed(this.ltm,(function(){var i=t._widget.element;i.toggleClass(l,n.numberOfPages()===1);i.addClass(s)}))},i.prototype.afterAttachEvents=function(){var n=this;this.ltm.registerForDispose(this._widget.element.setEvents(["click.azcPageableGrid",c,function(t){t.preventDefault();t.stopPropagation();var i=n.options;!i.loading()&&i.onLoadMoreData&&i.onLoadMoreData(
)}]))},i.prototype.beforeDestroy=function(){this._widget.element.removeClass(s)},i.prototype.getName=function(){return i.Name},i.prototype.getOrder=function(){return 20},i.prototype.getTotalItems=function(){return u.observable(-1)},i.prototype.getFirstObservableRowIndexObservable=function(){var n=this;return u.pureComputed((function(){return n.options.pagerViewModel&&n.options.itemsPerPage?(n.options.pagerViewModel.currentPage()-1)*n.options.itemsPerPage()+1:1}))},i.prototype.shouldNotAllowSelectAll=function(){return!0},i.Name=t,i})(e.Extension);n.PageableExtension=y})(s||(s={})),s}));define("_generated/Less/Viva.Controls/Controls/Viva.Pager.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-pager{margin-top:3px}.azc-pager .fxs-portal-border{border:1px solid;margin-left:3px}.azc-pager .fxs-portal-border svg{height:12px;width:12px}.azc-pager [role=navigation]{list-style:none;margin:0;padding:0;overflow:auto}.azc-pager-arrow,.azc-pager-input,.azc-pager-page{float:left;text-align:center}.azc-pager-arrow:last-child,.azc-pager-input:last-child,.azc-pager-page:last-child{margin-right:0}.azc-pager-arrow[aria-disabled=true],.azc-pager-input[aria-disabled=true],.azc-pager-page[aria-disabled=true]{opacity:.2!important}.azc-pager-link{display:block;padding:0 11px;font-size:11px;line-height:22px;color:inherit!important;text-decoration:none}.azc-pager-arrow-link{padding:0;line-height:0}.azc-pager-arrow,.azc-pager-page{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.azc-pager-arrow .fxs-portal-svg,.azc-pager-page .fxs-portal-svg{padding:4px}.azc-pager-input{width:50px}.azc-pager-input .azc-pager-input-textBox{height:23px;padding-right:0!important}.azc-pager-input input{text-align:center;border-right-width:1px!important}")})
);define("Viva.Controls/Controls/Viva.Pager",["require","exports","f","o","a","ko","Viva.Controls/Controls/Base/Viva.Validators","Viva.Controls/Controls/Base/ValidationPlacements/Viva.Css","Viva.Controls/Controls/Forms/Viva.TextBox","Viva.Controls/Controls/Base/Viva.Base","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","_generated/Less/Viva.Controls/Controls/Viva.Pager.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";var a;return (function(n){function g(){return{previous:c.Pager.previous,next:c.Pager.next}}var k=jQuery,a="azc-pager",v="azc-pager-arrow",y="azc-pager-arrow-previous",p="azc-pager-arrow-next",t="azc-pager-input-textBox",d="<ul role='navigation' aria-label='"+i.encodeAttribute(c.Grid.pagination)+"'><!-- ko if: $ctl._longPager --><li class='azc-pager-input'>"+("<div class='"+t+"' aria-label='"+i.encodeAttribute(c.Pager.currentPage)+"' data-bind='azcTextBox: $ctl._textBoxViewModel'><\/div>")+"<\/li><li class='azc-pager-page'>"+
("<a class='azc-pager-link' role='button' aria-label='"+i.encodeAttribute(c.Pager.lastPage)+'\' data-bind=\'text: data.numberOfPages, attr: { "data-page-id": data.numberOfPages(), href: $ctl._isCurrentPage(data.numberOfPages()) ? null : "" }\'><\/a>')+'<\/li><!-- /ko --><!-- ko ifnot: $ctl._longPager --><!-- ko foreach: $ctl._pages --><li class=\'azc-pager-page fxs-portal-hover\' data-bind=\'css: {"fxs-portal-selected": $ctl._isCurrentPage($data)}, attr: { "aria-selected": $ctl._isCurrentPage($data) ? "true" : "false" }\'><a class=\'azc-pager-link\' role=\'button\' data-bind=\'text: $data, attr: {"aria-label": $ctl._ariaLabel($data), "data-page-id": $data, href: $ctl._isCurrentPage($data) ? null : "" }\'><\/a><\/li><!-- /ko --><!-- /ko --><!-- ko if: $ctl._showArrows -->'+("<li class='fxs-portal-border fxs-portal-hover "+v+" "+y+'\' data-bind=\'attr: { "aria-disabled": $ctl._isCurrentPageFirst() ? "true" : "false" }\'>')+"<a class='azc-pager-link azc-pager-arrow-link' role='button' data-bind='attr: { title: data.text.previous, \"aria-label\": data.text.previous, href: $ctl._isCurrentPageFirst() ? null : \"\" }'><div class='msportalfx-svg-flip-horizontal fxs-portal-svg' data-bind='image: MsPortalFx.Base.Images.Shell.Chevron()'><\/div><\/a><\/li>"+
("<li class='fxs-portal-border fxs-portal-hover "+v+" "+p+'\' data-bind=\'attr: { "aria-disabled": $ctl._isCurrentPageLast() ? "true" : "false" }\'>')+"<a class='azc-pager-link azc-pager-arrow-link' role='button' data-bind='attr: { title: data.text.next, \"aria-label\": data.text.next, href: $ctl._isCurrentPageLast() ? null : \"\" }'><div class='fxs-portal-svg' data-bind='image: MsPortalFx.Base.Images.Shell.Chevron()'><\/div><\/a><\/li><!-- /ko --><\/ul>",w=(function(n){function t(t,i){i===void 0&&(i={});n.call(this,t);this.currentPage=i.currentPage||f.observable(1);this.numberOfPages=i.numberOfPages||f.observable(1);this.maxPages=i.maxPages||f.observable(20);this.text=i.text;this.ariaLive=i.ariaLive||f.observable("")}return __extends(t,n),t})(h.ViewModel),u,b;n.ViewModel=w;u=(function(n){function i(t,i,r){var u,h,f;r=r||{};r.viewModelType=r.viewModelType||w;n.call(this,t,i,r);this.options.text=this.options.text||g();this.element.addClass(a).html(d);u=new s.ViewModel(this.vmBasicOption);h=
u.validators;this._textBoxViewModel=u;f=this.ltm;u.validationPlacements.push(new o.Css(f));h.push(new e.ValueRange(f,null,1,this.options.numberOfPages));h.push(new b(f));this._attachEvents();this._initializeComputeds();this._bindDescendants()}return __extends(i,n),i.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._detachEvents(),this._cleanElement(a),n.prototype.dispose.call(this))},r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(i.prototype,"_longPager",{get:function(){return this.options.numberOfPages()>this.options.maxPages()},enumerable:!0,configurable:!0}),r.defineProperty(i.prototype,"_showArrows",{get:function(){return this.options.numberOfPages()>1},enumerable:!0,configurable:!0}),i.prototype._ariaLabel=function(n){return c.Pager.page.format(n)},i.prototype._initializeComputeds=function(){var t=this,n=this.options,i=this._textBoxViewModel,r;this._pages=f.observableArray(
);r=this.ltm;f.computed(r,(function(){var r=t._pages.peek(),i,u;for(t._pages.valueWillMutate(),r.splice(0,r.length),i=1,u=Math.min(n.numberOfPages(),n.maxPages());i<=u;i++)r.push(i);t._pages.valueHasMutated()}));i.events={enterPressed:function(t){i.validationState()===2&&n.currentPage(parseInt(t,10))}};f.computed(r,(function(){i.value(n.currentPage().toString())}))},i.prototype._attachEvents=function(){var n=this,i;this._detachEvents();i=this.options;this.element.on("click","ul li.azc-pager-page a[href]",this._clickPageEventHandler=function(t){var r=parseInt(k(t.currentTarget).data("page-id"),10);i.currentPage(r);t.preventDefault();n.options.ariaLive("");n.options.ariaLive(c.Pager.loadPageNumber.format(r))}).on("click","ul li."+y+" a[href]",this._clickArrowPreviousEventHandler=function(t){i.currentPage(i.currentPage()-1);t.preventDefault();n.options.ariaLive("");n.options.ariaLive(c.Pager.loadPrev)}).on("click","ul li."+p+" a[href]",this._clickArrowNextEventHandler=function(t){i.currentPage(
i.currentPage()+1);t.preventDefault();n.options.ariaLive("");n.options.ariaLive(c.Pager.loadNext)}).on("blur","."+t+" input",this._inputBlurEventHandler=function(){n._textBoxViewModel.value(i.currentPage().toString());n._textBoxViewModel.validationState(2)})},i.prototype._detachEvents=function(){var n=this.element,f=this._clickPageEventHandler,i,r,u;f&&(n.off("click",f),this._clickPageEventHandler=null);i=this._clickArrowPreviousEventHandler;i&&(n.off("click",i),this._clickArrowPreviousEventHandler=null);r=this._clickArrowNextEventHandler;r&&(n.off("click",r),this._clickArrowNextEventHandler=null);u=this._inputBlurEventHandler;u&&(n.off("blur","."+t+" input",u),this._inputBlurEventHandler=null)},i.prototype._isCurrentPage=function(n){return n===this.options.currentPage()},i.prototype._isCurrentPageFirst=function(){return 1===this.options.currentPage()},i.prototype._isCurrentPageLast=function(){return this.options.numberOfPages()===this.options.currentPage()},i})(h.Widget);n.Widget=u;b=(function(
n){function t(t,i){n.call(this,t,null,i)}return __extends(t,n),t.prototype._validate=function(n){return/^[0-9]*$/.test(n)?2:1},t})(e.Validator);f.bindingHandlers.azcPager=l.getBindingHandler(u)})(a||(a={})),a}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Pageable",["require","exports","f","ko","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Viva.Pager","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Pageable"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function v(n){var t,r;return n&&(t=n.metadata(),t&&(r=t.totalItemCount,!i.isNullOrUndefined(r)))?r:0}var a=i.ViewModels.Controls.Lists.Grid,t=a.PageableType,y=e.Grid,c=i.getUniqueId,l;n.DefaultItemsPagePage=10;l=(function(u){function f(){u.apply(this,arguments);this._options=null;this._type=null;this._dataNav=
null;this._filterQS=r.observable(null);this._currentRequestId=null}return __extends(f,u),f.prototype.getExtension=function(u){var e=this,l=u,f=l&&l.pageable,s;if(f&&(this._dataNav=f.dataNavigator),!this._validateSequential()&&!this._validatePageable())throw new Error("Pageable extension cannot work without a valid data navigator. Provide a valid data navigator to fetch data.");this._type=f.type;switch(f.type){case t.Pageable:s=f.pagerMaxPages;this._options={loading:r.observable(!1),pagerViewModel:new o.ViewModel({ltm:this._widget.ltm},{maxPages:!i.isNullOrUndefined(s)&&r.observable(s)}),itemsPerPage:f.itemsPerPage?f.itemsPerPage:r.observable(n.DefaultItemsPagePage)};break;case t.Sequential:default:this._options={label:f.label?f.label:r.observable(y.loadMore),showLabel:f.showLabel?f.showLabel:r.observable(!0),loading:r.observable(!1),onLoadMoreData:function(){e._currentRequestId=c();e._onLoadMoreData(e._currentRequestId).catch((function(){}))}}}return new h.PageableExtension(this._options)}
,f.prototype.initializeExtension=function(){if(!(this._type===t.Sequential&&this._validateSequential()||this._type===t.Pageable&&this._validatePageable()))throw new Error("Pageable extension cannot work without a valid data navigator. Provide a valid data navigator to fetch data.");var n=this._filterableExtn=this._widget._instance.getPlugin(s.FilterableExtension.Name);n&&n.options.serverFilter()&&this._filterQS(n.options.queryString())},f.prototype.resetExtension=function(){var n=this,i=this._filterableExtn&&this._filterableExtn.options,r;return i&&!i.filterCallback()&&i.filterCallback((function(t){if(n._filterQS()!==t)return n._filterQS(t),n.resetExtension()})),r=this._type===t.Sequential&&this._validateSequential()?this._resetAndLoadData():this._type===t.Pageable&&this._validatePageable()?this._resetLoadPage():Q(),r.catch((function(){})),r},f.prototype.beforeDestroy=function(){this._subLifetime&&(this._subLifetime.dispose(),this._subLifetime=null)},f.prototype.getName=function(){return"Pageable"}
,f.prototype.getOrder=function(){return 0},f.prototype._validateSequential=function(){return this._dataNav&&!!this._dataNav.loadByContinuationToken},f.prototype._validatePageable=function(){return this._dataNav&&!!this._dataNav.loadBySkipTake},f.prototype._loadPage=function(){var n=this,i=c(),t=this._options;this._currentRequestId=i;var u=t.pagerViewModel.currentPage(),r=t.itemsPerPage(),f=this._getSortData();return t.loading(!0),Q(this._dataNav.loadBySkipTake((u-1)*r,r,this._filterQS(),f)).then((function(){if(n._currentRequestId===i){var t=n._dataNav.items();t=t?t.slice(0):[];n._widget.options.items(t)}return Q()}),(function(n){return n._sourceErrorLevel=0,Q.reject(n)})).finally((function(){n._currentRequestId===i&&t.loading(!1)}))},f.prototype._attachSubscriptions=function(){var u=this,i,n;if(this._subLifetime=this._widget.ltm.createChildLifetime(),this._type===t.Pageable){i=this._options;n=i.pagerViewModel;this._options.pagerViewModel.ariaLive=this._widget._instance._ariaLive;var f=v(this.
_dataNav),e=i.itemsPerPage(),o=n.currentPage(),s=n.numberOfPages();r.reactor(this._subLifetime,(function(){var h=v(u._dataNav),t=i.itemsPerPage(),c=n.currentPage();r.ignoreDependencies((function(){if(t){var i=(h+t-1)/t|0||1;i!==s&&(s=i,n.numberOfPages(i))}(h!==f||t!==e||c!==o)&&(f=h,e=t,o=c,t&&c&&u._loadPage().catch((function(){})))}))}))}},f.prototype._resetCurrentPageSubscription=function(){this._subLifetime&&(this._subLifetime.dispose(),this._subLifetime=null);this._options.pagerViewModel.currentPage(1);this._attachSubscriptions()},f.prototype._resetLoadPage=function(){return this._resetCurrentPageSubscription(),this._loadPage()},f.prototype._onLoadMoreData=function(n){var t=this,i=this._options;return i.loading(!0),Q(this._dataNav.loadByContinuationToken()).then((function(){return t._currentRequestId===n&&t._widget.options.items.push.apply(t._widget.options.items,t._dataNav.items()),Q()}),(function(n){return n._sourceErrorLevel=0,Q.reject(n)})).finally((function(){t._currentRequestId===n&&(i.
loading(!1),t._dataNav.metadata()&&t._dataNav.metadata().continuationToken||i.showLabel(!1))}))},f.prototype._resetAndLoadData=function(){var n=this._getSortData();return this._currentRequestId=c(),this._dataNav.resetLoadByContinuationToken&&this._dataNav.resetLoadByContinuationToken(this._filterQS(),n),this._options.showLabel(!0),this._widget.options.items([]),this._onLoadMoreData(this._currentRequestId)},f.prototype._getSortData=function(){var n=this._widget.options.sortByList;return n?n():null},f})(f.GridExtension);n.PageableExtension=l;u.registerPlugin(a.Extensions.Pageable,l)})(c||(c={})),c}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ReorderRow.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-reorderRow.azc-grid table thead tr th:nth-child(2)>a{padding-left:0}.azc-grid-reorderRow col.azc-grid-reorderRow-col{width:16px}.azc-grid-reorderRow table tbody tr[draggable]{-webkit-user-drag:element}.azc-grid-reorderRow table tbody tr td.azc-grid-reorderRow-cell{padding-left:5px;padding-right:6px}.azc-grid-reorderRow table tbody tr td:nth-child(2){padding:0}.azc-grid-reorderRow.azc-grid-reorderRow-enabled table tbody tr:not([aria-disabled=true]):hover td.azc-grid-reorderRow-cell div{margin-top:4px}.azc-grid-reorderRow.azc-grid-reorderRow-enabled table tbody tr:not([aria-disabled=true]):hover td.azc-grid-reorderRow-cell div:before{content:url(Content/static/azc.grid.reorderrowextension.handle-hover.svg);width:5px;height:17px}.azc-grid-reorderRow.azc-grid-reorderRow-enabled table tbody tr:not([aria-disabled=true])[aria-selected=true]:hover td.azc-grid-reorderRow-cell div:before{content:url(Content/static/azc.grid.reorderrowextension.handle-active.svg)}.azc-grid-reorderRow .azc-grid-reorderRow-line{position:absolute;width:100%;height:3px;display:none}.azc-grid-reorderRow.azc-grid-reorderRow-active .azc-grid-reorderRow-line{display:block}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ReorderRow",["require","exports","f","o","ko","$","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ReorderRow.css"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){var f=jQuery,l=window,t="azc-grid-reorderRow-active",c="azc-grid-reorderRow-enabled",a='attr: { "data-grid-reorder": true }',v="<div class='azc-grid-reorderRow-line azc-bg-muted'><\/div>",y="<col class='azc-grid-reorderRow-col' />",p="<th role='presentation' class='azc-grid-reorderRow-header'><\/th>",w="<td role='presentation' class='azc-grid-reorderRow-cell azc-br-muted'><div><\/div><\/td>",b="application/x-azc-grid-row",k="data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==",h={},d=(function(n){function s(t){n.call(this);this._options=t=t||{};t.disabled===undefined&&(
t.disabled=u.observable(!1));this._gridGuid=i.getUniqueId()}return __extends(s,n),r.defineProperty(s.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),s.prototype.afterCreate=function(){var n=this;this._widget.element.append(v);u.computed(this.ltm,(function(){n._widget.element.toggleClass(c,!n.options.disabled())}))},s.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore"),i=n.getHtmlTemplate("header"),r=n.getHtmlTemplate("colgroup");t.addAttribute("tr","data-bind",[a]).prepend("tr",w);i.prepend("tr",p);r.prepend("colgroup",y)},s.prototype.afterAttachEvents=function(){var n=this,r=this;this._widget.element.on("dragstart","[draggable]",this._dragstartEventHandler=function(t){if(!n._widget._extensionTrigger("shouldNotAllowDrag").some((function(n){return!!n}))){e.DataTransfer.isLegacyDataTransfer()&&l.getSelection().removeAllRanges();var f=i.getUniqueId(),o=t.target,r=new e.DataTransfer(t.originalEvent.dataTransfer),s=document.createElement(
"img");s.src=k;h[f]={rowMetadata:u.dataFor(o),element:o};r.effectAllowed="move";r.setDragImage(s,-25,-25);r.setData(n._getMimeType(),f)}}).on("drop",this._dropEventHandler=function(t){var i=new e.DataTransfer(t.originalEvent.dataTransfer),u=i.types;if(u.some((function(t){return t===n._getMimeType()}))){i.dropEffect="move";var f=i.getData(n._getMimeType()).split(";"),o=f.map((function(n){return h[n].rowMetadata})),r={rowMetadata:o,clientX:t.originalEvent.pageX,clientY:t.originalEvent.pageY,position:n._positionLine(t)};t.preventDefault();setTimeout((function(){n._widget.trigger("rowReorder",e.cloneEvent(t,"rowReorder"),r);n._widget.options.events("reorder",r)}),0)}}).on("dragend",this._dragendEventHandler=function(){h={};n._widget.element.removeClass(t)}).on("mouseenter.azcGrid","tbody tr[data-grid-reorder=true]:not([aria-disabled=true]) td.azc-grid-reorderRow-cell",this._mouseenterEventHandler=function(){r.options.disabled()||f(this).closest(".azc-grid-row").attr("draggable","true")}).on("mouseleave.azcGrid",
"tbody tr[data-grid-reorder=true]:not([aria-disabled=true]) td.azc-grid-reorderRow-cell",this._mouseleaveEventHandler=function(){f(this).closest(".azc-grid-row").removeAttr("draggable")});f("html").on("dragover",this._dragoverEventHandler=function(i){if(f.contains(n._widget.element[0],i.target)){var u=new e.DataTransfer(i.originalEvent.dataTransfer),r=u.types;r&&r.some((function(t){return t===n._getMimeType()}))&&(n._positionLine(i),i.preventDefault())}else n._widget.element.hasClass(t)&&n._widget.element.removeClass(t)})},s.prototype.getOrder=function(){return 21},s.prototype.getDependencies=function(){return[new o.FocusableRowExtension]},s.prototype.beforeCreate=function(){var n=this,t=["azc-grid-editableRow"];this._widget.options.extensions.forEach((function(i){if(t.indexOf(i.getName())>=0)throw new Error("The extension "+i.getName()+" is not compatible with the extension "+n.getName()+".");}))},s.prototype.beforeDestroy=function(){this._widget.element.removeClass(t).removeClass(c);this.
_dragstartEventHandler&&(this._widget.element.off("dragstart",this._dragstartEventHandler),this._dragstartEventHandler=null);this._dropEventHandler&&(this._widget.element.off("drop",this._dropEventHandler),this._dropEventHandler=null);this._dragendEventHandler&&(this._widget.element.off("dragend",this._dragendEventHandler),this._dragendEventHandler=null);this._dragoverEventHandler&&(this._widget.element.off("dragover",this._dragoverEventHandler),this._dragoverEventHandler=null);this._mouseenterEventHandler&&(this._widget.element.off("mouseenter.azcGrid",this._mouseenterEventHandler),this._mouseenterEventHandler=null);this._mouseleaveEventHandler&&(this._widget.element.off("mouseleave.azcGrid",this._mouseleaveEventHandler),this._mouseleaveEventHandler=null)},s.prototype.getName=function(){return s.Name},s.prototype.getAdditionalColumns=function(){return 1},s.prototype._getMimeType=function(){return(b+"-"+this._gridGuid).toLowerCase()},s.prototype._positionLine=function(n){var s=f(n.target),
r=null,i,e;if(s.hasClass("azc-grid-reorderRow-line"))r=this._savedIndex;else if(f.contains(this._widget.element[0],n.target)){if(this._widget.element.hasClass(t)||this._widget.element.addClass(t),i=s.closest("[data-grid-reorder=true]"),e=n.originalEvent,i.length===0){var h=this._widget.element.find("[data-grid-reorder=true]"),c=h.first(),v=h.last();i=e.pageY<=c.offset().top?c:v}r=i.index();var l=i.outerHeight(),o=i.offset(),u=i.position(),a=this._widget.element.find(".azc-grid-reorderRow-line");o.top=Math.floor(o.top);u.top=Math.floor(u.top);e.pageY-o.top<l/2?a.css("top",Math.round(u.top)):(a.css("top",Math.round(u.top+l)),r++);this._savedIndex=r}else this._widget.element.removeClass(t);return r},s.Name="azc-grid-reorderRow",s})(s.Extension);n.ReorderRowExtension=d})(h||(h={})),h}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ReorderRow",["require","exports","f","a","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl",
"Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ReorderRow"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){this._handler&&(this._widget._instance.element.off("rowReorder",this._handler),this._handler=null)},t.prototype.getExtension=function(n){var t=n||{},i=t.reorderRow||{},r=i.disabled;return new e.ReorderRowExtension({disabled:r})},t.prototype.initializeExtension=function(){var t=this._widget,n=t.options;t._instance.element.on("rowReorder",this._handler=function(i,r){var b=n.extensionsOptions||{},h=b.reorderRow||{},k=h.automaticallyReorderRows,c=h.rowReorder,l=r.rowMetadata,y,f,s,p,w;if(k!==!1){var u=n.items.peek(),e=[],a=Math.min(u.length,Math.max(0,r.position)),v=0,o=!1;for(l.forEach((function(n){e.push(n.item)})),y=function(n){return e.indexOf(n)>=0?!0:!1},f=0,s=0;f<u.length;f++,s++)p=u[f],y(p)&&(o||(n.items.valueWillMutate(
),o=!0),u.splice(f,1),f--,s<a&&v++);o&&(u.splice.apply(u,[a-v,0].concat(e)),n.items.valueHasMutated())}c&&(w={rowMetadata:l.map((function(n){return t.getRowMetadata(n.item)})),position:r.position},c(i,w))})},t.prototype.getName=function(){return"ReorderRowExtension"},t.prototype.getOrder=function(){return 0},t})(f.GridExtension);n.ReorderRowExtension=t;u.registerPlugin(r.Extensions.ReorderRow,t)})(o||(o={})),o}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ResizableColumn.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-grid.azc-grid-resizableColumn .azc-grid-tableContainer{position:relative}.azc-grid.azc-grid-resizableColumn .azc-grid-resizableColumn-handle{position:absolute;right:-5px;top:0;height:40px;width:10px;cursor:ew-resize;z-index:1;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center}.azc-grid.azc-grid-resizableColumn .azc-grid-resizableColumn-handle .azc-grid-resizableColumn-handle-line{width:1px;height:100%;opacity:0}.azc-grid.azc-grid-resizableColumn .azc-grid-resizableColumn-ghostLine{position:absolute;width:1px;top:0;z-index:1}.azc-grid.azc-grid-resizableColumn .azc-grid-show-handles .azc-grid-resizableColumn-handle .azc-grid-resizableColumn-handle-line,.azc-grid.azc-grid-resizableColumn thead:hover .azc-grid-resizableColumn-handle-line,.azc-grid.azc-grid-resizableColumn.azc-grid-resizing .azc-grid-resizableColumn-handle-line{opacity:1}.azc-grid.azc-grid-resizableColumn.azc-grid-resizing *{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.azc-grid.azc-grid-resizableColumn .azc-grid-headerlabel:after{content:"\\a0"}')})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ResizableColumn",["require","exports","o","ko","$","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ResizableColumn.css"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){function s(){return{resizable:r.observable(!0),resizeToPercent:r.observable(!0),minWidth:20}}var t=window,e="azc-grid-resizing",o="<!-- ko if: $ctl.getPlugin(\"azc-grid-resizableColumn\").options.resizable() && hasHandle() --><div class='azc-grid-resizableColumn-handle'><div class='azc-grid-resizableColumn-handle-line azc-bg-muted'><\/div><\/div><!-- /ko -->",h=(function(n){function f(t){n.call(this);this._options=u.extend(s(),t)}return __extends(f,n),i.defineProperty(f.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),f.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("headerCell");t.append("div",o)},f.prototype.afterCreate=function(){var n=this,
t=this._widget.options.columns();t.length>0&&(this._lastColumnObject=t[t.length-1],this._lastColumnObject.hasHandle(!1));this._widget.options.columns.subscribe(this.ltm,(function(t){t.length&&(n._lastColumnObject&&n._lastColumnObject.hasHandle(!0),n._lastColumnObject=t[t.length-1],n._lastColumnObject.hasHandle(!1))}))},f.prototype.afterAttachEvents=function(){var n=this;this._widget.element.on("mousedown.azcGridResizableColumn",".azc-grid-resizableColumn-handle",this._mouseDownEventHandler=function(t){var e,i,f,o;(n._mouseDownPosition=t.pageX,n._handle=u(t.currentTarget),n._columns=n._widget.element.find("th"),e=n._handle.parent().closest("th"),f=r.dataFor(e[0]),t.preventDefault(),f.disableResizable())||(i=n._getNextResizableColumn(n._columns,n._widget.options.columns.indexOf(f)+1),i!==null)&&(o=r.dataFor(i[0]),r.isObservable(f.width)&&r.isObservable(o.width))&&n._resizeStart(e,i)})},f.prototype.getName=function(){return f.Name},f.prototype.getOrder=function(){return 16},f.prototype.beforeDestroy=
function(){this._mouseDownEventHandler&&(this._widget.element.off("mousedown.azcGridResizableColumn",this._mouseDownEventHandler),this._mouseDownEventHandler=null);this._mouseUpEventHandler&&(u(t.document).off("mouseup.azcGridResizableColumn",this._mouseUpEventHandler),this._mouseUpEventHandler=null);this._mouseMoveEventHandler&&(u(t.document).off("mousemove.azcGridResizableColumn",this._mouseMoveEventHandler),this._mouseMoveEventHandler=null);this._widget.element.removeClass(e)},f.prototype.getDefaultColumnProperties=function(){return{disableResizable:r.observable(!1),hasHandle:r.observable(!0)}},f.prototype._resizeStart=function(n,i){var f=this,h,w=this._widget.element.find(".azc-grid-tableHeader"),b=this._widget.element.find(".azc-grid-tableContent"),o=u("<div class='azc-grid-resizableColumn-ghostLine fxs-portal-selected'><\/div>"),s=this._widget.element.find(".azc-grid-tableContainer"),c=n.offset().left+this._options.minWidth,l=i.offset().left+i.width()-this._options.minWidth,a,v,y,
p;h=this._handle.find(".azc-grid-resizableColumn-handle-line");a=h.offset().left;v=this._tableOffset(s,a);o.offset({left:v});o.css("position","absolute");y=w.height();p=b.height();o.height(y+p);s.append(o);u(t.document).on("mousemove.azcGridResizableColumn",this._mouseMoveEventHandler=function(n){var t=n.pageX,i=Math.min(Math.max(t,c),l);n.preventDefault();f._widget.element.addClass(e);o.offset({left:i})});u(t.document).one("mouseup.azcGridResizableColumn",this._mouseUpEventHandler=function(h){var a,w,b,v,k,y,d,p,nt=h.pageX,g=[],tt=Math.min(Math.max(nt,c),l),it=r.dataFor(i[0]),rt=r.dataFor(n[0]);u(t.document).off("mousemove.azcGridResizableColumn",f._mouseMoveEventHandler);f._mouseMoveEventHandler=null;f._widget.element.removeClass(e);o.remove();w=n.width();b=i.width();p=tt-f._mouseDownPosition;v=w+p;k=b-p;f._options.resizeToPercent()?(a=s.width(),d=f._convertToPercent(a,k),y=f._convertToPercent(a,v),it.width(d)):(f._columns.each((function(n,t){var i=u(t),f=r.dataFor(t);f.hasOwnProperty(
"width")?g.push(i.width().toString()+"px"):i.width(i.width())})),f._widget.options.columns().forEach((function(n,t){n.width(g[t])})),y=v.toString()+"px");rt.width(y)})},f.prototype._getNextResizableColumn=function(n,t){var e=this._widget.options.columns(),u,o,f,i;if(t===e.length)u=null;else if(f=e[t],f.hasOwnProperty("disableResizable")&&!f.disableResizable()){for(i=0;i<n.length;i++)if(r.dataFor(n.eq(i)[0]).columnId===f.columnId){o=n.eq(i);break}u=o}else t++,u=this._getNextResizableColumn(n,t);return u},f.prototype._convertToPercent=function(n,t){if(n>0)return(t/n*100).toString()+"%"},f.prototype._tableOffset=function(n,t){return t-n.offset().left},f.Name="azc-grid-resizableColumn",f})(f.Extension);n.ResizableColumnExtension=h})(e||(e={})),e}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ResizableColumn",["require","exports","f","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ResizableColumn"],
(function(n,t,i,r,u,f){"use strict";var e;return (function(n){var e=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){},t.prototype.getExtension=function(n){var t=n,i=t&&t.resizableColumn;return new f.ResizableColumnExtension(i)},t.prototype.getName=function(){return"ResizableColumn"},t.prototype.getOrder=function(){return 0},t})(u.GridExtension);n.ResizableColumnExtension=t;r.registerPlugin(e.Extensions.ResizableColumn,t)})(e||(e={})),e}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Scrollable.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid.azc-grid-scrollable{width:100%;height:100%;overflow:hidden}.azc-grid.azc-grid-scrollable div.azc-grid-container{width:100%;height:100%;overflow:hidden;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.azc-grid.azc-grid-scrollable div.azc-grid-container div.azc-grid-tableContainer{width:100%;height:100%;overflow:hidden;padding-top:40px;position:relative;-webkit-flex:1 1 auto;flex:1 1 auto;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.azc-grid.azc-grid-scrollable div.azc-grid-container div.azc-grid-tableContainer div.azc-grid-tableScrollContainer{width:100%;height:100%;overflow:auto;-webkit-flex:1 1 auto;flex:1 1 auto}.azc-grid.azc-grid-scrollable div.azc-grid-container div.azc-grid-tableContainer div.azc-grid-tableScrollContainer table.azc-grid-tableHeader{position:absolute;top:0;left:0}.azc-grid.azc-grid-scrollable div.azc-grid-container div.azc-grid-tableContainer tr.azc-grid-scrollable-above+tr.azc-grid-row td{border-top-width:1px;border-top-style:solid}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Scrollable",["require","exports","f","o","ko","$","MsPortalImpl/Base/Base.FeatureDetection","MsPortalImpl/Base/Base.BrowserDetection","Viva.Controls/Util/Viva.Resize","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Scrollable.css"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function d(){return{dataProvider:null}}var c=window,y="<!-- ko template: { name: ko.pureComputed(function () { return  $ctl.getPlugin(\"azc-grid-scrollable\").asyncItems().length ? 'bodyCore' : 'bodyNoItems'; }), data: $data } --><!-- /ko -->",p="<tbody class='azc-grid-groupdata' role='rowgroup'><tr role='presentation' class='azc-grid-scrollable-above' aria-hidden='true'><\/tr><!-- ko foreach: $ctl.getPlugin(\"azc-grid-scrollable\").asyncItems --><!-- ko template: { name: template, data: item() } --><!-- /ko --><!-- /ko --><\/tbody>",w="<tr role='row' class='azc-grid-scrollable-loading'><td role='gridcell' class='azc-br-muted' data-bind='attr: { colspan: $ctl._getTotalColumns() }'><\/td><\/tr>",
b="<tr role='row' class='azc-grid-scrollable-error'><td role='gridcell' class='azc-br-muted' data-bind='attr: { colspan: $ctl._getTotalColumns() }'><\/td><\/tr>",t=Math.floor,l=Math.min,k=i.disposeDisposable,a=(function(){function n(n,t,i){var r=this;this.index=n;this.item=u.observable(i);this.state=u.observable(t);this.template=u.pureComputed((function(){switch(r.state()){case 0:return"bodyRowsLoading";case 2:return"bodyRowsError";case 1:default:return"bodyRows"}}))}return n})(),v;n.AsyncItem=a;v=(function(n){function h(t){n.call(this);this._disposables=[];this._firstObservableRowIndex=u.observable(1);this._options=f.extend(d(),t);this.virtualScrolling&&(this.asyncItems=u.observableArray(),this._resetAsyncItemCache())}return __extends(h,n),r.defineProperty(h.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(h.prototype,"virtualScrolling",{get:function(){return!!this.options.dataProvider},enumerable:!0,configurable:!0}),h.prototype.afterCreate=
function(){var n=this,t=this._widget.element;this._scrollContainer=t.find(".azc-grid-tableScrollContainer");this._disposables.push(this._scrollContainer.setEvents(["scroll.azcGridScrollable",function(){n._update()}]));this.virtualScrolling&&(this._lastWidth=t.width(),this._lastHeight=t.height(),s.track(this._widget.ltm,t,(function(t,i){n._onResize(t,i)})),this.options.dataProvider.totalItemCount.subscribe(this._widget.ltm,(function(){n._activePageRequest||(n._resetAsyncItemCache(),n._update())})));this._update(!0)},h.prototype.afterSetTemplates=function(n){this.virtualScrolling&&n.setTemplate({body:y,bodyCore:p,bodyRowsLoading:w,bodyRowsError:b})},h.prototype.getDefaultColumnProperties=function(){return{}},h.prototype.beforeDestroy=function(){this._updateViewportAsyncTimeout&&(c.clearTimeout(this._updateViewportAsyncTimeout),this._updateViewportAsyncTimeout=null);k(this._disposables);this._disposables=[];this._asyncItemCache=null;this._activePageRequest=null},h.prototype.getName=function()
{return h.Name},h.prototype.getOrder=function(){return 15},h.prototype.getTotalItems=function(){return this.options.dataProvider&&this.options.dataProvider.totalItemCount?this.options.dataProvider.totalItemCount:null},h.prototype.getFirstObservableRowIndexObservable=function(){return this._firstObservableRowIndex},h.prototype.shouldNotAllowSelectAll=function(){return this.virtualScrolling},h.prototype.reset=function(){this._resetAsyncItemCache();this.virtualScrolling&&this._widget.options.items.removeAll();var n=this._scrollContainer;n&&(n.scrollLeft(0),n.scrollTop(0),this._update(!0))},h.prototype._onResize=function(n,t){t===this._lastHeight?n!==this._lastWidth&&(this._lastWidth=n,this._updateHeader()):(this._lastHeight=t,this._lastWidth=n,this._update())},h.prototype._resetAsyncItemCache=function(){this._asyncItemCache=[];this._asyncItemCache.length=2048},h.prototype._updateHeader=function(){var n=this._scrollContainer,t,r,u,f;n&&(t=n.find(".azc-grid-tableHeader"),t.length&&(r=-n.scrollLeft(
),t.css("left",r<0?r+"px":""),u=i.truncate(n[0].offsetWidth-n[0].clientWidth),t.css("width",u>0?"calc(100% - "+u+"px)":""),f=this._widget.options.showHeader?t.outerHeight()||40:0,n.parent(".azc-grid-tableContainer").css("padding-top",f+"px")))},h.prototype._update=function(n){this._updateHeader();this.virtualScrolling&&this._updateViewportAsync(n)},h.prototype._updateViewportAsync=function(n){var t=this,i;if(n)try{this._updateViewport(n);this._updateHeader()}catch(r){}else i=this._options.updateViewportAsyncDebounceTime||256,this._updateViewportAsyncTimeout&&c.clearTimeout(this._updateViewportAsyncTimeout),this._updateViewportAsyncTimeout=c.setTimeout((function(){if(t._updateViewportAsyncTimeout)try{t._updateViewport();t._updateHeader()}catch(n){}}),i)},h.prototype._getRowHeight=function(){var t,n;return n=this._scrollContainer.find(".azc-grid-full td"),n.length&&(t=n.outerHeight()),t||this._options.defaultRowHeight||36},h.prototype._getTotalScrollHeight=function(n,i){var r,u;return u=t(
h._maxElementHeightFactor*e.getMaxElementHeight()),r=t(n*i),l(r,u)},h.prototype._updateContentHeight=function(n){var t=this._widget.element.find(".azc-grid-tableContent");t.height(n)},h.prototype._updateAboveRowHeight=function(n){var t=this._scrollContainer.find(".azc-grid-scrollable-above");t.css("height",n||"")},h.prototype._updateViewport=function(n){var u=this,r,h,e,c,b,v,y,a,f,k,p,d,s,w,g;r=this.options.dataProvider.totalItemCount();(i.isNullOrUndefined(r)||n)&&(r=100);h=this._getRowHeight();e=this._getTotalScrollHeight(r,h);this._updateContentHeight(e);s=this._scrollContainer[0];c=o.isIe11?s.getBoundingClientRect().height:s.clientHeight;b=s.scrollTop||0;v=s.scrollHeight||e||c;c&&(y=t(r*(b/v)),a=Math.ceil(c/h),f=Math.max(y-a,0),k=l(y+a+a,r),p=k-f,d=t(v*(f/r)),this._updateAboveRowHeight(d),w=this._activePageRequest={},g=this._renderRows(f,p),this._request(w,g,f,p).finally((function(){w===u._activePageRequest&&(u._activePageRequest=null,r=u.options.dataProvider.totalItemCount(),e=u._getTotalScrollHeight(
r,h),u._updateContentHeight(e),u._updateHeader(),u._firstObservableRowIndex(f+1))})))},h.prototype._renderRows=function(n,t){for(var f=[],e=this._asyncItemCache,h,c,r=0;r<t;r++){var o=n+r,i=void 0,s=o%e.length;i=e[s];i&&i.index===o||(i=new a(o,0,null),e[s]=i,i.state()===2&&i.state(0));f.push(i)}return h=u.utils.compareArrays(this.asyncItems(),f,{sparse:!0}),c=u.utils.createArraySplices(h),u.utils.applyArraySplices(this.asyncItems,c),f},h.prototype._updateGridItems=function(n){var i,r,t;n&&n.length&&(t=this._widget.options,i=t.items.peek(),i?(r=[i.length,0],n.forEach((function(n){i.indexOf(n)<0&&r.push(n)})),r.length>2&&t.items.splice.apply(t.items,r)):t.items(n))},h.prototype._request=function(n,t,i,r){var u=this;return this.options.dataProvider.fetch(i,r).then((function(i){var r=[];t.forEach((function(n,t){var u=i[t];u?(n.item(u),n.state(1),r.push(u)):n.state(2)}));n===u._activePageRequest&&(t.length>i.length&&u.asyncItems.splice(i.length,t.length-i.length),u._updateGridItems(r))}),(function(
){t.forEach((function(n){n.state()!==1&&n.state(2)}))}))},h.prototype.shouldRetainRowMetadata=function(){return!0},h.prototype.scrollTo=function(n){this._scrollContainer[0].scrollTop=n/this._options.dataProvider.totalItemCount.peek()*this._scrollContainer[0].scrollHeight;this._updateViewport()},h.Name="azc-grid-scrollable",h._maxElementHeightFactor=.8,h})(h.Extension);n.ScrollableExtension=v})(c||(c={})),c}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Scrollable",["require","exports","f","i","ko","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Scrollable"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){var h=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments);this._filterQueryString=u.observable(null)}return __extends(t,n),t.prototype.getExtension=function(
n){var i=this,f=n,o=f&&f.scrollable,e={dataProvider:null},t=this._dataNavigator=o.dataNavigator;return t&&(e.dataProvider={totalItemCount:u.pureComputed((function(){var n,i=t.metadata();return i&&(n=i.totalItemCount),n})),fetch:function(n,u){var f=null,e=i._widget.options.sortByList;return e&&(f=e()),Q(t.loadBySkipTake(n,u,i._filterQueryString(),f)).then((function(){return Q(t.items())}),(function(n){var t=r.createError("This error is due to a rejected loadBySkipTake call from a pageable grid.",{innerErrors:n});return t._sourceErrorLevel=0,Q.reject(t)}))}}),this._azcScrollableExtension=new s.ScrollableExtension(e)},t.prototype.initializeExtension=function(){var r=this,u=this._widget._instance.getPlugin(o.FilterableExtension.Name),n,t,i;u&&(n=this._filterQueryString,t=u.options,t.serverFilter()&&n(t.queryString()),i=t.filterCallback,i()||i((function(t){if(n()!==t){n(t);var i=r._dataNavigator;return i&&i.metadata(null),r.resetExtension()}})))},t.prototype.resetExtension=function(){var n=this;return Q(
).then((function(){n._azcScrollableExtension.reset()}))},t.prototype.beforeDestroy=function(){this._azcScrollableExtension=null},t.prototype.getName=function(){return"Scrollable"},t.prototype.getOrder=function(){return 0},t})(e.GridExtension);n.ScrollableExtension=t;f.registerPlugin(h.Extensions.Scrollable,t)})(h||(h={})),h}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SortableColumn.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-sortableColumn .azc-grid-sortableColumn-target{display:-webkit-flex;display:flex;-webkit-flex:1 1 auto;flex:1 1 auto;cursor:pointer}.azc-grid-sortableColumn .fxc-ascending .msportalfx-descend,.azc-grid-sortableColumn .fxc-descending .msportalfx-ascend,.azc-grid-sortableColumn .fxc-none .msportalfx-ascend,.azc-grid-sortableColumn .fxc-none .msportalfx-descend{opacity:.25}.azc-grid-sortableColumn .azc-grid-sortableColumn-image-container{display:flex;-webkit-flex:0 0 auto;flex:0 0 auto;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;position:absolute;top:0;right:9px}.azc-grid-sortableColumn .azc-grid-sortableColumn-sortImage{width:11px;height:38px}.azc-grid-sortableColumn .azc-grid-headerlabel{-webkit-flex:1 1 calc(100% - 11px);flex:1 1 calc(100% - 11px);margin-right:22px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:15px}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SortableColumn",["require","exports","f","o","ko","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.KeyboardHelper","MsPortalImpl/Svg/Startup/SortArrows.svg","MsPortalImpl/Base/Base.EventTypes","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SortableColumn.css"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){var t="azc-grid-sortableColumn",a=t+"-target",l="."+a,v="<span role='columnheader' data-bind='attr: {class: $ctl.getPlugin(\""+t+'")._getSortClasses(sortOrder()), tabindex: $tabIndex, "aria-sort": $ctl.getPlugin("'+t+"\")._getAriaSort(sortOrder()), id: columnId }'><div class='azc-grid-headerlabel' data-bind='text: name'><\/div><div class='azc-grid-sortableColumn-image-container'>"+("<div class='azc-grid-sortableColumn-sortImage' data-bind='image: $ctl.getPlugin(\""+t+"\").sortIcon'>")+
"<\/div><\/div><\/span>",y=i.disposeDisposable,p=(function(n){function e(t){n.call(this);this.sortIcon=h;this._disposables=[];this._sortByList=[];this._options=t||{}}return __extends(e,n),e.prototype.setInstance=function(t){n.prototype.setInstance.call(this,t)},r.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e.prototype.afterSetTemplates=function(n){var t=n.getTemplate("headerCellContent");n.setTemplate("headerCellContent","<!-- ko if: sortable -->"+v+"<!-- /ko --><!-- ko ifnot: sortable -->"+t+"<!-- /ko -->")},e.prototype.afterCreate=function(){var n=this,u=this._options,t=this._widget,i=t.options,r=this._sortByList=i.sortByList();u.sortClientSide&&r.length&&this._sortCallback(r);i.sortByList.subscribe(t.ltm,(function(t){t!==n._sortByList&&n._sortCallback(t)}))},e.prototype._sortCallback=function(n){this._sortByList=n;this._widget.options.actions.sort(n);this._ariaLiveUpdate(n)},e.prototype.afterAttachEvents=function(){var n=this,
t=this._widget.getPlugin(f.FocusableRowExtension.Name),r=this._widget.element;this._disposables.push(r.setEvents([c.default.click,l,function(t){var f=u.dataFor(this),h=f.itemKey,r=n._sortByList.slice(),c=t.ctrlKey,s=f.sortOrder()===1?2:1,e={itemKey:f.itemKey,sortOrder:s},o;t.preventDefault();c?(o=i.findIndex(r,(function(n){return n.itemKey===h})),o>=0?r[o]=e:r.push(e)):(n._resetColumns(),r=[e]);f.sortOrder(s);n._sortCallback(r)}],[c.default.keydown,l,function(n){s.getModifierKeys(n)===0&&(n.which===13||n.which===32)&&($(this).trigger(c.default.click),n.preventDefault())}],["keydown.azc-grid-sortableColumn",l,t?function(n){var i=$(n.currentTarget),u=r.find(l).last();i[0]===u[0]&&n.which===9&&s.getModifierKeys(n)===0&&t._focusCurrentlyFocusableRow(n)}:null]))},e.prototype._ariaLiveUpdate=function(n){var r=this,t=[],f=n.map((function(n){return{displayName:i.find(r._widget.options.columns(),(function(t){return t.itemKey===n.itemKey})).name(),sortBy:n}})),u;f.forEach((function(n,i){i===0?t.push(o.
Viva.Grid.Sortable.sortingby):t.push(o.Viva.Grid.Sortable.then);var u=r._getAriaSort(n.sortBy.sortOrder)==="ascending"?o.Viva.Grid.Sortable.ascending:o.Viva.Grid.Sortable.descending;t.push(n.displayName,u)}));u=t.join(" ");this._widget._ariaLive(u)},e.prototype._resetColumns=function(){var n=this._widget.options,t=n.sortByList();t.length!==0&&n.columns().forEach((function(n){n.sortOrder(0)}))},e.prototype._getAriaSort=function(n){switch(n){case 1:return"ascending";case 2:return"descending"}return"none"},e.prototype._getSortClasses=function(n){return a+" fxc-"+this._getAriaSort(n)},e.prototype.getDefaultColumnProperties=function(){return{sortable:!0,sortOrder:u.observable(0)}},e.prototype.beforeDestroy=function(){y(this._disposables);this._disposables=[]},e.prototype.getName=function(){return e.Name},e.Name=t,e})(e.Extension);n.SortableColumnExtension=p})(l||(l={})),l}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SortableColumn",["require","exports","f","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility",
"MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SortableColumn"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){var e=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments);this._dataNavigator=null}return __extends(t,n),t.prototype.getExtension=function(n){var i=n,r=i&&i.sortableColumn,t=r.dataNavigator;return t&&(this._dataNavigator=t),new f.SortableColumnExtension({sortClientSide:!t,sortCallback:r.sortCallback||null})},t.prototype.getName=function(){return"SortableColumn"},t.prototype.getOrder=function(){return 0},t})(u.GridExtension);n.SortableColumnExtension=t;r.registerPlugin(e.Extensions.SortableColumn,t)})(e||(e={})),e}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ContextMenuShortcut","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.EditableRow",
"MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Filterable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRowHover","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Formatter","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FormatterHtmlBindings","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Groupable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Hierarchical","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Pageable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ReorderRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ResizableColumn","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.RightClickableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Scrollable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SelectableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SortableColumn"],(function(n,t,i){"use strict";
var r;return (function(n){var t,r,u;n.x=5;t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(i.GridExtension);n.GridExtension=t;r=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(i.Widget);n.Widget=r;u=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(i.TrustedWidget);n.TrustedWidget=u})(r||(r={})),r}))