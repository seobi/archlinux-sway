define("HubsExtension/ArmHelpers/ArmApiEndpoints",["require","exports","f","i"],(function(n,t,i,r){"use strict";function s(n){return t.armEndpoints.first((function(t){return r.Extension.isEqualCloudName(t.cloudName,n)}))}var f=i.Base.Constants,u=window.fx.environment,e=u.armInvokeApi,o=(u.armEndpoint||"").replace(/\/$/,"");t.armEndpoints=u&&u.armEndpoints||[];r.Extension.multiCloudEnabled||(t.armEndpoints=[{cloudName:f.DefaultCloudName,uri:o,invokeApi:e}]);t.getArmEndpointObject=s}));define("HubsExtension/Common/BrowseCuration",["require","exports","f","i","FxHubs/RpcEndPoints"],(function(n,t,i,r,u){"use strict";var f;return (function(n){function t(n){return i.retryPromise((function(){return e().then(n)}),10,1e3)}var f=i.Base.Constants,e=i.memoizeQ((function(){return Q(u.Curation.getSharedCurationEndpoint.invoke(r.Rpc.client,f.Shell,undefined))}));n.getSearchCuration=i.memoizeQ((function(){return t((function(n){return n.searchCuration||[]}))}));n.getExcludedResourceTypes=i.memoizeQ((function(n){return t(
(function(t){var u=(t.resourceTypesExcludedFromBrowse||[]).first((function(t){return r.Extension.isEqualCloudName(t.cloudName||f.DefaultCloudName,n)}));return i.convertArrayToMap(u&&u.types||[],(function(n){return typeof n=="string"?n:n.resourceType}),(function(n){return typeof n=="string"?!0:n.kinds||{}}))}))}));n.getMergedAssetTypes=i.memoizeQ((function(){return t((function(n){return n.mergedAssetTypes||[]}))}))})(f||(f={})),f}));define("HubsExtension/Common/AssetTypeCache",["require","exports","f","i","ko","FxHubs/RpcEndPoints","HubsExtension/Common/BrowseCuration"],(function(n,t,i,r,u,f,e){"use strict";function it(){t.onlyPartialResultsAvailable(!0);s=null;h=r.getCloudMap();o.dispose();o=new r.TriggerableLifetimeManager}function a(n){var t=h.get(n);return t||(t=i.tryImmediateResolve(w(),(function(t){return u.computed(o,(function(){return t.assetTypesInformation().filter((function(t){return l(t.cloudName,n)}))}))})),h.set(n,t)),t}function w(){return s||(s=Q(f.AssetTypes.getAssetTypesInformationObservableEndPoint.
acquireObject(tt,nt,undefined)).then((function(n){var i=u.unwrap(n&&n.getValue());return i.isPartialSet.subscribeAndRun(o,(function(n){t.onlyPartialResultsAvailable(n)})),i}))),s}function b(n,i,r){return a(n).then((function(n){var u=Q.defer(),f=function(n){if(u.promise.isPending())if(n||r)u.resolve(n);else throw new Error("Did not receive asset type information from the shell");};return n.subscribeAndRun(o,(function(n){var t=i(n);return t&&f(t),!!t})),t.onlyPartialResultsAvailable.subscribeAndRun(o,(function(n){n||f(null)})),Q.delay(2e4).then((function(){return f(null)})),u.promise}))}function v(n,t){if(!n)return null;var r=n.cloudName||p,u=(n.extensionName||"").toLowerCase(),f=(n.assetType||"").toLowerCase();return b(r,(function(n){return i.find(n,(function(n){return l(r,n.cloudName)&&u===n.lowerCaseExtension&&f===n.lowerCaseAssetType}))}),t)}function k(n,t,r){if(!n)return null;var u=n.toLowerCase();return b(t,(function(n){return i.find(n,(function(n){return n.lowerCaseResourceType===u}))}),r)}function d(
n,t,i){return l(n,i.cloudName||p)&&t.lowerCaseExtension===i.extensionName&&t.lowerCaseAssetType===i.assetType}function rt(n,t){return e.getMergedAssetTypes().then((function(r){return k(n,t).then((function(n){var u=i.find(r,(function(i){return d(t,n,i.base)||i.associated.some((function(i){return d(t,n,i)}))})),o={base:n,associated:[]},f,e;return u?(f={base:n,associated:[],infoTextOverride:u.infoTextOverride},e=[],e.push(v(u.base).then((function(n){f.base=n}))),u.associated.forEach((function(n){e.push(v(n).then((function(n){f.associated.push(n)})))})),Q.allSettled(e).then((function(n){return n.forEach((function(n){n.state!=="fulfilled"&&g.warning("Failed to find asset type: "+n.reason)})),f}))):o}))}))}function ut(n){return a(n).then((function(n){var t={};return n.subscribeAndRun(o,(function(n){n.forEach((function(n){var i=n.lowerCaseResourceType,r;i&&(r=n.icon||c.Images.Polychromatic.ResourceDefault(),t[i]?t[i](r):t[i]=u.observable(r))}))})),t}))}var c=i.Base,y=c.Constants,g=c.Diagnostics.createLog(n),nt=y.Shell,
tt=r.Rpc.client,l=r.Extension.isEqualCloudName,p=y.DefaultCloudName,s,h,o;t.onlyPartialResultsAvailable=u.observable(!0);h=r.getCloudMap();o=new r.TriggerableLifetimeManager;t.flushAssetTypes=it;t.getAssetTypesInformation=a;t.getAssetTypesInformationPromise=w;t.getAssetTypeInformation=v;t.getResourceTypeAssetTypeInformation=k;t.getMergedResourceTypeAssetTypeInformation=rt;t.getRegisteredResourceTypesIcons=ut}));define("HubsExtension/ArmHelpers/ArmApisStartup",["require","exports","f","i","o","a","Fx/Ajax","FxHubs/RpcEndPoints","HubsExtension/Common/AssetTypeCache","HubsExtension/ArmHelpers/ArmApiEndpoints"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(t){function wi(n){var t=h.getArmEndpointObject(n);return t||k.endpointNotFound(n),t.uri}function bi(n){return h.getArmEndpointObject(n).invokeApi}function ft(n){return n.replace(yi,"")}function d(n){return"/"+ft(n)}function a(n){return(n||"").toLowerCase()}function bt(n){return n.replaceAll("'","''")}function ki(n,t){var
r=i.trimEnd(t,"/")+i.ensurePrefix(n,"/"),u=vi.exec(r);return u||k.invalidUrlEndpoint(r),r=u[1]?u[1]+"/":"",r+=ft(u[7]).replace(pi,"/"),!u[1]&&u[7].startsWith("/")&&(r="/"+r),r+(u[8]||"")}function di(n){var t=a(n);return!n||t.startsWith("hidden-")||t.startsWith("link:")}function kt(n,i){return rt(n)?n:ki(n,t.getArmEndpointUri(i))}function gi(n){return{reason:n.trim(),extension:tt}}function nr(n){var t,u,r;return n?(t=a(n.extension||it),t=t===a(tt)?"":"("+t+") ",u=n.reason||"unknown",r=""+t+u,r.length<=60)?r:(t=i.replaceMany(t,{azure:"az",extension:"",microsoft:"ms"}),r=""+t+u,r.length<=60)?r:r.substr(0,57)+"...":null}function dt(n,i,r,u){n.length>t.maxBatchCallCount&&k.batchLimitExceeded();var f=n.map((function(n){return rt(n)?{httpMethod:"GET",url:n}:{httpMethod:"GET",url:n}})),e={requests:f},o=t.getAbsoluteArmUri("batch"+li,r);return b({cloudName:r,contentType:l,headers:{accept:l},isBackgroundTask:i,invokeApi:null,setAuthorizationHeader:!0,setTelemetryHeader:t.shortenTelemetryForAjax(u),
type:"POST",uri:o,data:ct(e)}).then((function(n){return(n.content||{}).responses||[]}))}function et(n,i,r,u,f,e){if(!n.length)return Q();var o=n.pop(),s=t.getAbsoluteArmUri(o,f);return b({cloudName:f,contentType:l,headers:{accept:l},isBackgroundTask:u,invokeApi:t.getArmInvokeApi(f),setAuthorizationHeader:!0,setTelemetryHeader:t.shortenTelemetryForAjax(e),type:"GET",uri:s}).then((function(t){var s=t.content,c=s&&s.value,l,h;return s?c?(l=i(c),l===!1?n=[]:(h=s.nextLink,h&&n.push(h))):r({api:o,reason:"Expected response.value not found."}):r({api:o,reason:"Expected response not found."}),et(n,i,r,u,f,e)}),(function(t){return r({api:o,reason:t}),et(n,i,r,u,f,e)}))}function tr(n,t,i,r,u){return et(n,t,i,!1,r,u)}function ir(n){var f=n.armApiOrUri,c=n.httpMethod,u=n.data,v=n.isBackgroundTask,a=n.dataType,o=n.cloudName,y=n.telemetry,p=n.useApiInvoke,w=n.filterEmptyResponse,k=n.performRetry,s=n.noBatch,d=t.getAbsoluteArmUri(f,o),r={cloudName:o,headers:{accept:l},isBackgroundTask:v,performRetry:k,invokeApi:
p!==!1?t.getArmInvokeApi(o):null,setAuthorizationHeader:!0,setTelemetryHeader:t.shortenTelemetryForAjax(y),type:c,uri:d},h;return(u&&(r.contentType=l,r.data=typeof u=="string"?u:ct(u)),w&&(r.dataFilter=function(n,t){return t==="json"&&!n?"{}":n}),a&&(r.dataType=a),h=kt("/",o),s||!rt(f)||~f.indexOf(h)||(s=!0),!s&&!!~["get","post","delete","head"].indexOf(c.toLowerCase())&&i.isEmptyObject(u))?(r.uri=f,e.batch(r,h).then((function(n){return{content:n.content,jqXHR:{responseJSON:n.content,status:n.httpStatusCode,getResponseHeader:function(t){return n.headers[t]}}}}),(function(n){throw{errorThrown:"Unavailable in batch",jqXHR:{responseJSON:n.content,responseText:n.content,status:n.httpStatusCode,getResponseHeader:function(t){return n.headers[t]}}};}))):Q(b(r))}function rr(n,i,r,u,f,e,o,s){return t.callRaw({armApiOrUri:n,httpMethod:i,data:r,dataType:"json",cloudName:u,telemetry:f,useApiInvoke:e,filterEmptyResponse:o,performRetry:s}).then((function(n){return n.content}))}function gt(n,t,i,r,u,e,o){var
s=f.apply(null,{length:n.length}).map((function(n,t){return t})),h;return n=n.slice(0),h=function(){if(n.length){var f=n.slice(0,20),c=f.map((function(n){return typeof n=="string"?n:n.uri}));return dt(c,r,u,e).then((function(r){return r.every((function(r,u){var v;r=r||{};var e=r.content||{},h=e,l=null,a=f[u];if((typeof a!="string"?a.responseIsArrayType:o)&&(h=e.value,l=e.nextLink),!e||!h||r.httpStatusCode>=400)i({api:c[u],reason:r});else{if(v=t(h,s[u]),v===!1)return n=[],!1;l&&(n.push({uri:l,responseIsArrayType:!0}),s.push(s[u]))}return!0})),n.splice(0,f.length),s.splice(0,f.length),h()}),(function(t){return i({api:f.join("|"),reason:t}),n.splice(0,f.length),s.splice(0,f.length),h()}))}return Q()},h()}function ur(n,t,i,r,u){var f=[],e=[],o=Q.defer();return gt(n,(function(n){f=f.concat(n)}),(function(n){e.push(n)}),t,i,r,u).then((function(){e.length?o.reject(e):o.resolve(f)})),o.promise}function fr(n,t){var i={assetTriplet:n,cloudName:t};return o.AssetTypes.mapAssetIdToResourceIdEndPoint.invoke(ht.client,
it,i)}function er(){return"/locations"+pt}function or(){return"/tenants?api-version=2017-08-01"}function sr(n,t,i){return ni(n,t,(function(n){return i&&i("resourcegroup eq '"+n+"'")}))}function ni(n,t,i){var r;return c.isSubscriptionId(t)?[c.parseSubscriptionDescriptor(t).subscription]:lt(t)?(r=c.parseResourceGroupDescriptor(t),i&&i(r.resourceGroup),[r.subscription]):at(t)&&!c.isTenantResource(t)?(r=vt(t),i&&i(r.resourceGroup),[r.subscription]):n||[]}function hr(n,t,u){var f=i.makeArray(n).filter((function(n){return!ei(y,(function(t){return n.cloudName===t.cloudName&&n.extensionName===t.extensionName&&n.assetType===t.assetType&&i.deepEquals(n.assetId,t.assetId)}))})),e;y.push.apply(y,f);e=f.map((function(n){var i=n;return i.reason=t,i}));r.AssetManager.hubsNotifyAssetDeletedDefinition.invoke(u||ht.client,it,e).finally((function(){Q.delay(2e3).then((function(){y.remove.apply(y,f)}))}))}function cr(){return"/subscriptions"+pt}function lr(n){return"/subscriptions/"+n+"/locations"+w}function ar(n){return"/"+
ft(n)+"/providers/microsoft.authorization/permissions?api-version="+si}function ti(n,i,r,f,e){var s;e===void 0&&(e=null);var h="eventTimestamp",c=new u.UriBuilder("/subscriptions/"+i+"/providers/microsoft.insights/eventtypes/management/"+n),o=h+" ge '"+r.toISOString()+"' and "+h+" le '"+f.toISOString()+"'";return e&&e.length&&(o=e+" and "+o),s=c.query,s.setParameter(v,t.eventsApiVersion),s.setParameter("$filter",o),c.toString()}function vr(n,t,i,r){return r===void 0&&(r=null),ti("values",n,t,i,r)}function yr(n,t,i,r){return r===void 0&&(r=null),ti("digestEvents",n,t,i,r)}function pr(n){return"/subscriptions/"+n+"/providers/microsoft.authorization/classicAdministrators"+ai}function g(n){return!!n}function ot(n,t){a(n).split(" ").forEach((function(n){n&&t.push("substringof('"+bt(n)+"', name)")}))}function p(n,t,r,u){var e=u?"ne":"eq",f=i.makeArray(t).filter(g).map((function(t){return n+" "+e+" '"+bt(a(t))+"'"})).join(" or ");f&&r.push(f)}function wr(n,t,i,r,f,e,o){var h=new u.UriBuilder("/resources"),
s=[n.map((function(n){return"subscriptionId eq '"+n+"'"})).join(" or "),],c;return ot(i,s),p("resourcegroup",e,s,o),p("location",f,s),p("resourceType",t,s),r&&s.push.apply(s,r),h.query.setParameter(v,yt),c=s.filter(g).map((function(n){return"("+n+")"})).join(" and "),c&&h.query.setParameter("$filter",c),h.toString()}function br(n,t,i,r){var e=new u.UriBuilder("/providers/"+n.resourceTypeName),f=[],o;return ot(t,f),p("location",r,f),i&&f.push.apply(f,i),e.query.setParameter(v,n.apiVersion),o=f.filter(g).map((function(n){return"("+n+")"})).join(" and "),o&&e.query.setParameter("$filter",o),e.toString()}function kr(n,t,i,r,f){var o=new u.UriBuilder("/subscriptions/"+n+"/providers/"+t.topLevelResourceTypeAlias),e=[],s;return(t.proxyRoutingFilters||[]).forEach((function(n){switch(n){case 1:ot(i,e);break;case 2:p("resourcegroup",r,e);break;case 3:p("location",f,e);break;default:fi.error("Unhandled proxy routing filter: <"+n+">")}})),o.query.setParameter(v,t.apiVersion),s=e.filter(g).map((function(n){
return"("+n+")"})).join(" and "),s&&o.query.setParameter("$filter",s),o.toString()}function dr(n){return"/subscriptions/"+n+"/resourcegroups"+w}function gr(n,t){return t?d(n)+ci:d(n)+w}function nu(n,i){var r=new u.UriBuilder(d(n)),f=r.query;return f.getParameter(v)?Q(r.toString()):t.getLatestApiVersion(r.path,i).then((function(n){return f.setParameter(v,n),r.toString()}))}function tu(n){var i,u,r,f;if(!i)for(u=n.split("/"),r=u.length-1;r;){if(f=u.slice(0,r).join("/"),t.resourceTypeApiVersionDictionary[f]){i=t.resourceTypeApiVersionDictionary[f];t.resourceTypeApiVersionDictionary[n]=i;break}r--}return i}function iu(i,r){if(lt(i))return Q.resolve(yt);if(c.isSubscriptionId(i))return Q.resolve(hi);if(at(i)){var u=vt(i),f=a(u.provider+"/"+u.types.join("/")),e;return ut||(ut=s.getAssetTypesInformation(r).then((function(n){n().forEach((function(n){var i=n.resourceType,r=n.apiVersion;i&&r&&(t.resourceTypeApiVersionDictionary[a(i)]=r)}))}))),ut.then((function(){if(e=t.resourceTypeApiVersionDictionary[f],
e)return Q(e);ri.trace({source:tt,action:"MissingApiVersion",actionModifier:f});var o=u.subscription,s=u.provider,h=(!o?"/providers/"+s:"/subscriptions/"+o+"/providers/"+s)+w,c=t.getAbsoluteArmUri(h,r);return Q(b({uri:c,invokeApi:t.getArmInvokeApi(r),type:"GET",headers:{accept:l},setAuthorizationHeader:!0,setTelemetryHeader:"getLatestApiVersion",cloudName:r})).then((function(n){var i=n&&n.content&&n.content.resourceTypes||[];return i.forEach((function(n){var i=n.apiVersions||[],f=i.first((function(n){return n&&oi.test(n)})),r=a(u.provider+"/"+n.resourceType);t.resourceTypeApiVersionDictionary[r]||(t.resourceTypeApiVersionDictionary[r]=f||i[0])})),t.resourceTypeApiVersionDictionary[f]||tu(f)||t.resourceTypeApiVersion}),(function(r){return nt.createLog(n).warning(i+" using api ver "+t.resourceTypeApiVersion+". Error "+r.responseText),t.resourceTypeApiVersion}))}))}return Q.reject("Unexpected id "+i)}function ii(n){n.httpMethod=n.httpMethod||"GET";var i=t.getAbsoluteArmUri(n.armApiOrUri,n.cloudName),
r={headers:{accept:l},setAuthorizationHeader:!0,setTelemetryHeader:t.shortenTelemetryForAjax(n.telemetry),type:n.httpMethod,uri:i};return Q(e.batch(r))}function ru(n){return ii(n).then((function(t){return n.responseFilter=n.responseFilter||function(n){if([200,202,201,204,].indexOf(n.httpStatusCode)===-1)throw r.Azure.buildSimplifiedError(n.content);},n.responseFilter(t,n.armApiOrUri),t.content}))}function uu(n){return d(n)+"/resources"+w}var u=i.Base,st=u.Constants,nt=u.Diagnostics,ht=r.Rpc,ri=nt.Telemetry,ui=u.Net2,c=i.ViewModels.Services.ResourceTypes,fi=nt.createLog(n),tt=st.ExtensionNames.Hubs,it=st.Shell,b=ui.Internal.ajaxExtended,ct=JSON.stringify,lt=c.isResourceGroupId,at=c.isResourceId,rt=u.Resources.isUriAbsolute,vt=c.parseResourceDescriptor,ei=i.find,l="application/json",oi=new RegExp("^[0-9-]+$","ig"),wt,k,ut,y;t.resourceTypeApiVersion="2014-04-01";t.eventsApiVersion="2014-04-01";var yt="2014-04-01-preview",si="2015-07-01",hi="2016-06-01",v="api-version",w="?api-version=2014-04-01-preview",
ci="?api-version=2016-09-01",li="?api-version=2015-11-01",pt="?api-version=2016-06-01",ai="?api-version=2014-07-01-preview",vi=/^((https?:)(\/\/\/?)([\w]*(?::[\w]*)?@)?([\d\w\.-]+)(?::(\d+))?)?([^?]*)?(?:(.*)?)$/i,yi=/^[\s\/\/]*|[\/\/]*$/g,pi=/\/\//g;t.maxBatchCallCount=20;wt={batchLimitExceeded:"",invalidUrlEndpoint:"",endpointNotFound:""};k=r.getErrorMap(wt);t.getArmEndpointUri=wi;t.getArmInvokeApi=bi;t.isHiddenTag=di;t.getAbsoluteArmUri=kt;t.makeResourceManagerTelemetry=gi;t.shortenTelemetryForAjax=nr;t.callBatch=dt;t.callWithContinuation=tr;t.callRaw=ir;t.call=rr;t.callBatchWithContinuation=gt;t.callBatchAndFollowContinuationTokens=ur;t.mapAssetIdFromHubs=fr;t.listLocationsApi=er;t.listTenantsApi=or;t.filterSubscriptionsByScope=sr;t.filterSubscriptionsByScopeByResourceGroup=ni;y=[];t.internalNotifyAssetDeleted=hr;t.listSubscriptions=cr;t.listSubscriptionLocationsApi=lr;t.getPermissionsApi=ar;t.getEventsApi=vr;t.getEventDigestsApi=yr;t.listClassicAdministratorsApi=pr;t.resourceTypeApiVersionDictionary=
{"aspera.transfers/services":"2016-03-25","cloudyn.analytics/accounts":"2016-03-01","conexlink.mycloudit/accounts":"2015-06-15","hive.streaming/services":"2016-03-18","microsoft.bingmaps/mapapis":"2015-07-02","microsoft.visualstudio/account/project":"2014-02-26","pokitdok.platform/services":"2016-05-17","raygun.crashreporting/apps":"2015-01-01","signiant.flight/accounts":"2015-06-29","trendmicro.deepsecurity/accounts":"2015-06-15"};t.resourcesAcrossSubscriptionsApi=wr;t.tenantResourcesApi=br;t.providerProxyResourcesApi=kr;t.resourceGroupsInSubscriptionApi=dr;t.resourceGroupApi=gr;t.resourceApi=nu;t.getLatestApiVersion=iu;t.callRawUsingBatch=ii;t.callUsingBatch=ru;t.resourcesInResourceGroupApi=uu})(c||(c={})),c}));define("HubsExtension/HubsCommon",["require","exports","f"],(function(n,t,i){"use strict";function a(){var n="HubsExtension.BrowseResources";return e||(i.Data.Metadata.setTypeMetadata(n,{idProperties:["id"]}),e=!0),n}function v(n){var i="";return n?(i=(n.status||n.state||"").toLowerCase(
),!!~[t.subscriptionEnabledStatus,t.subscriptionActiveStatus,t.subscriptionWarnedStatus,t.subscriptionPastDueStatus].indexOf(i)):!1}function y(){return r||(r={},(l.fx.environment.armSubscriptionQuotaIds||[]).forEach((function(n){r[n.toLowerCase()]=!0}))),r}function p(n,t){if(u.isResourceGroupId(n.id)||u.isSubscriptionId(n.id))return!0;if(!u.isResourceId(n.id))return!1;var e=(n.kind||"").toLowerCase(),r,f,i;return(t.kinds&&t.kinds.forEach((function(n){n.name.toLowerCase()===e&&(i=n);n.isDefault&&(f=n)})),i=i||f,r=i&&i.useResourceMenu,r!==!1&&(h(t,8)||r===!0&&h(t,16)))?!0:!1}var c=i.Assets,o=i.Base,s=o.Constants.ExtensionNames,u=i.ViewModels.Services.ResourceTypes,l=window,h=c.assetTypeInformationSupportsContract,f=i.isFeatureEnabled,r,e;t.extensionName=s.Hubs;t.marketplaceExtensionName=s.Marketplace;t.resourceGroupPartName="ResourceGroupMapPinnedPart";t.resourceGroupMapBlade="ResourceGroupMapBlade";t.resourceGroupEventsBlade="ResourceGroupEventsBlade";t.deploymentDetailsBlade="DeploymentDetailsBlade";
t.subscriptionEnabledStatus="enabled";t.subscriptionActiveStatus="active";t.subscriptionWarnedStatus="warned";t.subscriptionDisabledStatus="disabled";t.subscriptionPastDueStatus="pastdue";t.whatsNewFeedUriFormat=o.Resources.getAppRelativeUri("api/WhatsNew?count={0}");t.tagsV2Enabled=f("tagsv2");t.columnChooserV2Enabled=f("columnchooserv2");t.bulkCommandsEnabled=f("bulkcommands");e=!1;t.getBrowseEntityType=a;t.hasValidStatus=v;t.getArmSubscriptionQuotaIds=y;t.resourceUsesResourceMenu=p;t.subsLimitPerResourcesAcrossSubsCall=40}));define("HubsExtension/Common/HubsObservables",["require","exports","f","i","a","ko","HubsExtension/Common/CommonClientStrings","HubsExtension/ArmHelpers/ArmApiEndpoints","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/HubsCommon"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(t){function v(t,r){return i.require(n.normalize(t)).then((function(n){return r(n)}))}function nt(n,t){var i=(n.status||"").toLowerCase(),r=(t.status||"").toLowerCase(
);if(i!==r){if(i===k)return 1;if(r===k)return-1}return n.subscriptionName.localeCompareIgnoreCase(t.subscriptionName)||n.subscriptionID.localeCompareIgnoreCase(t.subscriptionID)}function wt(n){return u.get(n).Subscriptions.dataPromise.then((function(){return vt.getSelectedSubscriptions(p.client,n)})).then((function(t){var o;u.get(n).SelectedSubscriptions.data(t);var r=u.get(n),f=r&&r.Subscriptions,e=f&&f.data();e&&e.subscriptions&&(o=(r.SelectedSubscriptions.data()||[]).map(y),f.data({subscriptions:i.union(o.stableSort(nt),e.subscriptions.stableSort(nt),(function(n,t){return n.subscriptionID.localeCompareIgnoreCase(t.subscriptionID)===0}))}));c.trace({source:"HubsObservables",action:"InitialSelectedSubscriptions",data:{cloudName:n,count:t?t.length:-1}})}))}function ot(n){return!!n.first((function(n){return(n.authorizationSource||"").toLowerCase().indexOf("legacy")>=0}))}function bt(n,t){var i=tt(n,t);return!!i&&ot([y(i)])}function kt(){return t.getTenantsMemo().then((function(n){return n.tenants.
length}))}function dt(){t.getTenantsMemo().then((function(n){var t=n.tenants=n.tenants||[];return n}),(function(n){pt.error("Failed for tenant info: "+JSON.stringify(n));i.Hubs.Notifications.ClientNotification.publish({title:e.tenantErrorTitle,description:e.tenantErrorDescription,status:i.Hubs.Notifications.NotificationStatus.Error});var t=new HubsExtension.Azure.TenantInfo;return t.tenants=[],t.failure=!0,t})).then((function(n){w.updateTenantInfoEndPoint.invoke(p.client,b,{tenantInfo:n});et=n.tenants.length}));o.armEndpoints.forEach((function(n){var t=n.cloudName;u.set(t,{Subscriptions:{dataPromise:null,data:f.observable({subscriptions:[]}),map:{}},SelectedSubscriptions:{dataPromise:null,data:f.observable([])}});lt(t);u.get(t).SelectedSubscriptions.dataPromise=wt(t)}))}function gt(n){return u.get(n).Subscriptions.data}function ni(n){return u.get(n).Subscriptions.dataPromise}function ti(n){return u.get(n).Subscriptions.map}function tt(n,t){if(n){n=n.toUpperCase();var r=u.get(t).Subscriptions,i=
r.map;if(i)return i[n]}}function ii(n,t){return n?u.get(t).Subscriptions.dataPromise.then((function(){var r=tt(n,t);if(r)return r;throw new Error("Subscription with id "+i.ViewModels.Services.ResourceTypes.sanitizeId(n)+" not found");})):Q.reject("Invalid subscription id null")}function ri(n){return ht(n).then((function(t){return st(n).then((function(n){var r=n()||[],i=r.length;return i&&i!==t.length?i===1?r[0].uniqueDisplayName:e.multipleSubscriptionsSelectedText.format(i):e.allSubscriptionsSelectedText}))}))}function st(n){var t=u.get(n).SelectedSubscriptions;return t.dataPromise.then((function(){return t.data}))}function ui(n,t){u.get(n).SelectedSubscriptions.data(t)}function ht(n){var t=u.get(n).Subscriptions;return t.dataPromise.then((function(){return t.data().subscriptions.map(it)}))}function ct(n){return g.get(n)()}function fi(n,t){return ct(n).then((function(n){var r={};return t?n.forEach((function(n){var t=ft[n.name.toLowerCase()];t&&(r[n.name]=n.displayName)})):i.extendArrayIntoMap(r,n,(function(
n){return n.name}),(function(n){return n.displayName})),r}))}function y(n){var t=n.subscriptionPolicies;return{subscriptionName:n.displayName,subscriptionID:n.subscriptionId,tenantID:n.tenantId,status:n.state,subscriptionPolicies:t,requireRdfe:ei(t),authorizationSource:n.authorizationSource}}function ei(n){return i.getFeatureValue("rdfe")==="false"?!1:!n||!h.getArmSubscriptionQuotaIds()[(n.quotaId||"").toLowerCase()]}function lt(n){var r=Q.defer();u.get(n).Subscriptions.dataPromise=r.promise;var k=a("GetSubscriptions"),t=[],e=Q.defer();g.set(n,(function(){return e.promise}));var d=a("GetLocations"),f=[],o=p.client,tt=s.callBatchWithContinuation([s.listSubscriptions(),s.listLocationsApi()],(function(n,i){var r,u;i===0?(r=n,t=t.concat(r)):i===1&&(u=n,f=f.concat(u))}),(function(n){throw n;}),!1,n,ut("fetchSubscriptionsLocationsAndTenants"),!0);tt.then((function(){var g,tt,rt,ut;c.completeTrace(k);var ft={},ot={},st={},a=function(n,t){t=(t||"").toLowerCase();n[t]=(n[t]||0)+1};t.forEach((function(n){a(
ft,n.state);a(ot,(n.subscriptionPolicies||{}).quotaId);a(st,n.authorizationSource)}));var ht=t.length,s={subscriptions:[]},p={};ht?(v("./SubsCreditCheck",(function(n){n.checkRemainingCredit(t)})),i.isFeatureEnabled("ci")||(tt=t.filter((function(n){return n.state.toLowerCase()===h.subscriptionPastDueStatus.toLowerCase()})),tt.length&&v("./PastDueSubsCheck",(function(t){t.raiseWarningForPastDueSubs(tt,n)}))),rt=function(t){s.subscriptions=t.map(y).stableSort(nt);s.subscriptions.map(it).forEach((function(n){p[n.subscriptionId.toUpperCase()]=n}));var i=u.get(n).Subscriptions;i.data(s);i.map=p;r.resolve(null);w.updateSubscriptionInfoEndPoint.invoke(o,b,s)},ut=i.getFeatureValue("subscriptions"),ut?v("./FilterSubs",(function(n){var i=n.filterSubs(t,ut);rt(i)})):rt(t)):(l.Security.getUserInfo().then((function(t){v("./NoSubsChecks",(function(i){i.handleNoSubsInDirectory(t,et,n)}))})),g=u.get(n).Subscriptions,g.data(s),g.map=p,r.resolve(null),w.updateSubscriptionInfoEndPoint.invoke(o,b,s));c.completeTrace(d);e.
resolve(f)}))}function it(n,t,i){var f=n.subscriptionID,r=n.subscriptionName,u=n.status&&n.status.toLowerCase()===k?e.disabledSubscriptionLabelFormat.format(r):r;return i.filter((function(n){return n.subscriptionName===r})).length>1&&(u=e.subscriptionNameAndIdLabelFormat.format(u,f)),{subscriptionId:f,uniqueDisplayName:u,displayName:r,tenantId:n.tenantID,state:n.status,subscriptionPolicies:n.subscriptionPolicies,authorizationSource:n.authorizationSource}}var l=i.Base,at=l.Constants,rt=l.Diagnostics,c=rt.Telemetry,vt=r.Azure,yt=l.Resources,p=r.Rpc,w=HubsExtension.Internal.Azure,pt=rt.createLog(n),b=at.Shell,k=h.subscriptionDisabledStatus.toLowerCase(),ut=function(n){return s.makeResourceManagerTelemetry("HubsObservables."+n)},a=function(n){return c.start({source:"HubsObservables",action:n})},ft={},u,d,et,g;i.extendArrayIntoMap(ft,window.fx.environment.servicesHealthAllowedRegions||[],(function(n){return n.toLowerCase()}));u=r.getCloudMap();d=function(n){var t=a(n);return Q(l.Net2.ajax({uri:yt.
getAppRelativeUri("/api/tenants/List"),type:"POST",dataType:"json",contentType:"application/json",performRetry:!0,isBackgroundTask:!0})).then((function(n){return c.completeTrace(t),n})).catch((function(n){c.cancelTrace(t);throw n;}))};t.getTenantsMemo=i.memoizeQ((function(){if(i.isFeatureEnabled("armtenants")){var n=a("GetTenantsFromArm");return Q(s.callUsingBatch({armApiOrUri:s.listTenantsApi(),telemetry:ut("getTenants")})).then((function(t){c.completeTrace(n);var i={failure:!1,tenants:[]};return((t.value||[]).forEach((function(n){(n.domains||[]).length===1&&n.displayName&&i.tenants.push({displayName:n.displayName||"",domainName:(n.domains||[]).length===1?n.domains[0]:"",id:n.tenantId})})),i.tenants.length!==t.value.length)?d("GetTenantsFromArmFallback"):i})).catch((function(t){c.cancelTrace(n);throw t;}))}return d("GetTenants")}));g=r.getCloudMap();t.isCoadminOnAnySub=ot;t.isCoAdminOnSub=bt;t.getTenantsCount=kt;t.initializeObservables=dt;t.getSubscriptionsObservable=gt;t.getSubscriptionsPromise=
ni;t.getSubscriptionsMap=ti;t.getSubscriptionInfo=tt;t.getSubscriptionInfoPromise=ii;t.getSelectedSubscriptionsLabel=ri;t.getSelectedSubscriptions=st;t.pingSelectedSubscriptionsList=ui;t.getSubscriptions=ht;t.getLocations=ct;t.getLocationDisplayNames=fi;t.toHubsExtensionSubscription=y;t.initialize=lt;t.toMsPortalFxSubscription=it})(c||(c={})),c}));define("HubsExtension/ArmHelpers/Models/ArmResource",["require","exports","f"],(function(n,t,i){"use strict";var r;return (function(t){function o(n){var t=n.id,i,e,o,s,h;return t?(i=n.name,i||(e=t.toLowerCase(),f[e]||(u.warning("ARM returned a resource with no name: "+e),f[e]=!0),o=r.parseResourceDescriptor(t),i=o.resources.join("/")),s=!r.isTenantResource(t)&&r.buildResourceGroupIdFromResourceId(t),h={id:t,location:n.location,name:i,tags:n.tags||{},properties:n.properties||{},resourceGroup:s,type:n.type,kind:n.kind,selfLinkUri:n.selfLinkUri,plan:n.plan,managedBy:n.managedBy,sku:n.sku,identity:n.identity},h):(u.warning("ARM returned a resource with no id: "+
JSON.stringify(n)),null)}var e=i.Base.Diagnostics,r=i.ViewModels.Services.ResourceTypes,u=e.createLog(n),f={};t.toResource=o})(r||(r={})),r}));define("HubsExtension/ArmHelpers/Models/ArmResourceGroup",["require","exports","f"],(function(n,t,i){"use strict";var r;return (function(t){function f(n){if(!n.id)return u.warning("ARM returned a resource group with no id: "+JSON.stringify(n)),null;var t=n.properties||{};return{id:n.id,location:n.location,name:n.name,tags:n.tags||{},properties:t,lockState:t.lockState,provisioningState:t.provisioningState,managedBy:n.managedBy}}var r=i.Base.Diagnostics,u=r.createLog(n);t.toResourceGroup=f})(r||(r={})),r}));define("HubsExtension/_generated/ExtensionDefinition",["require","exports","i","HubsExtension/Tags/TagsClientStrings","HubsExtension/ServicesHealth/ServicesHealthClientStrings","HubsExtension/ResourceMap/ResourceMapClientStrings","HubsExtension/Locks/LocksClientStrings","HubsExtension/ClassicAdmins/ManagementTeamClientStrings","HubsExtension/Browse/BrowseClientStrings",
"HubsExtension/MoveResource/MoveResourceStrings"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function a(){var w=l.createGalleryServiceDefinition,b=l.createAssetIdSource,k=l.createPermission,v=l.createCommandGroupDefinition,c=l.createPartReferenceDefinition3,a=l.createPartInstanceDefinition,p=l.createDetailsDefinition2,n=l.createReference,i=l.createInputBinding,y=l.createCommandDefinition,d=l.createDefinition3;return d(t,[y("MoveResourceCommand",h.moveResourceCommandText,"MoveResource$MoveResourceCommandVM",[i("resourceId",[n(1,"resourceId")],!1)],p(t,t,t,[i(t,[n(4,"container.selectable")],!1)],t,t,t,[i("actionBarOutput",[n(1,"actionBarOutput")],!1)]),t,t,t,2)],[a("Browse",c("BrowseAllResourcesPinnedPart",t,t,[],4),t,!1),a("ServicesHealthPartStart",c("ServicesHealthPart",t,t,[],1),t,!1),a("GalleryTileStart",c("GalleryTile",t,t,[i("selectedMenuItemId",[n(5,"constant_",t,t,t,"")],!0)],2),t,!1),a("HelpAndSupport",c("HelpAndSupportPart",t,t,[],2),t,!1),a("GettingStarted",
c("GettingStartedPart",t,t,[],5,5,4),t,!1),a("AzureProjectGettingStarted",c("AzureProjectGettingStartedPart",t,t,[],3),t,!1),a("Diagnostics",c("DiagnosticsTile",t,t,[],0),t,!1),a("TourTileStart",c("TourTile",t,t,[],2),t,!1),a("Settings",c("SettingsBladePart",t,t,[],1),t,!1),a("BillingTileStart",c("SubscriptionsTile",t,t,[],0),t,!1),a("WhatsNewTileStart",c("WhatsNewTile",t,t,[],2),t,!1),a("FeedbackTileStart",c("FeedbackTile",t,t,[],1),t,!1),a("AzurePortalTileStart",c("AzurePortalTile",t,t,[],1),t,!1)],[v("RecentResourceBrowseGrid2Commands",[y("DiscardRecentResource",s.discardRecentItem,"BrowseGrid2$DiscardRecentResourceCommand",[i("id",[n(1,"id")],!1)],t,t,t,t,0)]),v("serviceCommandGroup",[]),v("ManagementTeamCommandGroup",[y("ManageUsersCommand",o.manageUsersCommandText,"ClassicAdmins$ManageUsersCommand",[],t,t,t,t,1)]),v("LockCommands",[y("Delete",e.delete,"Locks$DeleteLockCommandViewModel",[i("id",[n(1,"id")],!1)],t,t,t,t,0)]),v("MoveResourceCommands",[y("MoveResourceCommand",h.moveResourceCommandText,
"MoveResource$MoveResourceCommandVM",[i("resourceId",[n(1,"resourceId")],!1)],p(t,t,t,[i(t,[n(4,"container.selectable")],!1)],t,t,t,[i("actionBarOutput",[n(1,"actionBarOutput")],!1)]),t,t,t,2)]),v("ResourceGroupBrowseCommands",[y("OpenResourceGroupDeleteBlade",f.deleteResourceGroupCommandTitle,"ResourceMap$DeleteResourceGroupCommandViewModel",[i("resourceGroup",[n(1,"id")],!1)],p("ResourceGroupDeleteBladeForCommand",t,t,t,t,t,[i("resourceGroup",[n(4,"content.resourceGroup")],!1)],[i("actionBarOutput",[n(1,"actionBarOutput")],!1)]),"ResourceGroups","resourceGroup",[k(t,"ResourceGroups",b(0,"resourceGroup"),"Microsoft.Resources/subscriptions/resourceGroups/delete",0)],2)]),v("ServiceHealth",[y(t,u.ServiceHealth.uriCommandTitle,"ServicesHealth$PublicShdUriCommand",[],t,t,t,t,1)]),v("AddTagCommandGroup",[y("AddTagCommand",r.addCommandText,"Tags$SaveTagCommand",[],t,t,t,t,0)]),v("TagItemCommandGroup",[y("DeleteTagCommand",r.deleteCommandText,"Tags$DeleteTagCommand",[i("key",[n(1,"key")],!1),
i("value",[n(1,"value")],!1),i("resourceId",[n(1,"resourceId")],!1),i("allowEdits",[n(1,"allowEdits")],!1)],t,t,t,t,0)]),v("MoveResourceBladeCommands",[y(t,h.moveDocLabel,"MoveResource$LearnMoreCommandVM",[],t,t,t,t,1)])],{},t,w("Deployments$CustomDeploymentBladeSelector"),t,"HubsExtension","1.0","47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=%","1.0.0.2","5.0.302.1018 (production#b3ce237549.180222-1406)")}var t=undefined,l=i.DefinitionBuilder,v,c,y,p,w;n.definitionName="HubsExtension";n.getDefinition=a,(function(n){var t,i,r,u,f,e,o;(function(n){n.name="Microsoft_Azure_Insights"})(t=n.Microsoft_Azure_Insights||(n.Microsoft_Azure_Insights={})),(function(n){n.name="Microsoft_Azure_Monitoring";var t;(function(n){var t,i,r,u;(function(n){n.name="EventsBrowseBlade"})(t=n.EventsBrowseBlade||(n.EventsBrowseBlade={})),(function(n){n.name="DiagnosticsLogsBlade"})(i=n.DiagnosticsLogsBlade||(n.DiagnosticsLogsBlade={})),(function(n){n.name="AlertsBlade"})(r=n.AlertsBlade||(n.AlertsBlade={})),(function(n){
n.name="MetricsBladeV2"})(u=n.MetricsBladeV2||(n.MetricsBladeV2={}))})(t=n.Blades||(n.Blades={}))})(i=n.Microsoft_Azure_Monitoring||(n.Microsoft_Azure_Monitoring={})),(function(n){n.name="Microsoft_Azure_Resources";var t;(function(n){var t,i,r;(function(n){n.name="QuotasBlade";var t;(function(n){n.bladeInputs="bladeInputs"})(t=n.Inputs||(n.Inputs={}))})(t=n.QuotasBlade||(n.QuotasBlade={})),(function(n){n.name="ArmPolicyBlade";var t;(function(n){n.bladeInputs="bladeInputs"})(t=n.Inputs||(n.Inputs={}))})(i=n.ArmPolicyBlade||(n.ArmPolicyBlade={})),(function(n){n.name="ArmPolicyAddBlade"})(r=n.ArmPolicyAddBlade||(n.ArmPolicyAddBlade={}))})(t=n.Blades||(n.Blades={}))})(r=n.Microsoft_Azure_Resources||(n.Microsoft_Azure_Resources={})),(function(n){n.name="Microsoft_Azure_Marketplace";var t;(function(n){var t,i;(function(n){var t,i;n.name="GalleryFeaturedMenuItemBlade",(function(n){n.selectedMenuItemId="selectedMenuItemId"})(t=n.Inputs||(n.Inputs={})),(function(n){n.resetMenuId="resetMenuId";n.createTriggeredSignal=
"createTriggeredSignal"})(i=n.Outputs||(n.Outputs={}))})(t=n.GalleryFeaturedMenuItemBlade||(n.GalleryFeaturedMenuItemBlade={})),(function(n){var t,i;n.name="GalleryResultsListBlade",(function(n){n.selectedSubMenuItemId="selectedSubMenuItemId"})(t=n.Inputs||(n.Inputs={})),(function(n){n.inlineGalleryCreateOutputs="inlineGalleryCreateOutputs"})(i=n.Outputs||(n.Outputs={}))})(i=n.GalleryResultsListBlade||(n.GalleryResultsListBlade={}))})(t=n.Blades||(n.Blades={}))})(u=n.Microsoft_Azure_Marketplace||(n.Microsoft_Azure_Marketplace={})),(function(n){n.name="Microsoft_Azure_Billing";var t;(function(n){var t,i,r,u;(function(n){n.name="SubscriptionsBlade"})(t=n.SubscriptionsBlade||(n.SubscriptionsBlade={})),(function(n){n.name="AccountBlade"})(i=n.AccountBlade||(n.AccountBlade={})),(function(n){n.name="BillingNoSubscriptionsBlade"})(r=n.BillingNoSubscriptionsBlade||(n.BillingNoSubscriptionsBlade={})),(function(n){n.name="UpgradeSubscriptionBlade";var t;(function(n){n.subscriptionId="subscriptionId"})(t=n.Inputs||
(n.Inputs={}))})(u=n.UpgradeSubscriptionBlade||(n.UpgradeSubscriptionBlade={}))})(t=n.Blades||(n.Blades={}))})(f=n.Microsoft_Azure_Billing||(n.Microsoft_Azure_Billing={})),(function(n){n.name="Microsoft_Azure_Policy";var t;(function(n){var t,i,r,u;(function(n){n.name="ArmPolicyBlade";var t;(function(n){n.bladeInputs="bladeInputs"})(t=n.Inputs||(n.Inputs={}))})(t=n.ArmPolicyBlade||(n.ArmPolicyBlade={})),(function(n){n.name="AssignmentBlade"})(i=n.AssignmentBlade||(n.AssignmentBlade={})),(function(n){n.name="EditPolicySetDefinitionBlade";var t;(function(n){n.id="id"})(t=n.Inputs||(n.Inputs={}))})(r=n.EditPolicySetDefinitionBlade||(n.EditPolicySetDefinitionBlade={})),(function(n){n.name="PolicyMenuBlade"})(u=n.PolicyMenuBlade||(n.PolicyMenuBlade={}))})(t=n.Blades||(n.Blades={}))})(e=n.Microsoft_Azure_Policy||(n.Microsoft_Azure_Policy={})),(function(n){n.name="Microsoft_Azure_AD";var t;(function(n){var t,i,r,u;(function(n){var t,i;n.name="SelectMember",(function(n){n.collectorBindingInternals_inputs="collectorBindingInternals-inputs";
n.collectorBindingInternals_errors="collectorBindingInternals-errors";n.stepInput="stepInput"})(t=n.Inputs||(n.Inputs={})),(function(n){n.collectorBindingInternals_outputs="collectorBindingInternals-outputs";n.collectorBindingInternals_commit="collectorBindingInternals-commit";n.stepOutput="stepOutput"})(i=n.Outputs||(n.Outputs={}))})(t=n.SelectMember||(n.SelectMember={})),(function(n){n.name="SelectMemberV3";var t;(function(n){n.title="title";n.subtitle="subtitle"})(t=n.Inputs||(n.Inputs={}))})(i=n.SelectMemberV3||(n.SelectMemberV3={})),(function(n){n.name="RolesListBlade";var t;(function(n){n.scope="scope"})(t=n.Inputs||(n.Inputs={}))})(r=n.RolesListBlade||(n.RolesListBlade={})),(function(n){n.name="UserAssignmentsBlade";var t;(function(n){n.scope="scope"})(t=n.Inputs||(n.Inputs={}))})(u=n.UserAssignmentsBlade||(n.UserAssignmentsBlade={}))})(t=n.Blades||(n.Blades={}))})(o=n.Microsoft_Azure_AD||(n.Microsoft_Azure_AD={}))})(v=n.External||(n.External={})),(function(n){var t,i,r,u,f,e,o,s,h,c,l,a,v,
y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht;(function(n){n.name="ArmExplorer"})(t=n.ArmExplorer||(n.ArmExplorer={})),(function(n){n.name="NonAssetResource"})(i=n.NonAssetResource||(n.NonAssetResource={})),(function(n){n.name="BrowseInstanceLink"})(r=n.BrowseInstanceLink||(n.BrowseInstanceLink={})),(function(n){n.name="BrowseResource"})(u=n.BrowseResource||(n.BrowseResource={})),(function(n){n.name="BrowseAllResources"})(f=n.BrowseAllResources||(n.BrowseAllResources={})),(function(n){n.name="BrowseRecentResources"})(e=n.BrowseRecentResources||(n.BrowseRecentResources={})),(function(n){n.name="BrowseResourceGroup"})(o=n.BrowseResourceGroup||(n.BrowseResourceGroup={})),(function(n){n.name="ActiveDirectoryMfaPlaceholder"})(s=n.ActiveDirectoryMfaPlaceholder||(n.ActiveDirectoryMfaPlaceholder={})),(function(n){n.name="ActiveDirectoryRmsPlaceholder"})(h=n.ActiveDirectoryRmsPlaceholder||(n.ActiveDirectoryRmsPlaceholder={})),(function(n){n.name="BackupPlaceholder"})(c=n.BackupPlaceholder||(n.BackupPlaceholder={})
),(function(n){n.name="BizTalkServicePlaceholder"})(l=n.BizTalkServicePlaceholder||(n.BizTalkServicePlaceholder={})),(function(n){n.name="CdnPlaceholder"})(a=n.CdnPlaceholder||(n.CdnPlaceholder={})),(function(n){n.name="MarketplaceAddOnPlaceholder"})(v=n.MarketplaceAddOnPlaceholder||(n.MarketplaceAddOnPlaceholder={})),(function(n){n.name="MediaServicePlaceholder"})(y=n.MediaServicePlaceholder||(n.MediaServicePlaceholder={})),(function(n){n.name="SiteRecoveryPlaceholder"})(p=n.SiteRecoveryPlaceholder||(n.SiteRecoveryPlaceholder={})),(function(n){n.name="StorSimplePlaceholder"})(w=n.StorSimplePlaceholder||(n.StorSimplePlaceholder={})),(function(n){n.name="StreamAnalyticsPlaceholder"})(b=n.StreamAnalyticsPlaceholder||(n.StreamAnalyticsPlaceholder={})),(function(n){n.name="AccountPortalSearchResult"})(k=n.AccountPortalSearchResult||(n.AccountPortalSearchResult={})),(function(n){n.name="BrowseAll"})(d=n.BrowseAll||(n.BrowseAll={})),(function(n){n.name="BrowseAllWithType"})(g=n.BrowseAllWithType||(n.BrowseAllWithType=
{})),(function(n){n.name="BrowseService"})(nt=n.BrowseService||(n.BrowseService={})),(function(n){n.name="BrowseDynamicAsset"})(tt=n.BrowseDynamicAsset||(n.BrowseDynamicAsset={})),(function(n){n.name="BrowseDynamicResource"})(it=n.BrowseDynamicResource||(n.BrowseDynamicResource={})),(function(n){n.name="Dashboard"})(rt=n.Dashboard||(n.Dashboard={})),(function(n){n.name="WhatsNew"})(ut=n.WhatsNew||(n.WhatsNew={})),(function(n){n.name="Deployments"})(ft=n.Deployments||(n.Deployments={})),(function(n){n.name="ResourceGroups";var t;(function(n){n.read="Microsoft.Resources/subscriptions/resourceGroups/read";n.deleteObject="Microsoft.Resources/subscriptions/resourceGroups/delete";n.write="Microsoft.Resources/subscriptions/resourceGroups/write";n.writeDeployments="Microsoft.Resources/subscriptions/resourceGroups/deployments/write";n.readDeployments="Microsoft.Resources/subscriptions/resourceGroups/deployments/read";n.readEvents="Microsoft.Insights/events/read"})(t=n.Permissions||(n.Permissions={}))})(et=n.
ResourceGroups||(n.ResourceGroups={})),(function(n){n.name="ResourceGroupEvents"})(ot=n.ResourceGroupEvents||(n.ResourceGroupEvents={})),(function(n){n.name="Settings"})(st=n.Settings||(n.Settings={})),(function(n){n.name="Tag"})(ht=n.Tag||(n.Tag={}))})(c=n.AssetTypes||(n.AssetTypes={})),(function(n){n.armExplorer=c.ArmExplorer.name;n.nonAssetResource=c.NonAssetResource.name;n.browseInstanceLink=c.BrowseInstanceLink.name;n.browseResource=c.BrowseResource.name;n.browseAllResources=c.BrowseAllResources.name;n.browseRecentResources=c.BrowseRecentResources.name;n.browseResourceGroup=c.BrowseResourceGroup.name;n.activeDirectoryMfaPlaceholder=c.ActiveDirectoryMfaPlaceholder.name;n.activeDirectoryRmsPlaceholder=c.ActiveDirectoryRmsPlaceholder.name;n.backupPlaceholder=c.BackupPlaceholder.name;n.bizTalkServicePlaceholder=c.BizTalkServicePlaceholder.name;n.cdnPlaceholder=c.CdnPlaceholder.name;n.marketplaceAddOnPlaceholder=c.MarketplaceAddOnPlaceholder.name;n.mediaServicePlaceholder=c.MediaServicePlaceholder.
name;n.siteRecoveryPlaceholder=c.SiteRecoveryPlaceholder.name;n.storSimplePlaceholder=c.StorSimplePlaceholder.name;n.streamAnalyticsPlaceholder=c.StreamAnalyticsPlaceholder.name;n.accountPortalSearchResult=c.AccountPortalSearchResult.name;n.browseAll=c.BrowseAll.name;n.browseAllWithType=c.BrowseAllWithType.name;n.browseService=c.BrowseService.name;n.browseDynamicAsset=c.BrowseDynamicAsset.name;n.browseDynamicResource=c.BrowseDynamicResource.name;n.dashboard=c.Dashboard.name;n.whatsNew=c.WhatsNew.name;n.deployments=c.Deployments.name;n.resourceGroups=c.ResourceGroups.name;n.resourceGroupEvents=c.ResourceGroupEvents.name;n.settings=c.Settings.name;n.tag=c.Tag.name})(y=n.AssetTypeNames||(n.AssetTypeNames={})),(function(n){n.armExplorerBlade="ArmExplorerBlade";n.unauthorizedAssetBlade="UnauthorizedAssetBlade";n.notFoundAssetBlade="NotFoundAssetBlade";n.unavailableAssetBlade="UnavailableAssetBlade";n.noCreateFlowBlade="NoCreateFlowBlade";n.resources="Resources";n.browseAllResourcesBlade="BrowseAllResourcesBlade";
n.browseResourceBlade="BrowseResourceBlade";n.browseInstanceLinkBlade="BrowseInstanceLinkBlade";n.browseResourceGroupBlade="BrowseResourceGroupBlade";n.browseRecentResourcesBlade="BrowseRecentResourcesBlade";n.mapResourceGroupBlade="MapResourceGroupBlade";n.resourceProperties="ResourceProperties";n.browseLinkBlade="BrowseLinkBlade";n.resourceGroupPickerV3Blade="ResourceGroupPickerV3Blade";n.browseAllBlade="BrowseAllBlade";n.browseAllBladeWithType="BrowseAllBladeWithType";n.browseServiceBlade="BrowseServiceBlade";n.browseDynamicAssetBlade="BrowseDynamicAssetBlade";n.browseDynamicResourceBlade="BrowseDynamicResourceBlade";n.managementTeamBlade="ManagementTeamBlade";n.dashboardBlade="DashboardBlade";n.deployToAzure="DeployToAzure";n.deployFromTemplateBlade="DeployFromTemplateBlade";n.parametersEditorBlade="ParametersEditorBlade";n.parametersFileEditorBlade="ParametersFileEditorBlade";n.templateEditorBlade="TemplateEditorBlade";n.templateViewerBlade="TemplateViewerBlade";n.errorDetailsBlade=
"ErrorDetailsBlade";n.armActionsContextPane="ArmActionsContextPane";n.armActionsResultJsonBlade="ArmActionsResultJsonBlade";n.armDataContextPane="ArmDataContextPane";n.armDataJsonBlade="ArmDataJsonBlade";n.armDataResultJsonBlade="ArmDataResultJsonBlade";n.gettingStartedBlade="GettingStartedBlade";n.whatsNewBlade="WhatsNewBlade";n.noSubscriptionsBlade="NoSubscriptionsBlade";n.noMsdnOfferOnSubscriptionsBlade="NoMsdnOfferOnSubscriptionsBlade";n.subCertsBlade="SubCertsBlade";n.locationPickerV3Blade="LocationPickerV3Blade";n.locksBlade="LocksBlade";n.lockEditBlade="LockEditBlade";n.moveResourceBlade="MoveResourceBlade";n.regionPickerBlade="RegionPickerBlade";n.resourceGroupPickerBlade="ResourceGroupPickerBlade";n.createResourceGroupBlade="CreateResourceGroupBlade";n.subscriptionPickerBlade="SubscriptionPickerBlade";n.createEmptyResourceGroupBlade="CreateEmptyResourceGroupBlade";n.deploymentsListBlade="DeploymentsListBlade";n.deploymentDetailsBlade="DeploymentDetailsBlade";n.deploymentOperationPropertiesBlade=
"DeploymentOperationPropertiesBlade";n.resourceGroupQuickStartBlade="ResourceGroupQuickStartBlade";n.resourceGroupEventsBlade="ResourceGroupEventsBlade";n.resourceGroupCostsBlade="ResourceGroupCostsBlade";n.resourceGroupDeleteBlade="ResourceGroupDeleteBlade";n.resourceGroupDeleteBladeForCommand="ResourceGroupDeleteBladeForCommand";n.resourceMenuBlade="ResourceMenuBlade";n.servicesHealthBlade="ServicesHealthBlade";n.settingsBlade="SettingsBlade";n.languageSelectionBlade="LanguageSelectionBlade";n.localeSelectionBlade="LocaleSelectionBlade";n.myAccessBlade="MyAccessBlade";n.rPStatusBlade="RPStatusBlade";n.azureProvisioningResultsBlade="AzureProvisioningResultsBlade";n.subscriptionPickerV3Blade="SubscriptionPickerV3Blade";n.resourcesWithTagBlade="ResourcesWithTagBlade";n.resourceTagsListBlade="ResourceTagsListBlade";n.subscriptionTagsListBlade="SubscriptionTagsListBlade";n.bulkDeleteBlade="BulkDeleteBlade";n.chooseColumnsBlade="ChooseColumnsBlade";n.resourceGroupMapBlade="ResourceGroupMapBlade";
n.assignTagsBlade="AssignTagsBlade";n.editTagsBlade="EditTagsBlade";n.clockContextPane="ClockContextPane";n.videoContextPane="VideoContextPane";n.markdownContextPane="MarkdownContextPane";n.armErrorsBlade="ArmErrorsBlade"})(p=n.BladeNames||(n.BladeNames={})),(function(n){n.recentResourceBrowseGrid2Commands="RecentResourceBrowseGrid2Commands";n.serviceCommandGroup="serviceCommandGroup";n.managementTeamCommandGroup="ManagementTeamCommandGroup";n.lockCommands="LockCommands";n.moveResourceCommands="MoveResourceCommands";n.resourceGroupBrowseCommands="ResourceGroupBrowseCommands";n.serviceHealth="ServiceHealth";n.addTagCommandGroup="AddTagCommandGroup";n.tagItemCommandGroup="TagItemCommandGroup"})(w=n.CommandGroupNames||(n.CommandGroupNames={}))})(c||(c={})),c}));define("HubsExtension/Common/CloudNameHelpers",["require","exports","f","i","HubsExtension/_generated/ExtensionDefinition","HubsExtension/Common/AssetTypeCache"],(function(n,t,i,r,u,f){"use strict";var e;return (function(t){function h(n,t)
{if(!s.readFromInputs(t))return s.addToModel(n,t)}function c(n,t){t.detailBladeInputs=t.detailBladeInputs||{};h(n,t.detailBladeInputs)}function a(n,t){var r=t,h=t.detailBlade,l=t.assetType,u=t.resourceId,s;return h||l?(t.extension&&t.extension.toLowerCase()!==e?r.cloudName=n:c(n,r),Q(r)):u?(s=void 0,s=o.isResourceGroupId(u)?i.Base.Constants.ResourceTypes.ResourceGroups:o.buildResourceTypeFromResourceId(u),f.getResourceTypeAssetTypeInformation(s,n).then((function(t){return t.lowerCaseExtension===e?c(n,r):r.cloudName=n,r}))):Q(t)}function v(n,t){var i=t;return i.extensionName&&i.extensionName.toLowerCase()!==e?i.cloudName=n:(i.parameters=i.parameters||{},h(n,i.parameters)),i}var l=i.Base.Diagnostics,o=i.ViewModels.Services.ResourceTypes,s=r.Extension.CloudName,e=u.definitionName.toLowerCase(),y=l.createLog(n);t.addCloudNameToDynamicSelection=a;t.addCloudNameToBladeReference=v})(e||(e={})),e}));define("HubsExtension/Notifications/EventSubscriptionService",["require","exports","f"],(function(n,
t,i){"use strict";var r;return (function(n){function o(n,r,u){if(!n.operationNameRegex&&!n.source&&!n.status&&!n.subStatus)throw new Error("At least one criteria must be specified.");var f=i.getUniqueId();return t.push({cookie:f,criteria:n,callback:r,eventLimit:u}),f}function s(n){var i=t.filter((function(t){return t.cookie!==n}));t=i}function r(n,t){return!n==!t&&n.toLowerCase()===t.toLowerCase()}function h(n,t){var i=t.operationNameRegex,u;if(i&&(u=new RegExp(i,"ig"),!u.test(n.operationName)))return!1;var f=t.source,o=t.status,s=t.subStatus;return f&&!r(n.source,f)||o&&!r(n.status,o)||!e(s)&&!r(n.subStatus,s)?!1:!0}function f(n,i){var r=t.slice();r.forEach((function(t){var r=[];n.forEach((function(n){h(n,t.criteria)&&r.push(n)}));t.callback(r.slice(0,t.eventLimit||r.length),i)}))}function c(n){var t="microsoft.resources",e=t+"/subscriptions/resourcegroups",i="/delete",r=function(n,i,r){f([{operationName:r,status:"succeeded",source:t,correlationId:null,timestamp:new Date,assetId:n,isLocalEvent:
!0}],i)};return n.forEach((function(n){u.isResourceGroupId(n.assetId)?r(n.assetId,n.cloudName,e+i):u.isResourceId(n.assetId)&&r(n.assetId,n.cloudName,i)})),Q(!0)}var u=i.ViewModels.Services.ResourceTypes,e=i.isNullOrUndefined,t=[];n.subscribeToArmEvent=o;n.removeArmEventSubscription=s;n.matchEvents=f;n.createResourceDeletedEvent=c})(r||(r={})),r}));define("HubsExtension/Common/AssetViewModelCommon",["require","exports","f","i","o"],(function(n,t,i,r){"use strict";var u;return (function(n){function o(n,i,r){var e={type:l.ViewModel,name:n.viewModel,initialState:null,createSelectable:!1};return r&&(e.earlyExecTasks=r),u.getViewModelsDefinition.acquireObject(h.client,u.getWindowId({name:n.extensionName,cloudName:i}),e).then((function(i){var r=new t(n,i,function(){delete f[n.resourceType]});return f[n.resourceType]=r,r}))}function a(n,t){return o(n,t)}function v(n,t,i){return o(n,t,i)}var s=i.Base,h=r.Rpc,c=i.Assets,u=r.Extension,l=s.Constants.ViewModelTypes,f={},e=(function(){function n(n,t){this._acquiredObject=
n;this._onDispose=t}return n.prototype.getValue=function(){return this._acquiredObject.getValue()},n.prototype.dispose=function(){this._onDispose&&this._onDispose();i.disposeViewModelProperties(this.getValue());this._acquiredObject.dispose()},n})(),t;n.AcquiredObjectWrapperImpl=e;t=(function(n){function t(t,i,r){n.call(this,i,r);this._assetTypeInformation=t}return __extends(t,n),t.prototype._getContentForContract=function(n){return c.assetTypeInformationSupportsContract(this._assetTypeInformation,n)?this.getValue().content:null},t.prototype.getBrowseConfigContract=function(){return this._getContentForContract(2)},t.prototype.getSupplementalDataContract=function(){return this._getContentForContract(4)},t.prototype.getResourceMenuConfigContract=function(){return this._getContentForContract(8)},t.prototype.getProvidesResourcesContract=function(){return this._getContentForContract(64)},t})(e);n.AssetTypeViewModelWrapperImpl=t;n.getAssetTypeViewModel=a;n.getAssetTypeViewModelAndExec=v})(u||(u={
})),u}));define("HubsExtension/ResourceMap/ResourceMapCommon",["require","exports","f","i","ko","HubsExtension/ResourceMap/ResourceMapClientStrings","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/ArmHelpers/Models/ArmResource","HubsExtension/ArmHelpers/Models/ArmResourceGroup","HubsExtension/Common/AssetViewModelCommon","HubsExtension/Common/HubsObservables"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(t){function l(n){return n.toLowerCase()}function ot(n,t){var i={};return w(n,(function(r){var e=t&&typeof n[r]=="object"&&n[r],f=n[r];i[r]=u.observable(e?ot(f):f)})),i}function b(n,t){return l((t||"")+":"+n)}function st(t){return i.require(n.normalize("../ArmHelpers/ArmApis")).then((function(n){return t(n)}))}function ci(n){var t=i.getUniqueId();return v[t]=n,t}function li(n){v[n]&&delete v[n]}function ai(n,t){w(v,(function(i,r){r.resourceGroupDeleteStarted(n,t)}))}function vi(n,t){w(v,(function(i,r){r.resourceGroupDeleteFailed(n,t)}))}function yi(n,t,i){if(t){var
r=t,u=r.subscriptionId||r.subscriptionID;return at.Internal.validateResourceGroupName(n,u,i,null,(function(){return tt(ut(ri.buildResourceGroupIdFromSubscriptionAndResourceGroupName(u,n)),"HEAD",undefined,i,et("validateResourceGroupName")).then((function(){return vt(ii.ResourceGroup.Validation.alreadyExistsMessage.format(r.displayName||r.subscriptionName||u))}),(function(){return vt()}))}))}return at.Internal.validateResourceGroupName(n,null,i)}function ni(n,t,i,r){return rt(e.callRaw({armApiOrUri:t,httpMethod:n,isBackgroundTask:!1,cloudName:i,telemetry:r}).then((function(n){var t=n.jqXHR;return{status:t.status,operationId:t.getResponseHeader("Location"),retryAfterInSeconds:parseInt(t.getResponseHeader("Retry-After"))}})),r)}function rt(n,t){var i=Q(n);return i.catch((function(n){var i=p(r.Azure.buildSimplifiedError(n&&n.jqXHR||n),t,!0),u=i.stack;if(t.extension&&t.extension!==d.ExtensionNames.Hubs)throw u?k.Diagnostics.createIgnoreUnhandledRejectionError(i.message,u):k.Diagnostics.createIgnoreUnhandledRejectionError(
i.message);else throw i;}))}var ct=i.Azure,k=i.Base,d=k.Constants,ti=d.AssetNames,g=d.ResourceTypes,y=k.Images.StatusBadge,ii=i.Resources.Strings,lt=i.ViewModels,ri=lt.Services.ResourceTypes,a=ct.ResourceManager.DeploymentStates,at=ct.ResourceGroups,ei,ht,it,oi,si,hi,v;t.resourceGroupsTypeKey=l(g.ResourceGroups);t.recentResourcesTypeKey=l(g.RecentResources);t.allResourcesTypeKey=l(g.AllResources);t.subscriptionsTypeKey=l(g.Subscriptions);t.resourceGroupAssetType=ti.ResourceGroups;var nt=u.utils.peekObservable,p=i.extend,ui=404,w=i.forEachKey,ut=e.resourceGroupApi,fi=e.resourceApi,tt=e.call,vt=lt.getValidationResult,ft=Q.isRejected,et=function(n){return e.makeResourceManagerTelemetry(n+"ResourceMap")},yt=a.Running,pt=a.Deploying,wt=a.Accepted,bt=a.Canceled,kt=a.Failed,dt=a.Deleting,gt=a.Succeeded;t.deploymentStatusIconLookup={};t.deploymentStatusIconLookup[yt]=t.deploymentStatusIconLookup[pt]=t.deploymentStatusIconLookup[wt]=t.deploymentStatusIconLookup[a.Waiting]=y.Pending();t.deploymentStatusIconLookup[
bt]=y.Canceled();t.deploymentStatusIconLookup[kt]=y.Error();t.deploymentStatusIconLookup[dt]=y.Disabled();t.deploymentStatusIconLookup[gt]=y.Success();t.deploymentStatusDisplayTextLookup={};t.deploymentStatusDisplayTextLookup[yt]=t.deploymentStatusDisplayTextLookup[pt]=f.deploymentRunningState;t.deploymentStatusDisplayTextLookup[wt]=f.deploymentAcceptedState;t.deploymentStatusDisplayTextLookup[bt]=f.deploymentCanceledState;t.deploymentStatusDisplayTextLookup[kt]=f.deploymentFailedState;t.deploymentStatusDisplayTextLookup[dt]=f.deploymentDeletingState;t.deploymentStatusDisplayTextLookup[gt]=f.deploymentSucceededState;t.DeleteResourceGroupConfigType="ResourceGroupDeleteWarningPartViewModel_DeleteResourceGroupConfig";i.Data.Metadata.setTypeMetadata(t.DeleteResourceGroupConfigType,{name:t.DeleteResourceGroupConfigType,properties:{resourceGroup:null,resourceGroupName:null},entityType:!0}),(function(n){n.ResourceMap="ResourceMap";var t;(function(n){n.OpenedBlade="OpenedBlade";n.ResultOpened="ResultOpened"}
)(t=n.Action||(n.Action={}))})(ei=t.Telemetry||(t.Telemetry={}));ht=1e4;it=(function(){function n(n){this._cache={};this._timeout=n}return n.prototype.store=function(n,t){return this._cache[n]={value:t,accessTime:Date.now()},t},n.prototype.remove=function(n){delete this._cache[n]},n.prototype.fetch=function(n){var t=this._cache[n];if(t){if(t.accessTime>=Date.now()-this._timeout)return t.value;delete this._cache[n]}return},n.prototype.touch=function(n){var t=this._cache[n];t&&(t.accessTime=Date.now())},n.prototype.trim=function(){var n=this;this._trimPromise&&this._trimPromise.isPending||(this._trimPromise=Q.delay(100).then((function(){var t=Date.now()-n._timeout;w(n._cache,(function(i,r){r.accessTime<t&&delete n._cache[i]}))})))},n.prototype.flushCache=function(){this._cache={}},n.prototype.flushCacheWithPrefix=function(n){var t=this;w(this._cache,(function(i){i.startsWith(n)&&delete t._cache[i]}))},n})();t.Cache=it,(function(n){function f(n,u,f,e,o){var c=b(n,u),h,l;return(i.trim(),h=i.fetch(c),
h&&!ft(h)&&!e)?h:(l=rt(tt(ut(n,o),"GET",null,u,f).then((function(t){return t.id=t.id||n,s.toResourceGroup(t)})),f),i.store(c,l).catch((function(i){i&&i.status===ui&&r.AssetManager.notifyAssetDeleted(t.resourceGroupAssetType,n,d.ExtensionNames.Hubs,u);throw i;})))}function h(n,t,i,r){return f(n,t,i,r).then((function(n){return c.getLocationDisplayNames(t).then((function(t){return e(n,t)}))}))}function a(n,t,i,r){return f(n,t,i,r).then((function(n){var i=ot(n,!0);return c.getLocationDisplayNames(t).then((function(n){return o(i,n)}))}))}function v(n){n?i.flushCacheWithPrefix(n+":"):i.flushCache()}function y(n,t){var r=b(n,t);i.remove(r)}function w(n,t){return ni("DELETE",ut(n),t,et("deleteResourceGroup"))}function e(n,t){var i=n.location||"";return p({locationString:t[l(i)]||i},n)}function o(n,t){var i=nt(n.location)||"";return p({locationString:u.observable(t[l(i)]||i)},n)}var i=new it(ht);n.getResourceGroup=f;n.getResourceGroupWithStrings=h;n.getResourceGroupObservableWithStrings=a;n.flushCache=v;n.
uncacheResourceGroup=y;n.deleteResourceGroup=w;n.mapResourceGroupToResourceGroupWithStrings=e;n.mapResourceGroupObservableToResourceGroupObservableWithStrings=o})(oi=t.ResourceGroupClient||(t.ResourceGroupClient={})),(function(n){function t(n,t){return ni("GET",n,t,et("getOperationResponse"))}n.getOperationResponse=t})(si=t.ResourceManagerOperationsClient||(t.ResourceManagerOperationsClient={})),(function(n){function r(n,t,i){var r=[];return rt(e.callWithContinuation([n],(function(n){r=r.concat(n.map(o.toResource).filter((function(n){return!!n})))}),(function(n){throw n;}),t,i).then((function(){return r})),i)}function f(n,i,r,u){var e=b(n,i),f,s;return(t.trim(),f=t.fetch(e),f&&!ft(f)&&!u)?f:(s=rt(fi(n,i).then((function(t){return tt(t,"GET",null,i,r).then((function(t){return t.id=t.id||n,o.toResource(t)}))})),r),t.store(e,s))}function s(n,i,r,u,f){var o=b(n,r),e,s;return(t.trim(),e=t.fetch(o),e&&!ft(e)&&!f)?e:(s=Q(h.getAssetTypeViewModel(i,r)).then((function(t){var i=t.getProvidesResourcesContract();return Q(
i&&i.getResource(n))})),t.store(o,s))}function w(n,t,r,u){return f(n,t,r,u).then((function(n){return c.getLocationDisplayNames(t).then((function(t){return i(n,t)}))}))}function k(n,t,r,u,f){return s(n,t,r,u,f).then((function(n){return c.getLocationDisplayNames(r).then((function(t){return i(n,t)}))}))}function d(n,t,i,r){return f(n,t,i,r).then((function(n){var i=ot(n,!0);return c.getLocationDisplayNames(t).then((function(n){return y(i,n)}))}))}function a(n,t,i){return r(e.resourcesInResourceGroupApi(n),t,i)}function g(n,t,i,u){return st((function(f){var e=f.resourcesInSubscriptionApi(n,u);return u?tt(e,"GET",null,t,i).then((function(n){return n.value&&n.value.map(o.toResource).filter((function(n){return!!n}))})):r(e,t,i)}))}function ut(n,t,i){return st((function(u){return r(u.classicResourcesInSubscriptionApi(n),t,i)}))}function et(n,t,r){return a(n,t,r).then((function(n){return c.getLocationDisplayNames(t).then((function(t){return n.map((function(n){return i(n,t)}))}))}))}function v(n,t,i,u){return st((function(f)
{return r(f.resourcesLinkedToResourceApi(n,t),i,u)}))}function ct(n,t,r,u){return v(n,t,r,u).then((function(n){return c.getLocationDisplayNames(r).then((function(t){return n.map((function(n){return i(n,t)}))}))}))}function lt(n,i){n?t.flushCacheWithPrefix(l(n+":"+(i||""))):t.flushCache()}function at(n,i){var r=b(n,i);t.remove(r)}function i(n,t){var i=n.location||"";return p({locationString:t[l(i)]||i,trimmedName:(n.name||n.id||"").split("/").last()},n)}function y(n,t){var i=nt(n.location)||"";return p({locationString:u.observable(t[l(i)]||i),trimmedName:u.observable((nt(n.name)||nt(n.id)||"").split("/").last())},n)}var t=new it(ht);n.getResource=f;n.getExtensionResource=s;n.getResourceWithStrings=w;n.getExtensionResourceWithStrings=k;n.getResourceObservableWithStrings=d;n.getResourcesInResourceGroup=a;n.getResourcesInSubscription=g;n.getClassicResourcesInSubscription=ut;n.getResourcesInResourceGroupWithStrings=et;n.getResourcesLinkedToResource=v;n.getResourcesLinkedToResourceWithStrings=ct;n.
flushCache=lt;n.uncacheResource=at;n.mapResourceToResourceWithStrings=i;n.mapResourceObservableToResourceObservableWithStrings=y})(hi=t.ResourceClient||(t.ResourceClient={}));v={};t.registerResourceGroupDeleteWatcher=ci;t.unregisterResourceGroupDeleteWatcher=li;t.notifyResourceGroupDeleting=ai;t.notifyResourceGroupDeleteFailed=vi;t.validateResourceGroupName=yi})(l||(l={})),l}));define("HubsExtension/_generated/BladeReferences",["require","exports","Fx/Composition/Selectable"],(function(n,t,i){"use strict";var r;return (function(n){function r(n,t,i){return{onClosed:n,parameters:t,callbacks:i}}var t="HubsExtension",br=(function(n){function i(i){n.call(this,"ArmExplorerBlade",t,r(i,undefined),{})}return __extends(i,n),i})(i.PdlBladeReference),u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi,yi,pi,wi,bi,ki,di,gi,nr,tr,ir,rr,ur,fr,er,or,sr,hr,cr,lr,ar,vr,yr,pr,wr;n.ArmExplorerBladeReference=br;u=(function(n){function i(
i,u){n.call(this,"UnauthorizedAssetBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.UnauthorizedAssetBladeReference=u;f=(function(n){function i(i,u){n.call(this,"NotFoundAssetBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.NotFoundAssetBladeReference=f;e=(function(n){function i(i,u){n.call(this,"UnavailableAssetBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.UnavailableAssetBladeReference=e;o=(function(n){function i(i,u){n.call(this,"NoCreateFlowBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.NoCreateFlowBladeReference=o;s=(function(n){function i(i,u){n.call(this,"Resources",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ResourcesReference=s;h=(function(n){function i(i,u){n.call(this,"BrowseAllResourcesBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.BrowseAllResourcesBladeReference=h;c=(function(n){function i(i,u){n.call(this,"BrowseResourceBlade",t,r(u,i),{})}return __extends(i,n),
i})(i.PdlBladeReference);n.BrowseResourceBladeReference=c;l=(function(n){function i(i,u){n.call(this,"BrowseInstanceLinkBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.BrowseInstanceLinkBladeReference=l;a=(function(n){function i(i,u){n.call(this,"BrowseResourceGroupBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.BrowseResourceGroupBladeReference=a;v=(function(n){function i(i,u){n.call(this,"BrowseRecentResourcesBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.BrowseRecentResourcesBladeReference=v;y=(function(n){function i(i,u){n.call(this,"MapResourceGroupBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.MapResourceGroupBladeReference=y;p=(function(n){function i(i,u){n.call(this,"ResourceProperties",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ResourcePropertiesReference=p;w=(function(n){function i(i,u){n.call(this,"BrowseLinkBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.BrowseLinkBladeReference=
w;b=(function(n){function i(i){n.call(this,"ResourceGroupPickerV3Blade",t,i)}return __extends(i,n),i})(i.ParameterProviderBladeReference);n.ResourceGroupPickerV3BladeReference=b;k=(function(n){function i(i){n.call(this,"BrowseAllBlade",t,r(i,undefined),{})}return __extends(i,n),i})(i.PdlBladeReference);n.BrowseAllBladeReference=k;d=(function(n){function i(i,u){n.call(this,"BrowseAllBladeWithType",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.BrowseAllBladeWithTypeReference=d;g=(function(n){function i(i,u){n.call(this,"BrowseServiceBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.BrowseServiceBladeReference=g;nt=(function(n){function i(i){n.call(this,"BrowseDynamicAssetBlade",t,r(i,undefined),{})}return __extends(i,n),i})(i.PdlBladeReference);n.BrowseDynamicAssetBladeReference=nt;tt=(function(n){function i(i){n.call(this,"BrowseDynamicResourceBlade",t,r(i,undefined),{})}return __extends(i,n),i})(i.PdlBladeReference);n.BrowseDynamicResourceBladeReference=tt;it=(function(
n){function i(i,u){n.call(this,"ManagementTeamBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ManagementTeamBladeReference=it;rt=(function(n){function i(i){n.call(this,"DashboardBlade",t,r(i,undefined),{})}return __extends(i,n),i})(i.PdlBladeReference);n.DashboardBladeReference=rt;ut=(function(n){function i(i){n.call(this,"DeployToAzure",t,i)}return __extends(i,n),i})(i.ParameterProviderBladeReference);n.DeployToAzureReference=ut;ft=(function(n){function i(i){n.call(this,"DeployFromTemplateBlade",t,i)}return __extends(i,n),i})(i.ParameterProviderBladeReference);n.DeployFromTemplateBladeReference=ft;et=(function(n){function i(i){n.call(this,"ParametersEditorBlade",t,i)}return __extends(i,n),i})(i.ParameterProviderBladeReference);n.ParametersEditorBladeReference=et;ot=(function(n){function i(i){n.call(this,"ParametersFileEditorBlade",t,i)}return __extends(i,n),i})(i.ParameterProviderBladeReference);n.ParametersFileEditorBladeReference=ot;st=(function(n){function i(i){n.call(this,
"TemplateEditorBlade",t,i)}return __extends(i,n),i})(i.ParameterProviderBladeReference);n.TemplateEditorBladeReference=st;ht=(function(n){function i(i,u,f){n.call(this,"TemplateViewerBlade",t,r(f,i,u),{outputParameters:["stepOutput"]})}return __extends(i,n),i})(i.PdlBladeReference);n.TemplateViewerBladeReference=ht;ct=(function(n){function i(i,u){n.call(this,"ErrorDetailsBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ErrorDetailsBladeReference=ct;lt=(function(n){function i(i,u){n.call(this,"ArmActionsContextPane",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ArmActionsContextPaneReference=lt;at=(function(n){function i(i,u){n.call(this,"ArmActionsResultJsonBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ArmActionsResultJsonBladeReference=at;vt=(function(n){function i(i,u){n.call(this,"ArmDataContextPane",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ArmDataContextPaneReference=vt;yt=(function(n){function i(i,u){n.call(this,"ArmDataJsonBlade",
t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ArmDataJsonBladeReference=yt;pt=(function(n){function i(i,u){n.call(this,"ArmDataResultJsonBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ArmDataResultJsonBladeReference=pt;wt=(function(n){function i(i){n.call(this,"ClockContextPane",t,r(i,undefined),{isContextBlade:!0})}return __extends(i,n),i})(i.PdlBladeReference);n.ClockContextPaneReference=wt;bt=(function(n){function i(i){n.call(this,"VideoContextPane",t,r(i,undefined),{isContextBlade:!0})}return __extends(i,n),i})(i.PdlBladeReference);n.VideoContextPaneReference=bt;kt=(function(n){function i(i,u){n.call(this,"GettingStartedBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.GettingStartedBladeReference=kt;dt=(function(n){function i(i){n.call(this,"WhatsNewBlade",t,r(i,undefined),{})}return __extends(i,n),i})(i.PdlBladeReference);n.WhatsNewBladeReference=dt;gt=(function(n){function i(i){n.call(this,"NoSubscriptionsBlade",t,r(i,undefined),{})}return __extends(
i,n),i})(i.PdlBladeReference);n.NoSubscriptionsBladeReference=gt;ni=(function(n){function i(i){n.call(this,"NoMsdnOfferOnSubscriptionsBlade",t,r(i,undefined),{})}return __extends(i,n),i})(i.PdlBladeReference);n.NoMsdnOfferOnSubscriptionsBladeReference=ni;ti=(function(n){function i(i){n.call(this,"SubCertsBlade",t,r(i,undefined),{})}return __extends(i,n),i})(i.PdlBladeReference);n.SubCertsBladeReference=ti;ii=(function(n){function i(i){n.call(this,"LocationPickerV3Blade",t,i)}return __extends(i,n),i})(i.ParameterProviderBladeReference);n.LocationPickerV3BladeReference=ii;ri=(function(n){function i(i,u){n.call(this,"LocksBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.LocksBladeReference=ri;ui=(function(n){function i(i){n.call(this,"LockEditBlade",t,i)}return __extends(i,n),i})(i.ParameterProviderBladeReference);n.LockEditBladeReference=ui;fi=(function(n){function i(i){n.call(this,"MarkdownContextPane",t,r(i,undefined),{isContextBlade:!0})}return __extends(i,n),i})(i.PdlBladeReference);
n.MarkdownContextPaneReference=fi;ei=(function(n){function i(i,u,f){n.call(this,"MoveResourceBlade",t,r(f,i,u),{outputParameters:["actionBarOutput"]})}return __extends(i,n),i})(i.PdlBladeReference);n.MoveResourceBladeReference=ei;oi=(function(n){function i(i,u,f){n.call(this,"RegionPickerBlade",t,r(f,i,u),{outputParameters:["stepOutput"]})}return __extends(i,n),i})(i.PdlBladeReference);n.RegionPickerBladeReference=oi;si=(function(n){function i(i,u,f){n.call(this,"ResourceGroupPickerBlade",t,r(f,i,u),{outputParameters:["stepOutput"]})}return __extends(i,n),i})(i.PdlBladeReference);n.ResourceGroupPickerBladeReference=si;hi=(function(n){function i(i,u,f){n.call(this,"CreateResourceGroupBlade",t,r(f,i,u),{outputParameters:["stepOutput"]})}return __extends(i,n),i})(i.PdlBladeReference);n.CreateResourceGroupBladeReference=hi;ci=(function(n){function i(i,u,f){n.call(this,"SubscriptionPickerBlade",t,r(f,i,u),{outputParameters:["stepOutput"]})}return __extends(i,n),i})(i.PdlBladeReference);n.SubscriptionPickerBladeReference=
ci;li=(function(n){function i(i){n.call(this,"CreateEmptyResourceGroupBlade",t,i)}return __extends(i,n),i})(i.ParameterProviderBladeReference);n.CreateEmptyResourceGroupBladeReference=li;ai=(function(n){function i(i,u){n.call(this,"DeploymentsListBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.DeploymentsListBladeReference=ai;vi=(function(n){function i(i,u){n.call(this,"DeploymentDetailsBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.DeploymentDetailsBladeReference=vi;yi=(function(n){function i(i,u){n.call(this,"DeploymentOperationPropertiesBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.DeploymentOperationPropertiesBladeReference=yi;pi=(function(n){function i(i,u){n.call(this,"ResourceGroupQuickStartBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ResourceGroupQuickStartBladeReference=pi;wi=(function(n){function i(i,u){n.call(this,"ResourceGroupEventsBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);
n.ResourceGroupEventsBladeReference=wi;bi=(function(n){function i(i,u){n.call(this,"ResourceGroupCostsBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ResourceGroupCostsBladeReference=bi;ki=(function(n){function i(i){n.call(this,"ResourceGroupDeleteBlade",t,i)}return __extends(i,n),i})(i.ParameterProviderBladeReference);n.ResourceGroupDeleteBladeReference=ki;di=(function(n){function i(i,u,f){n.call(this,"ResourceGroupDeleteBladeForCommand",t,r(f,i,u),{outputParameters:["actionBarOutput"]})}return __extends(i,n),i})(i.PdlBladeReference);n.ResourceGroupDeleteBladeForCommandReference=di;gi=(function(n){function i(i,u){n.call(this,"ResourceMenuBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ResourceMenuBladeReference=gi;nr=(function(n){function i(i){n.call(this,"ServicesHealthBlade",t,r(i,undefined),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ServicesHealthBladeReference=nr;tr=(function(n){function i(i){n.call(this,"SettingsBlade",t,r(i,undefined),{})}
return __extends(i,n),i})(i.PdlBladeReference);n.SettingsBladeReference=tr;ir=(function(n){function i(i,u,f){n.call(this,"LanguageSelectionBlade",t,r(f,i,u),{outputParameters:["actionBarOutputLanguage","value"]})}return __extends(i,n),i})(i.PdlBladeReference);n.LanguageSelectionBladeReference=ir;rr=(function(n){function i(i,u,f){n.call(this,"LocaleSelectionBlade",t,r(f,i,u),{outputParameters:["actionBarOutputLocale","value"]})}return __extends(i,n),i})(i.PdlBladeReference);n.LocaleSelectionBladeReference=rr;ur=(function(n){function i(i,u){n.call(this,"MyAccessBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.MyAccessBladeReference=ur;fr=(function(n){function i(i,u){n.call(this,"RPStatusBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.RPStatusBladeReference=fr;er=(function(n){function i(i,u){n.call(this,"AzureProvisioningResultsBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.AzureProvisioningResultsBladeReference=er;or=(function(n){function i(
i,u){n.call(this,"ArmErrorsBlade",t,r(u,i),{isContextBlade:!0})}return __extends(i,n),i})(i.PdlBladeReference);n.ArmErrorsBladeReference=or;sr=(function(n){function i(i){n.call(this,"SubscriptionPickerV3Blade",t,i)}return __extends(i,n),i})(i.ParameterProviderBladeReference);n.SubscriptionPickerV3BladeReference=sr;hr=(function(n){function i(i,u){n.call(this,"ResourcesWithTagBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ResourcesWithTagBladeReference=hr;cr=(function(n){function i(i,u){n.call(this,"ResourceTagsListBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ResourceTagsListBladeReference=cr;lr=(function(n){function i(i,u){n.call(this,"SubscriptionTagsListBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.SubscriptionTagsListBladeReference=lr;ar=(function(n){function i(i,u){n.call(this,"BulkDeleteBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.BulkDeleteBladeReference=ar;vr=(function(n){function i(i,u){n.call(this,
"ChooseColumnsBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ChooseColumnsBladeReference=vr;yr=(function(n){function i(i,u){n.call(this,"ResourceGroupMapBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.ResourceGroupMapBladeReference=yr;pr=(function(n){function i(i,u){n.call(this,"AssignTagsBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.AssignTagsBladeReference=pr;wr=(function(n){function i(i,u){n.call(this,"EditTagsBlade",t,r(u,i),{})}return __extends(i,n),i})(i.PdlBladeReference);n.EditTagsBladeReference=wr})(r||(r={})),r}));define("HubsExtension/_generated/Microsoft_Azure_Marketplace/BladeReferences",["require","exports","Fx/Composition/Selectable"],(function(n,t,i){"use strict";var r;return (function(n){function r(n,t,i){return{onClosed:n,parameters:t,callbacks:i}}var t="Microsoft_Azure_Marketplace",f=(function(n){function i(i,u,f){n.call(this,"GalleryFeaturedMenuItemBlade",t,r(f,i,u),{outputParameters:["resetMenuId","createTriggeredSignal"]})}
return __extends(i,n),i})(i.PdlBladeReference),u;n.GalleryFeaturedMenuItemBladeReference=f;u=(function(n){function i(i,u,f){n.call(this,"GalleryResultsListBlade",t,r(f,i,u),{outputParameters:["inlineGalleryCreateOutputs"]})}return __extends(i,n),i})(i.PdlBladeReference);n.GalleryResultsListBladeReference=u})(r||(r={})),r}));define("HubsExtension/Browse/BrowseArea",["require","exports","f","i","ko","Fx/Composition/Selectable","FxHubs/MarketplaceRpc","FxHubs/RpcEndPoints","HubsExtension/_generated/BladeReferences","HubsExtension/_generated/ExtensionDefinition","HubsExtension/_generated/Microsoft_Azure_Marketplace/BladeReferences","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/Common/CloudNameHelpers","HubsExtension/Common/HubsObservables","HubsExtension/Notifications/EventSubscriptionService","HubsExtension/ResourceMap/ResourceMapCommon"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){"use strict";function w(n){return(n||"").toLowerCase()}function ut(n){return w(n).trim()}function tt(n,t)
{var i=ut(n);return!t||!t.length||t.some((function(n){return ut(n)===i}))}function ct(n,t){var i=ut(t&&t.name);return!n||w(n).split(" ").every((function(n){return i.indexOf(n)!==-1}))}function ei(n,t,i){var r=b.parseResourceDescriptor(t);return n.format({resourceId:k(t),name:k(r.resource),type:k(r.type),provider:k(r.provider),resourceGroup:k(r.resourceGroup),subscriptionId:k(r.subscription),locationId:k(i)})}function lt(n,t){return function(i,u){var f=i.filter((function(n){return!n.isLocalEvent})).map((function(n){return{assetId:n.assetId,assetType:r.AssetManager.resourceAssetType,extensionName:null,cloudName:u}}));f.length&&l.internalNotifyAssetDeleted(f,"The event service notified "+n+" deleted.",t)}}function oi(n){var t=new bt;return t.attachEventWatch(p.allResourcesTypeKey,{resourceGroupDeleted:lt("resource group",n),resourceDeleted:lt("resource",n)}),t}function si(n,t,i,r){return r===void 0&&(r=!0),a.addCloudNameToDynamicSelection(n,{cloudName:n,extension:h.definitionName,detailBlade:r?h.
BladeNames.resourceMenuBlade:h.BladeNames.resourceProperties,detailBladeInputs:{id:t,referrerInfo:i}})}function hi(n){return n&&n.resourceType&&!n.bladeName&&n.browseType!==4}function ft(n,t,i,r){var u=new ti.PdlBladeReference(i,t,{parameters:r});return t&&w(t)!==w(h.definitionName)&&(u.cloudName=n),u}function ci(n,t){return Q(o.AssetTypes.mapAssetIdToDynamicSelectionAndIconEndPoint.invoke(et.client,d.Shell,{assetTriplet:n,cloudName:t})).then((function(n){return ft(t,n.selection.extension,n.selection.detailBlade,n.selection.detailBladeInputs)}))}function li(n,t){return Q(o.AssetTypes.mapResourceIdToDynamicSelectionAndIconEndPoint.invoke(et.client,d.Shell,{resourceId:n,cloudName:t,forceBladeSelection:!0})).then((function(n){return ft(t,n.selection.extension,n.selection.detailBlade,n.selection.detailBladeInputs)}))}function kt(n,t){return!t||b.isResourceManagerId(t)&&(n||"").startsWith(w(t)+"/")}function ai(n,t,i,r){var h=w(n.type),o=w(n.kind),u=t.excludedResourceTypes&&t.excludedResourceTypes[
h],f,s,e;return!r&&u&&(u===!0||u[o]===!0)?!1:(f=w(t.kind),s=f===ui?"":f,t.kind&&w(s)!==o)?!1:(e=w(n.id),!kt(e,t.scope))?!1:!t.scope&&!ri(e)&&!i(n.id)?!1:ct(t.filter,n)&&tt(n.location,t.selectedLocations)}function vi(n,t,i){var r=w(n.id);return kt(r,t.scope)?!t.scope&&!i(n.id)?!1:ct(t.filter,n)&&tt(n.location,t.selectedLocations):!1}var it=i.Base,et=r.Rpc,d=it.Constants,b=i.ViewModels.Services.ResourceTypes,ti=r.Composition.Selectable,g=i.Extension.ResourceRoutingType,yi=window,pi=it.Diagnostics.createLog(n),ii=b.isResourceId,ot=b.isResourceGroupId,ri=b.isTenantResource,wi=b.isSubscriptionId,st=b.parseResourceManagerDescriptor,ht=r.Extension.CloudName.addToModel,rt=l.filterSubscriptionsByScope,ui="(none)",k=encodeURIComponent,fi=(function(){function n(){}return n})(),nt,dt,gt,ni;t.DataContext=fi;t.buildInstanceLink=ei;t.getCreateBlade=i.memoizeQ((function(n){var t=n.sourceBladeOrPartName||h.BladeNames.resources,l,u,i,o;return n.marketplaceItemId?(l={cloudName:n.cloudName,extension:h.definitionName,
detailBlade:h.BladeNames.noCreateFlowBlade,detailBladeInputs:ht(n.cloudName,{marketplaceItemId:n.marketplaceItemId})},u=n.createFlowPromise||Q(e.getCreateFlow({marketplaceGalleryItemId:n.marketplaceItemId,launchingContext:{source:[t,n.resourceType]},dontDiscardJourney:!0},n.cloudName)),n.onCreateFlowPromise&&n.onCreateFlowPromise(u),i=new s.NoCreateFlowBladeReference(l.detailBladeInputs),u.then((function(r){if(r.isOldCreate)return it.Diagnostics.Telemetry.trace({action:"OldCreateFlowLaunched",source:t,data:{marketplaceItemId:n.marketplaceItemId}}),i.parameters.notSupported=!0,Q.resolve(i);var e=r.bladeSelection.detailBladeInputs,u=new f.ParameterProviderBladeReference(r.bladeSelection.detailBlade,r.bladeSelection.extension,{parameters:e,supplyInitialData:function(){return{}},receiveResult:function(){return{}},supplyProviderConfig:function(){return e.internal_bladeCallerParams&&e.internal_bladeCallerParams.providerConfig}});return r.bladeSelection.extension===h.definitionName?u.parameters=
ht(n.cloudName,u.parameters):u.cloudName=n.cloudName,Q(u)})).catch((function(){return Q(i)}))):n.marketplaceMenuItemId?(o=void 0,o=ot(n.listScope)?n.marketplaceMenuItemId.indexOf("/")!==-1?new c.GalleryResultsListBladeReference({selectedSubMenuItemId:{menuItemId:n.marketplaceMenuItemId,dontDiscardJourney:!0,resourceGroup:n.listScope,resourceGroupLocation:n.listScopeLocation,launchingContext:{source:"AddResourceCommand"}}},null):new c.GalleryFeaturedMenuItemBladeReference({selectedMenuItemId:n.marketplaceMenuItemId,dontDiscardJourney:!0,resourceGroup:n.listScope,resourceGroupLocation:n.listScopeLocation,launchingContext:{source:"AddResourceCommand"}},null):n.marketplaceMenuItemId.indexOf("/")!==-1?new c.GalleryResultsListBladeReference({selectedSubMenuItemId:{menuItemId:n.marketplaceMenuItemId,dontDiscardJourney:!0,launchingContext:{source:t+" "+n.resourceType}}},null):n.marketplaceMenuItemId===d.GalleryMenuItems.HomeMenuItem?a.addCloudNameToBladeReference(n.cloudName,new r.Composition.Selectable.
PdlBladeReference(d.BladeNames.Hubs.CreateHubBlade,d.ExtensionNames.Marketplace,{parameters:{"package":null,additionalConfig:null,dontDiscardJourney:!0,selectedMenuItemId:null,createLanding:null}})):new c.GalleryFeaturedMenuItemBladeReference({selectedMenuItemId:n.marketplaceMenuItemId,dontDiscardJourney:!0,launchingContext:{source:t+" "+n.resourceType}},null),Q(o)):void 0}));t.watchForResourceDeletes=oi;var at="/write",vt="microsoft.resources/subscriptions/resourcegroups/write",yt="/delete",pt="microsoft.resources/subscriptions/resourcegroups/delete",wt="succeeded",bt=(function(){function n(){}return n.prototype.attachEventWatch=function(n,t){var i,r,u;this.disposeEventWatcher();i=at;r=yt;w(n)===p.resourceGroupsTypeKey&&(i=vt,r=pt);u=function(n,t,i,r){return y.subscribeToArmEvent({source:null,operationNameRegex:n},(function(n,u){var f,e;r.resourceGroupCallback&&(f=n.filter((function(n){return w(n.status)===wt&&n.operationName===t&&ot(n.assetId)})),f.length&&r.resourceGroupCallback(f,u));r.
resourceCallback&&(e=n.filter((function(n){return w(n.status)===wt&&n.operationName.endsWith(i)&&ii(n.assetId)})),e.length&&r.resourceCallback(e,u))}),100)};(t.writeToResourceGroup||t.writeToResource)&&(this._writeEventSubscription=u(i,vt,at,{resourceGroupCallback:t.writeToResourceGroup,resourceCallback:t.writeToResource}));(t.resourceGroupDeleted||t.resourceDeleted)&&(this._deleteEventSubscription=u(r,pt,yt,{resourceGroupCallback:t.resourceGroupDeleted,resourceCallback:t.resourceDeleted}))},n.prototype.disposeEventWatcher=function(){this._writeEventSubscription&&y.removeArmEventSubscription(this._writeEventSubscription);this._writeEventSubscription=null;this._deleteEventSubscription&&y.removeArmEventSubscription(this._deleteEventSubscription);this._deleteEventSubscription=null},n})();t.ArmEventWatcher=bt;t.makeResourceBladePromise=si;t.checkNoBladeName=hi;t.makeBladeReference=ft;t.mapAssetIdToBladeReference=ci;t.mapResourceIdToBladeReference=li;t.showResource=ai;t.showResourceGroup=vi;nt=
(function(){function n(){this._currentSubscriptionMap={}}return n.prototype._getResourcesWithUris=function(n,t){var u=this,r=[];return Q(l.callBatchWithContinuation(t,(function(t){var f=i.makeArray(t);return n.sourceHandler(n,f,u,r)}),(function(){return n.partialErrors(!0)}),!1,n.cloudName,n.telemetry,!0)).then((function(){return r}))},n.prototype._getSubscriptions=function(n,t){return n.scope?Q(u.observable([st(n.scope).subscription])):n.selectedSubscriptions?Q(u.pureComputed((function(){return n.selectedSubscriptions().map((function(n){return n.subscriptionId}))}))):t?Q(v.getSubscriptions(n.cloudName).then((function(n){return u.observable(n.map((function(n){return n.subscriptionId})))}))):Q(v.getSelectedSubscriptions(n.cloudName)).then((function(n){return u.pureComputed((function(){return n().map((function(n){return n.subscriptionId}))}))}))},n.prototype._updateSubscriptionMap=function(n){this._currentSubscriptionMap={};i.extendArrayIntoMap(this._currentSubscriptionMap,n,w,i.wrap(!0))},n.prototype._buildResourceProcessor=
function(n,t,i,r){var f=this,e=u.observable([]);return this._getSubscriptions(t,i).then((function(i){var u=function(){var n=[];f._getResourcesWithUris(t,r&&r(i())||[]).then((function(t){function u(n){var t=w(n.id);i[t]||(r.push(n),i[t]=!0)}var i={},r=[];n.forEach(u);t.forEach(u);e(r)})).finally((function(){t.loading(!1)}))};return i.subscribeAndRun(n,(function(n){f._updateSubscriptionMap(n);u()})),Q(e)}))},n.prototype.matchSubscription=function(n){return this._currentSubscriptionMap[w(st(n).subscription)]},n})();t.BaseResourcesSource=nt;dt=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getResources=function(n,t){return this._buildResourceProcessor(n,t,!1,(function(n){for(var r=[],u=function(i){var u=[],f=rt(n.slice(i,i+20),t.scope,(function(n){u.push(n)}));f.length&&r.push({uri:l.resourcesAcrossSubscriptionsApi(f,t.selectedTypes,t.filter,u,t.selectedLocations,t.selectedResourceGroups,t.invertResourceGroupFilter),responseIsArrayType:!0})},i=0;i<n.length;i+=20)u(i);
return r}))},t})(nt);t.AllResourcesSource=dt;gt=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getResources=function(n,t){return this._buildResourceProcessor(n,t,!1,(function(n){var i=[],r=rt(n,t.scope);return i.push.apply(i,r.map((function(n){return{uri:l.resourceGroupsInSubscriptionApi(n),responseIsArrayType:!0}}))),i}))},t})(nt);t.ResourceGroupsSource=gt;ni=(function(n){function t(t){n.call(this);this.usesSelectedSubs=!0;this._assetTypes=t;this.usesSelectedSubs=this._assetTypes.some((function(n){return n.routingType!==g.Tenant}))}return __extends(t,n),t.prototype.getResources=function(n,t){var r=this;return this._buildResourceProcessor(n,t,!1,(function(n){var u=[],e=r._assetTypes.filter((function(n){return(n.routingType||g.Default)===g.Default&&tt(n.resourceType,t.selectedTypes)})).map((function(n){return n.resourceType})),o,f,s;if(e.length)for(o=function(i){var r=[],f=rt(n.slice(i,i+20),t.scope,(function(n){r.push(n)}));f.length&&u.push({uri:l.resourcesAcrossSubscriptionsApi(
f,e,t.filter,r,t.selectedLocations,t.selectedResourceGroups,t.invertResourceGroupFilter),responseIsArrayType:!0})},f=0;f<n.length;f+=20)o(f);return s=r._assetTypes.filter((function(n){return n.routingType===g.ProviderProxy&&tt(n.resourceType,t.selectedTypes)})),s.forEach((function(r){for(var e=function(f){var e=[],o=l.filterSubscriptionsByScopeByResourceGroup(n.slice(f,f+20),t.scope,(function(n){if(t.selectedResourceGroups&&t.selectedResourceGroups.length){var i=w(n);t.selectedResourceGroups.first((function(n){return w(n)===i}))&&e.push(n)}else e.push(n)}));t.scope||(e=i.union(e,t.selectedResourceGroups));o.length&&o.forEach((function(n){u.push({uri:l.providerProxyResourcesApi(n,r,t.filter,e,t.selectedLocations),responseIsArrayType:!0})}))},f=0;f<n.length;f+=20)e(f)})),r._assetTypes.filter((function(n){return n.routingType===g.Tenant})).forEach((function(n){u.push({uri:l.tenantResourcesApi({resourceTypeName:n.topLevelTenantAlias,apiVersion:n.apiVersion},t.filter,null,t.selectedLocations),responseIsArrayType:
!0})})),u}))},t})(nt);t.ResourcesSource=ni}));define("HubsExtension/Common/UserSettingsHelper",["require","exports","f","i","o","FxHubs/CloudNameCommon","FxHubs/HubsSettingsSchema"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){function v(n){return f.removeCloudNameFromId(n)}function s(n,t){return f.addCloudNameToId(n,t,!1)}var t=i.Base,c=t.Diagnostics,l=r.Extension,a=r.Rpc,o=t.Constants.Shell,h;n.addCloudNameToUserSettingKey=s;h=(function(){function n(){}return n.initialize=function(t){if(n._rpcClient)throw new Error("rpcClient already initialized.");n._rpcClient=t||a.client},n.readSettings=function(t,i){return e.readHubsUserSettings.invoke(n._rpcClient,o,{settingsKeys:t,useShellGeneralStore:i})},n.writeSettings=function(t,i){return e.writeHubsUserSettings.invoke(n._rpcClient,o,{settings:t,priority:i})},n.readSettingsRpc=function(t,i){var f=l.getDescriptor(i.srcWindowId).cloudName,o=t.map((function(n){return s(n,f)})),r=t.first((function(n){return!~e.allowedUserSettingsKeys.indexOf(
n)}));if(r)throw c.createIgnoreUnhandledRejectionError(i.srcWindowId+" is not allowed to read the user setting "+r+".");return n.readSettings(o).then((function(n){var t={};return u.getOwnPropertyNames(n).forEach((function(i){t[v(i)]=n[i]})),t}))},n})();n.UserSettingsHelper=h})(o||(o={})),o}));define("HubsExtension/Common/RecentResources",["require","exports","f","i","o","ko","FxHubs/HubsSettingsSchema","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/Browse/BrowseArea","HubsExtension/HubsCommon","HubsExtension/ResourceMap/ResourceMapCommon","HubsExtension/Common/AssetTypeCache","HubsExtension/Common/HubsObservables","HubsExtension/Common/UserSettingsHelper"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){"use strict";function nt(){if(!d)d=new g(1e4);return d}function b(n){return"/cloud/"+(n||k.Constants.DefaultCloudName).toLowerCase()}function p(n,t){return b(n)+t.toLowerCase()}function tt(n){return n?n.toLowerCase():n}function it(){return Q(v.UserSettingsHelper.readSettings([e.Keys.recentResourcesSettings])).
then((function(n){var t=n[e.Keys.recentResourcesSettings];return t?t:(t={version:1,data:[]},v.UserSettingsHelper.readSettings(["AssetMruList"],!0).then((function(n){var i=n.AssetMruList;return i&&i.forEach((function(n){typeof n.removedTimeStamp!="number"&&y.isResourceManagerId(n.assetId)&&t.data.push({cloudName:n.cloudName,resourceId:n.assetId,timeStamp:n.timeStamp})})),t})))})).then((function(n){return n.version===1?n.data:[]}))}var k=i.Base,y=i.ViewModels.Services.ResourceTypes,w=i.tryImmediateResolve,d,g;t.getRecentsManager=nt;g=(function(){function n(n){var t=this,f,e,u;this._sourceMap={};this._map={};this._assetTypesInformation={};this._logDelay=n;f=new r.TriggerableLifetimeManager;this._initialLoadPromise=l.getAssetTypesInformationPromise().then((function(n){return it().then((function(r){t._sourceMap=i.convertArrayToMap(r,(function(n){return p(n.cloudName,n.resourceId)}));n.assetTypesInformation.subscribeAndRun(f,(function(n){t._assetTypesInformation=i.convertArrayToMap(n,(function(n){return b(
n.cloudName)+"/"+n.lowerCaseResourceType}),i.identity);t._validateEntriesFromSettings().then((function(){return t._trimMap()})).then((function(){t._updateListFromMap()}))}))}))}));e=new s.ArmEventWatcher;u=function(n,i){n.forEach((function(n){t.removeRecent(i,n.assetId,!0)}))};e.attachEventWatch(c.allResourcesTypeKey,{resourceGroupDeleted:u,resourceDeleted:u})}return n.prototype._updateListFromMap=function(){if(this._list){var n=[];i.forEachKey(this._map,(function(t,i){n.push(i)}));this._list(i.stableSort(n,(function(n,t){return t.timeStamp-n.timeStamp})))}},n.prototype._trimMap=function(){for(var t=function(){var t,r=Date.now();i.forEachKey(n._map,(function(n,i){i.timeStamp<=r&&(t=n,r=i.timeStamp)}));delete n._map[t]},n=this;i.keysLength(this._map)>50;)t()},n.prototype._validateEntriesFromSettings=function(){var n=this,t={},f=[],e=[];return i.forEachKey(this._sourceMap,(function(r,u){var s,h,l,v,p,w,k;n._map[r]||(s=u.resourceId,h=b(u.cloudName)+"/",y.isSubscriptionId(s)?(l=n._assetTypesInformation[h+c.
subscriptionsTypeKey],l&&(v=y.parseSubscriptionDescriptor(s),e.push(Q(a.getSubscriptionInfoPromise(v.subscription,u.cloudName)).then((function(t){n._map[r]=i.extend2(n._sourceMap[r],{key:r,name:t.uniqueDisplayName,lowerCaseResourceId:s.toLowerCase(),assetTypeInformation:l})})).catch((function(){delete n._sourceMap[r]}))))):y.isResourceGroupId(s)?(p=n._assetTypesInformation[h+c.resourceGroupsTypeKey],p&&(t[r]=Q(o.resourceGroupApi(s)),f.push(t[r]))):(y.isResourceId(s)||y.isTenantResource(s))&&(w=y.buildResourceTypeFromResourceId(s).toLowerCase(),k=n._assetTypesInformation[h+w],k&&(t[r]=Q(o.resourceApi(s,u.cloudName)),f.push(t[r]))))})),Q.allSettled(f.concat(e)).then((function(){var u=r.getCloudMap();return i.forEachKey(t,(function(t,i){var r=n._sourceMap[t],f;i.isFulfilled()?(f=u.getOrSet(r.cloudName,{cloudName:r.cloudName,uriMap:{}}),f.uriMap[i.valueOf()]=r):delete n._sourceMap[t]})),u})).then((function(t){var r=[],f=o.makeResourceManagerTelemetry("cleanrecents");return t.all().forEach((function(t)
{var e=t&&u.keys(t.uriMap);e&&r.push(Q(o.callBatchWithContinuation(e,(function(r,u){var o=t.uriMap[e[u]],f=p(o.cloudName,o.resourceId),l=b(o.cloudName)+"/",a,v,s;return y.isResourceGroupId(r.id)?(a=n._assetTypesInformation[l+c.resourceGroupsTypeKey],n._map[f]=i.extend2(n._sourceMap[f],{key:f,name:r.name,lowerCaseResourceId:r.id.toLowerCase(),assetTypeInformation:a,location:r.location})):y.isResourceId(r.id)&&(v=y.buildResourceTypeFromResourceId(r.id).toLowerCase(),s=n._assetTypesInformation[l+v],h.resourceUsesResourceMenu(r,s)?n._map[f]=i.extend2(n._sourceMap[f],{key:f,name:r.name,resourceId:r.id,resourceKind:tt(r.kind),lowerCaseResourceId:r.id.toLowerCase(),assetTypeInformation:s,location:r.location}):delete n._sourceMap[f]),!0}),(function(i){var r=t.uriMap[i.api];if(i.reason)switch(i.reason.httpStatusCode){case 404:delete n._sourceMap[p(r.cloudName,r.resourceId)];break;case 403:delete n._sourceMap[p(r.cloudName,r.resourceId)]}}),!1,t.cloudName,f,!1)))})),Q.allSettled(r)}))},n.prototype._storeToSettings=
function(){var n,r,t;return this._list&&this._updateListFromMap(),n=[],i.forEachKey(this._map,(function(t,i){n.push({cloudName:i.cloudName||k.Constants.DefaultCloudName,resourceId:i.resourceId,timeStamp:i.timeStamp})})),r=(t={},t[e.Keys.recentResourcesSettings]={version:1,data:n},t),Q(v.UserSettingsHelper.writeSettings(r))},n.prototype._addResourceAccess=function(n){var t=this;return w(this._initialLoadPromise,(function(){return n.forEach((function(n){var i=t._map[n.key];i?(i.resourceKind=n.resourceKind,i.timeStamp=n.timeStamp):(i=n,t._map[n.key]=i);t._trimMap()})),t._storeToSettings()}))},n.prototype.addRecent=function(n,t,i,r,u,f){var e=this;return w(this._initialLoadPromise,(function(){var h=y.buildResourceTypeFromResourceManagerId(i).toLowerCase(),s=e._assetTypesInformation[b(t)+"/"+h],o;return s?(o={key:p(t,i),cloudName:t,resourceId:i,timeStamp:Date.now(),name:r,resourceKind:f,lowerCaseResourceId:i.toLowerCase(),assetTypeInformation:s,location:u},e._logDelay&&n)?k.Promises.cancelOnDispose(
n,Q.delay(e._logDelay)).then((function(){return e._addResourceAccess([o])})):e._addResourceAccess([o]):Q(!1)}))},n.prototype.removeRecent=function(n,t,i){var r=this;return w(this._initialLoadPromise,(function(){var f=p(n,t),o=r._map[f],e=!1;return o&&(delete r._map[f],e=!0),i&&u.keys(r._map).filter((function(n){return n.startsWith(f+"/")})).forEach((function(n){delete r._map[n];e=!0})),e?r._storeToSettings():Q(!1)}))},n.prototype.clear=function(){var n=this;return w(this._initialLoadPromise,(function(){return n._map={},n._storeToSettings()}))},u.defineProperty(n.prototype,"recentsList",{get:function(){var t=this,n=this._list;return n||(n=this._list=f.observableArray([]),w(this._initialLoadPromise,(function(){t._updateListFromMap()}))),n},enumerable:!0,configurable:!0}),n})()}));define("HubsExtension/Common/BrowseData",["require","exports","f","i","o","HubsExtension/ArmHelpers/ArmApiEndpoints","HubsExtension/ArmHelpers/ArmApisStartup","HubsExtension/ArmHelpers/Models/ArmResource","HubsExtension/ArmHelpers/Models/ArmResourceGroup",
"HubsExtension/Common/HubsObservables","HubsExtension/ResourceMap/ResourceMapCommon"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(t){function ut(n,t,i,r,u){return e.call(n,t,i,r,u)}function ft(n){return new p(n)}function et(n){var i="unknown error",r,u,f,t;return n.length<1?{error:i,message:i}:(t=n[0],t&&t.statusText&&(r=t.statusText,f=t.status,u=t.code),{error:t,message:r||JSON.stringify(t),status:f,code:u,stack:t.stack})}function v(n){return n.resourceTypes&&n.resourceTypes.length===1&&n.resourceTypes[0].toLowerCase()===c.resourceGroupsTypeKey}function l(n){return n.resourceGroupId!==undefined}function ot(n){return v(n)?1:l(n)?0:20}function st(n){var t=n.token.skipSubs||0,s=n.token.typeIndex||0,r,h,f,o;if(v(n))return r=w(n.subscriptions.slice(t,t+n.subscriptionGroupSize),n.scope),r.length?e.resourceGroupsInSubscriptionApi(r[0]):null;if(l(n))return h=n,e.resourcesInResourceGroupApi(h.resourceGroupId);var u=n,c=n.resourceTypes,a=n.filter;if(u.routingType===y.Tenant)
{var i=(u.assetTypeInformation||[])[s],p=i&&i.apiVersion,b=i&&i.topLevelTenantAlias;return e.tenantResourcesApi({resourceTypeName:b||c[s],apiVersion:p},a)}if(f=[],o=w(n.subscriptions.slice(t,t+n.subscriptionGroupSize),n.scope,(function(n){f.push(n)})),u.routingType===y.ProviderProxy)throw new Error("Unhandled provider proxy routing");return o.length?e.resourcesAcrossSubscriptionsApi(o,c,a,f,n.locations,n.resourceGroups):null}function ht(n){var i=n.resourceTypes,r=n.locations,u=n.cloudName,o=n.scope,f=n.telemetry,e,t;return v(n)?{resourceTypes:i,locations:r,scope:o,cloudName:u,telemetry:f}:l(n)?(e=n,{resourceTypes:i,locations:r,resourceGroupId:e.resourceGroupId,showHiddenKinds:e.showHiddenKinds,cloudName:u,telemetry:f}):(t=n,{resourceTypes:i,locations:r,scope:o,kind:t.kind,assetTypeInformation:t.assetTypeInformation,cloudName:u,routingType:t.routingType,excludedTypes:t.excludedTypes,telemetry:f})}function b(n,t,i){var e=(t.type||"").toLowerCase(),u=(t.kind||"").toLowerCase(),r=n.excludedTypes&&
n.excludedTypes[e],f;return r===!0?!1:(f=!i&&r&&r[u]===!0,a.isResourceId(n.scope)&&!t.id.toLowerCase().startsWith(n.scope.toLowerCase()+"/"))?!1:n.kind&&(!t.kind&&n.kind!=="(none)"||t.kind&&n.kind!==u)?!1:!f}function ct(n,t){var i,r;return v(n)?a.isResourceGroupId(n.scope)||a.isResourceId(n.scope)?!1:(i=n.filter?t.name.toLowerCase().indexOf(n.filter.toLowerCase())!==-1:!0,!!i&&n.locations&&n.locations.length&&(i=n.locations.some((function(n){return t.location.toLowerCase()===n.toLowerCase()}))),i):l(n)?a.isResourceId(t.id)?(r=n,b(n,t,r.showHiddenKinds)&&(n.filter?t.name.toLowerCase().indexOf(n.filter.toLowerCase())!==-1:!0)):!1:b(n,t,!1)}var k=i.Base,d=k.Diagnostics,g=r.Extension,a=i.ViewModels.Services.ResourceTypes,nt=i.Data,y=i.Extension.ResourceRoutingType,tt=window,it=tt.HubsExtensionBrowseMockAjax||ut,rt=d.createLog(n),w=e.filterSubscriptionsByScope,p;t.bladeMessageWrapper={queryErrors:{},bladeInfoMessage:{}};t.createBrowseDataForEntity=ft;p=(function(){function n(n,t){t===void 0&&(
t=6e4);var e=r.getCloudMap(),p=r.getCloudMap();f.armEndpoints.forEach((function(n){var t=h.getLocationDisplayNames(n.cloudName).then((function(t){e.set(n.cloudName,t)}));p.set(n.cloudName,t)}));this.resourceCache=new nt.QueryCache({entityTypeName:n,evictionDelay:t,sourceUri:function(n){return n.token&&n.token.serverToken||st(n)},httpMethod:"GET",navigation:{loadByContinuationToken:function(n,t,r){var u=r?null:n.metadata()?n.metadata().continuationToken:null,f=n.fetch(i.extend({filter:t.filter?t.filter.trim():null,token:u?JSON.parse(u):{},subscriptions:t.subscriptions||[],subscriptionGroupSize:t.subscriptionGroupSize||ot(t)},ht(t))),e=!t.refresh?Q.resolve(null):Q(n.refresh());return Q(f).then((function(){return e}))}},serializeParams:function(n){var s,t;n.cloudName=g.normalizeCloudName(n.cloudName);var r=JSON.stringify(n.token),f=n.filter,e=n.cloudName,h=n.subscriptions,c=n.scope,o=n.refreshId||"";return v(n)?JSON.stringify([o,e,c,r,f].concat(h).concat(n.resourceTypes).concat(n.locations)):l(
n)?(s=n,JSON.stringify([o,e,r,f,s.resourceGroupId,s.showHiddenKinds])):(t=n,JSON.stringify(i.merge([o,t.routingType,e,c,t.kind,r,f],h,t.resourceTypes,t.locations,u.keys(t.excludedTypes||{}))))},supplyData:function(n,t,u,f,e){var o=e&&e.cloudName,s=e&&e.telemetry;return!t||e.subscriptions.length===0&&!l(e)?Q(i.clone({params:e})):p.get(o).then((function(){return Q(it(t,n,null,o,s)).catch((function(n){throw r.Azure.buildSimplifiedError(n&&n.jqXHR||n);}))})).then((function(n){return i.extend({response:n},{params:e})})).catch((function(){for(var n,t,u=[],r=0;r<arguments.length;r++)u[+r]=arguments[r];return n=et(u),t=n.status,t!==0&&t!==404&&t!==403&&rt.warning("Failed to get browse data: {0} - {1} - {2} {3}".format(n.error,n.message,t||"",n.stack||"")),i.extend({error:{}},{params:e})}))},processServerResponse:function(n){var t=n.params,w=n.error&&[n.error],h=t.token||{},i,v=[],r,p,u,f;return n.response&&(i=n.response.nextLink,n.response.value&&(v=n.response.value.map((function(n){return a.isResourceGroupId(
n.id)?s.toResourceGroup(n):o.toResource(n)})).filter((function(n){return n&&ct(t,n)})).map((function(n){return a.isResourceGroupId(n.id)?c.ResourceGroupClient.mapResourceGroupToResourceGroupWithStrings(n,e.get(t.cloudName)):c.ResourceClient.mapResourceToResourceWithStrings(n,e.get(t.cloudName))})))),p=t,p.routingType!==y.Tenant?(u=h.skipSubs||0,i?r={skipSubs:u,serverToken:i}:!l(t)&&!t.scope&&t.subscriptionGroupSize>0&&u+t.subscriptionGroupSize<t.subscriptions.length&&(r={skipSubs:u+t.subscriptionGroupSize})):(f=h.typeIndex||0,i?r={typeIndex:f,serverToken:i}:f+1<t.resourceTypes.length&&(r={typeIndex:f+1})),{data:v,partialErrors:w,navigationMetadata:{continuationToken:JSON.stringify(r)}}}})}return n})();t.BrowseData=p})(l||(l={})),l}))