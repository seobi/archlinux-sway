define("HubsExtension/SpecPickerV3/SpecPickerUtil",["require","exports","i","$"],(function(n,t,i,r){"use strict";var u;return (function(n){function e(){return 1234.5678.toLocaleString("en-us",{minimumFractionDigits:2,maximumFractionDigits:2})==="1,234.57"}function h(t,i,r){if(f(t)||u.badPrice(),t<0&&u.negPrice(),f(i)||(i?u.notDecimal():i=2),(i<0||i>20)&&u.badDecimal(),!n.toLocaleStringSupported)return t.toFixed(i);if(!r){var e=o.navigator||{};r=e.userLanguage||e.language||"en-us"}return t.toLocaleString(r,{minimumFractionDigits:i,maximumFractionDigits:i})}var f=r.isNumeric,o=window;n.toLocaleStringSupported=e();var t="",s={badId:t,badPrice:t,negPrice:t,notDecimal:t,badDecimal:t},u=i.getErrorMap(s);n.isToLocaleStringSupported=e;n.formatPrice=h})(u||(u={})),u}));define("HubsExtension/_generated/HtmlTs/SpecPickerV3/Templates/SpecCard",["require","exports","f"],(function(){"use strict";return function(){return'<div class="msportalfx-specpicker msportalfx-bg-default"> <div data-bind="css: \'msportalfx-\' + colorScheme"> <!-- header --> <div class="msportalfx-specpicker-header msportalfx-specpicker-shade1"> <span class="msportalfx-specpicker-header-text msportalfx-tooltip-overflow"> <!-- ko if: specCode --> <span class="msportalfx-specpicker-header-specCode" data-bind="text: specCode"><\/span> <!-- /ko --> <span class="msportalfx-specpicker-header-title" data-bind="text: title"><\/span> <\/span> <!-- ko if: isRecommended --> <span class="msportalfx-specpicker-star" data-bind="image: MsPortalFx.Base.Images.Star()"><\/span> <!-- /ko --> <\/div> <table class="msportalfx-specpicker-table" role="presentation" border="0"> <tbody> <!-- ko foreach: promotedFeatures --> <tr class="msportalfx-specpicker-row msportalfx-specpicker-promotedFeatures"> <td class="msportalfx-specpicker-left"> <div class="msportalfx-specpicker-cell msportalfx-specpicker-shade2 msportalfx-tooltip-overflow"> <span class="msportalfx-specpicker-feature-value" data-bind="text: value"><\/span> <\/div> <\/td> <td class="msportalfx-specpicker-right"> <div class="msportalfx-specpicker-cell msportalfx-specpicker-shade3 msportalfx-tooltip-overflow"> <span class="msportalfx-specpicker-feature-name" data-bind="text: unitDescription"><\/span> <\/div> <\/td> <\/tr> <!-- /ko --> <!-- ko foreach: features --> <tr class="msportalfx-specpicker-row msportalfx-specpicker-extendedFeatures" data-bind="css: { \'msportalfx-specpicker-borderBottom\' : $index() < 5 }"> <td class="msportalfx-specpicker-left"> <div class="msportalfx-specpicker-cell"> <div data-bind="image: iconImage, css:{\'msportalfx-svg-disabled\': $parent.metadata.disabled}"><\/div> <\/div> <\/td> <td class="msportalfx-specpicker-right"> <div class="msportalfx-specpicker-cell" data-bind="css:{\'msportalfx-specpicker-mutipleline\': displayName}"> <div class="msportalfx-specpicker-feature-value msportalfx-tooltip-overflow msportalfx-text-default" data-bind="text: displayValue"><\/div> <div class="msportalfx-specpicker-feature-name msportalfx-tooltip-overflow msportalfx-text-muted-50" data-bind="text: displayName"><\/div> <\/div> <\/td> <\/tr> <!-- /ko --> <\/tbody> <\/table> <!-- ko ifnot: hideCost --> <!-- footer --> <div class="msportalfx-specpicker-footer-container msportalfx-bg-muted-5"> <div class="msportalfx-specpicker-footer"> <!-- loading pricing --> <div class="msportalfx-specpicker-footer-statusMessage msportalfx-tooltip-overflow" data-bind="visible: costObservable().visible() && costObservable().isLoading()"> {0} <\/div> <!-- display pricing --> <div data-bind="visible: costObservable().visible() && !costObservable().isLoading()"> <div class="msportalfx-specpicker-footer-value msportalfx-tooltip-overflow" data-bind="text:costObservable().amountDisplay"><\/div> <div class="msportalfx-specpicker-footer-details msportalfx-tooltip-overflow" data-bind="text:costObservable().caption"><\/div> <\/div> <!-- unable to display pricing --> <div class="msportalfx-specpicker-footer-statusMessage msportalfx-tooltip-overflow" data-bind="visible: !costObservable().visible() && !costObservable().showMessage()"> {1} <\/div> <!-- display a reason message for not displaying pricing, depending on the channel type --> <div class="msportalfx-specpicker-footer-channelMessage msportalfx-tooltip-overflow" data-bind="visible: !costObservable().visible() && costObservable().showMessage(), text: costObservable().message()"><\/div> <\/div> <\/div> <!-- /ko --> <!-- disabled status --> <div class="msportalfx-specpicker-disable-blockui-shield" data-bind="visible: metadata.disabled"><\/div> <div class="msportalfx-specpicker-disable-message-anchor" data-bind="visible: metadata.disabled"> <div class="msportalfx-specpicker-disable-message-container"> <!-- ko ifnot: disabledClick() --> <div class="msportalfx-specpicker-disable-message msportalfx-text-regular" data-bind="text: disabledMessage"><\/div> <!-- /ko --> <!-- ko if: disabledClick() --> <a class="msportalfx-specpicker-disable-message msportalfx-text-regular" data-bind="fxclick: disabledClick(), text: disabledMessage"><\/a> <!-- /ko --> <div class="msportalfx-specpicker-disable-desc" data-bind="pcControl: disabledDescBalloon, visible: disabledDescBalloonVisible"><\/div> <\/div> <\/div> <\/div> <\/div>'}
}));define("HubsExtension/SpecPickerV3/Models/SpecPickerData",["require","exports","ko","HubsExtension/SpecPickerV3/SpecPickerUtil"],(function(n,t,i,r){"use strict";var f=(function(){function n(n){var t=this;this.amount=i.observable(n.amount);this.caption=i.observable(n.caption.format(n.currencyCode||""));this.currencyCode=i.observable(n.currencyCode);this.visible=i.observable(!0);this.isLoading=i.observable(!0);this.showMessage=i.observable(!1);this.message=i.observable("");this.statusCode=i.observable(0);this.amountDisplay=i.pureComputed((function(){var i=t.amount(),u;if(typeof i=="number")return u=n.decimalPrecision===undefined?2:n.decimalPrecision,r.formatPrice(i,u)}),this)}return n})(),u;t.ObservableCost=f;u=(function(){function n(){this.specPicker={selectedSpecId:i.observable(),selectedSpecIds:i.observable(),selectedRecommendedView:i.observable()}}return n})();t.SpecPickerDataModel=u}));define("HubsExtension/SpecPickerV3/SpecPickerCommon",["require","exports","f","a","ko","HubsExtension/SpecPickerV3/SpecPickerClientStrings",
"HubsExtension/SpecPickerV3/Models/SpecPickerData"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){function t(t,i){if(t===undefined||t===null){var r="'{0}' cannot be null or undefined.".format(i);c.Log.writeEntry(2,n.specPickerArea,r);throw new Error(r);}}function a(n,t){var i={};return n.forEach((function(n){var r=t(n);r&&(i[r]=n)})),i}function o(n){return t(n,"feature"),n.iconImage?n.iconImage:n.iconSvgData?{type:1,data:n.iconSvgData}:n.iconName?v(n.iconName):null}function v(n){t(n,"imageName");var u=[w,r.Logos,r],i=u.first((function(t){return t[n]instanceof Function}));return i?i[n]():r.Blank()}function k(n,u,f,e){t(u,"specs");t(f,"features");var h=f.map((function(n){var t=i.clone(n);return t.iconImage=o(n),t})),c=a(h,(function(n){return n.id})),s=u.map((function(n){return n.promotedFeatures.length})),l=s.length?s.reduce((function(n,t){return n<t?t:n})):0;return u.map((function(t){var i=tt(n,t,l,e);return i.features.forEach((function(n){var t=n.id?c[n.id]:null;n.iconImage=o(n);t&&(
n.iconImage||(n.iconImage=t.iconImage),(n.displayName===null||n.displayName===undefined)&&(n.displayName=t.displayName),(n.displayValue===null||n.displayValue===undefined)&&(n.displayValue=t.displayValue));n.iconImage||(n.iconImage=r.Blank());!n.displayValue&&n.displayName&&(n.displayValue=n.displayName,n.displayName="");n.displayName||(n.displayName="");n.displayValue||(n.displayValue="")})),i}))}function d(n,t){return!n||!t?null:t.first((function(t){return t.specId===n}))}function g(n,t){return!n||!t?null:t.first((function(t){return t.id===n}))}function nt(n,t){return!n||!t?[]:t.filter((function(t){return!!~n.indexOf(t.id)}))}function tt(n,i,r,f){t(i,"spec");var s,o,c={id:i.id,specCode:i.specCode,colorScheme:i.colorScheme,title:i.title,shortTitle:i.shortTitle||null,cost:i.cost,costObservable:u.observable(new e.ObservableCost(i.cost)),billingDisabled:u.observable(!1),disabledDescBalloon:s=new l.ViewModel(n),disabledMessage:u.observable(),disabledDescBalloonVisible:u.observable(!1),disabledClick:
u.observable(),metadata:{disabled:u.observable(!1)},features:(i.features||[]).map(h),promotedFeatures:o=(i.promotedFeatures||[]).slice(0,r).map(h),hideCost:f||!1};for(s.type=l.Type.Info;o.length<r;)o.push(y);return c}function p(n,t){t.forEach((function(t){var i=t.costObservable(),r=b.Constants.ChannelType;switch(n){case r.indirectEA:case r.csp:i.showMessage(!0);i.message(f.specListViewPleaseContactYourReseller);break;default:i.showMessage(!1)}}))}function it(t,i){var r=i.firstParty?"{0}":"First Party{0}";r=i.thirdParty?r.format(""):r.format("{0}Third Party");r=r.indexOf("{0}")?r.format(" and "):r.format("");c.Log.writeEntry(0,n.specPickerArea,"Failed to load {0} billing data for spec id {1}".format(r,t))}function rt(n,t,i,r,u,e){var o=function(){n.forEach((function(n){var t=n.costObservable();t.visible(!1);t.isLoading(!1)}))},v=function(){n.forEach((function(n){var t=n.costObservable();t.visible(t.statusCode()!==1);t.isLoading(!1)}))},y=n.every((function(n){return typeof n.cost.amount=="number"})
),l,c,s,a,h;if(y)return l={subscriptionId:i,specResourceSets:[],specsToAllowZeroCost:[],specType:t.specType,reservationProperties:t.reservationProperties},c=u.getSpecsCosts(l,e),c.then((function(t){if(!t){o();return}t.statusCode===10?(o(),p(t.channel,n)):v()}),(function(){o()})),c;if(s=t.resourceMap,!s){o();throw new Error("Could not query spec costs because resourceMap is not provided.");}return a={subscriptionId:i,specResourceSets:s[r]||s["default"],specsToAllowZeroCost:t.specsToAllowZeroCost,specType:t.specType,reservationProperties:t.reservationProperties},h=u.getSpecsCosts(a,e),h.then((function(t){~[0,2,12].indexOf(t.statusCode)?n.forEach((function(n){var i=n.costObservable(),r=t.costs.first((function(t){return t.id===n.id}));r&&(i.amount(r.amount),i.statusCode(r.statusCode),i.currencyCode(r.currencyCode),i.caption(n.cost.caption.format(r.currencyCode)),i.isLoading(!1),i.visible(r.statusCode!==1),r.statusCode===5&&it(r.id,r));i.isLoading()&&(i.isLoading(!1),typeof i.amount()!="number"&&i.
visible(!1))})):t.statusCode===9?(o(),n.forEach((function(n){n.metadata.disabled(!0);n.disabledMessage(f.specCardDefaultDisabledMessage);n.disabledDescBalloon.content(f.specCardNotOfferedInBillingRegion);n.disabledDescBalloonVisible(!0);n.billingDisabled(!0)}))):t.statusCode===10?(o(),p(t.channel,n)):o()})),h.catch((function(n){return o(),Q.reject(n)})),h}var s=i.Base,h=i.clone,c=s.Diagnostics,r=s.Images,w=r.Polychromatic,l=i.ViewModels.Controls.DockedBalloon,b=HubsExtension.Azure.Pricing,y,ut;n.specPickerArea="SpecPicker";n.notNull=t;n.toObject=a;n.getImageFromFeature=o;n.getFrameworkImage=v;n.getSpecCards=k;n.findDisabledSpec=d;n.findSpec=g;n.findSpecs=nt;y={value:null,unitDescription:null};n.renderSpecsCosts=rt,(function(t){function u(n){if(!n.length)return null;var t=0;return n.map((function(n){var t,i;return(t=n.costObservable&&n.costObservable())&&(i=t&&t.amount)&&i&&i()})).filter((function(n){return!!n})).forEach((function(n){t+=n})),t}function o(t,f,e,o,s){try{var l=void 0,a=void 0,c=u(t),h=
u(f);t&&c!==null&&f&&h!==null?(a=h>c?r.SpecPickerUpgrade:h<c?r.SpecPickerDowngrade:r.SpecPickerChanged,l={fromSpecs:t.map((function(n){return n.id})),toSpecs:f.map((function(n){return n.id})),fromCost:c,toCost:h,selectedView:s}):(a=r.SpecPickerChanged,l={toSpec:f.map((function(n){return n.id})),toCost:h,selectedView:s});i.Base.Diagnostics.Telemetry.trace({extension:i.Base.Constants.ExtensionNames.Hubs,source:e,action:a,data:l,assetType:o})}catch(v){i.Base.Diagnostics.Log.writeEntry(2,n.specPickerArea,"Failed to log the telemetry."+v)}}var f,r,e;(function(t){t.SpecPicker=n.specPickerArea})(f=t.Source||(t.Source={})),(function(n){n.SpecPickerUpgrade="SpecPickerUpgrade";n.SpecPickerDowngrade="SpecPickerDowngrade";n.SpecPickerChanged="SpecPickerChanged"})(r=t.Action||(t.Action={})),(function(n){n.Recommended="Recommended";n.All="All";n.NoView="NoView"})(e=t.View||(t.View={}));t.LogTelemetry=o})(ut=n.Telemetry||(n.Telemetry={}))})(o||(o={})),o}));define("HubsExtension/SpecPickerV3/ViewModels/SpecPickerBrowseAllPart",
["require","exports","f","i","o","ko","HubsExtension/SpecPickerV3/SpecPickerClientStrings","HubsExtension/SpecPickerV3/SpecPickerCommon"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(t){var v=i.ViewModels.Forms,w=i.ViewModels.Controls,y=i.Base.Diagnostics,s=y.Telemetry,h=i.isNullOrUndefined,b=i.ViewModels.Controls.InfoBox,p=y.createLog(n),c="SpecPickerBrowseAllPart",l=HubsExtension.Azure.Pricing.Constants.ChannelType,k=(function(){function n(){this.extenderViewModel=f.observable();this.specsCollectionViewModel=f.observable();this.starIcon=i.Base.Images.Star(99);this.viewOptionsVisible=f.observable(!1);this.clientStrings=e;this.valid=f.observable(!1);this.selectedSpecId=f.observable();this.selectedSpecIds=f.observableArray();this.pricingHelp=f.observable();this._specPickerInputs=f.observable();this._hasAccess=f.observable(!0);this._selectRecommendedView=!1}return n.prototype.init=function(n,t,i,r){var u=t&&t.content;this._showViewOptions=r.showViewOptions||function(){};this.
_initCollectionControl=r.initCollectionControl;this._initExtraUiControls=r.initExtraUiControls;this._setupExtensionViewModels=this._createSetupExtension(n,t,i);this._editScopeDisposed=!1;this._initData(n,i);this._initParameterProvider(n,u);this._initCommonControls(n);this._initExtraUiControls(n,u);this._initEvents(n)},n.prototype.onInputsSet=function(n){return this._data.input.cloudName(r.Extension.CloudName.readFromInputs(n)),this._data.input.cloudNameIsInitialized(!0),this._data.loadingPromise},n.prototype._initCommonControls=function(n){var t=window.fx.environment.hubsLinks.pricingHelp;t&&this.pricingHelp(new b.LinkViewModel(n,{image:f.observable(i.Base.Images.Polychromatic.Info()),text:f.observable(e.specListViewLoadingPricingInfo.format(e.pricingHelp)),clickableLink:f.observable(i.ViewModels.Part.createClickableLinkViewModel(f.observable(window.fx.environment.hubsLinks.pricingHelp))),size:f.observable(0)}))},n.prototype._createSetupExtension=function(n){var t=this,i=!0;return function(
){var r,u,o,e;if(i&&(i=!i,r=t.extenderViewModel(),t._initCollectionControl(n),u=r&&r.filterControls&&r.filterControls(),o=t.generalSection,u)){e=t._maxFilterControls;u.length>e&&n.fail("Spec Picker Filter only supports up to "+e+" filter controls");var h=u.map((function(t){return new v.Section.ViewModel(n,{children:f.observableArray([t]),style:f.observable(0)})})),c={children:f.observableArray(h),style:f.observable(3)},s=new v.Section.ViewModel(n,c);o(s);n.registerForDispose(s)}}},n.prototype._getEditScopeRoot=function(){return this.parameterProvider.editScope().root},n.prototype._initData=function(n,t){var u=this;this._data=new a(n,t);this.message=f.pureComputed((function(){return u._data.message()}));var e=this._data.firstParty,i=f.observable(),r=f.observable();this._data.renderPromise.fxOnce(n,(function(n){n.catch((function(){return r(!0)})).then((function(){return i(!0)}))}));this.firstParty=f.pureComputed((function(){return e()&&(!i()||r())}))},n.prototype._initParameterProvider=function(n,t)
{var r=this;this.parameterProvider=new i.ViewModels.ParameterProvider(n,{mapIncomingDataForEditScope:function(i){var u,h,l,a,v;return i?(r._setupExtensionViewModels(),r._initInputs(n,t,i.fromCollectorToProvider),u=i.fromCollectorToProvider,u.originControl=u.originControl||0,s.trace({source:c,action:"SpecLaunchedBy",data:u.originControl}),h=f.observable(),t&&t.selectedSpecId?h(t.selectedSpecId):u&&u.selectedSpecId&&h(u.selectedSpecId),l=f.observableArray(),t&&t.selectedSpecIds?h(t.selectedSpecIds):u&&u.selectedSpecIds&&l(u.selectedSpecIds),(a=l())&&!h()&&h(a[0]),v=o.findDisabledSpec(h(),r._data.getDisabledSpecs()),v&&h(""),{selectedSpecId:h,selectedSpecIds:l}):(r._showErrorMessage(n,e.specPickerUnableToDisplayPricingTiers),n.fail("Incoming data cannot be null or undefined."),{selectedSpecId:f.observable(),selectedSpecIds:f.observableArray()})},mapOutgoingDataForCollector:function(n){r._logTelemetry();o.notNull(n,"outgoing");r._editScopeDisposed=!0;var t=!1;return r.recommendedPlansHotSpot&&
(t=r.recommendedPlansHotSpot.isSelected()),Q(r._data.renderPromise()).isPending()&&s.trace({source:c,action:"SpecPickedBeforePriceLoad"}),{fromCollectorToProvider:null,fromProviderToCollector:{selectedSpecId:n.selectedSpecId(),selectedSpecIds:n.selectedSpecIds(),selectedRecommendedView:t}}}})},n.prototype._initInputs=function(t,r,u){var h=this,s=n._getSpecPickerInputs(u),c,l,o,e,a;return i.deepEquals(this._specPickerInputs(),s)?Q():(this._data.input.collectorInputs(s),this._specPickerInputs(s),c=this._specPickerInputs().preSelectedSpecId,r&&r.selectedSpecId&&(c=r.selectedSpecId),this._preSelectedSpecId=c,l=this._specPickerInputs().preSelectedSpecIds,r&&r.selectedSpecIds&&(l=r.selectedSpecIds),this._preSelectedSpecIds=l,s.selectRecommendedView&&(this._selectRecommendedView=s.selectRecommendedView),o=this.extenderViewModel(),o||t.fail("SpecPickerExtender is required."),e=i.clone(u.options),e.subscriptionId=e.subscriptionId||u.subscriptionId,e.regionId=e.regionId||u.regionId,e.disabledSpecs=
e.disabledSpecs||u.disabledSpecs,e.recommendedSpecIds=e.recommendedSpecIds||u.recommendedSpecIds,e.entityId=e.entityId||u.entityId,e.selectRecommendedView=e.selectRecommendedView||u.selectRecommendedView,o.hasEditPermision&&s.entityId)?(a=o.hasEditPermision(s.entityId,e),a||t.fail("extenderViewModel.hasEditPermision must return a promise"),a.then((function(n){h._hasAccess(n);o.input({selectedSpecId:h._specPickerInputs().preSelectedSpecId,selectedSpecIds:h._specPickerInputs().preSelectedSpecIds,options:e,availableSpecData:f.observableArray(),hideCost:h._specPickerInputs().hideCost})}))):(o.input({selectedSpecId:this._specPickerInputs().preSelectedSpecId,selectedSpecIds:this._specPickerInputs().preSelectedSpecIds,options:e,availableSpecData:f.observableArray(),hideCost:this._specPickerInputs().hideCost}),o.noSpecsMsg&&o.noSpecsMsg()&&this._data.noSpecsMessage(o.noSpecsMsg()),Q())},n.prototype._logTelemetry=function(){var e=this,n=this.specsCollectionViewModel().items(),u=this._getEditScopeRoot(
),s=u.selectedSpecId(),f=u.selectedSpecIds(),h=this._specPickerInputs().preSelectedSpecIds||[],t,i,r;try{r=o.Telemetry.View.NoView;f.length?(t=n.filter((function(n){return!!~h.indexOf(n.id)})),i=n.filter((function(n){return!!~f.indexOf(n.id)}))):(t=n.filter((function(n){return n.id===e._specPickerInputs().preSelectedSpecId})).slice(0,1),i=n.filter((function(n){return n.id===s})).slice(0,1));this.viewOptionsVisible()&&(r=this.recommendedPlansHotSpot&&this.recommendedPlansHotSpot.isSelected()?o.Telemetry.View.Recommended:o.Telemetry.View.All);o.Telemetry.LogTelemetry(t,i,o.Telemetry.Source.SpecPicker,this.specType,r)}catch(c){p.error("Failed to log the telemetry.");p.error(c)}},u.defineProperty(n.prototype,"specType",{get:function(){var n=this._data.input.extenderInputs.specData();return n?n.specType:""},enumerable:!0,configurable:!0}),n.prototype._initEvents=function(n){var t=this,r=f.pureComputed((function(){return t.extenderViewModel()&&t.extenderViewModel().output()}));r.subscribe(n,(function(i)
{i&&(i.specData?(i.disabledSpecs&&t._data.input.extenderInputs.disabledSpecs(i.disabledSpecs),i.recommendedSpecIds&&t._data.input.extenderInputs.recommendedSpecIds(i.recommendedSpecIds),t._data.input.extenderInputs.specData(i.specData)):n.fail("SpecData cannot be null or undefined"))}));this._data.recommendedSpecCards.subscribe(n,(function(n){t.specsCollectionViewModel().recommendedSpecCards(n)}));this._data.allSpecCards.subscribe(n,(function(n){if(n=n.map((function(n){return n=i.clone(n),n.ariaLabel=n.specCode+" "+n.title,n})),n&&n.first((function(n){return n.isRecommended}))){var r=t.specsCollectionViewModel(),u=r.preSelectedSpecId()||[];t._showViewOptions(n,(r.preSelectedSpecIds&&r.preSelectedSpecIds()||[]).concat(u))}t.specsCollectionViewModel().features&&t.specsCollectionViewModel().features(t._data.input.extenderInputs.specData().features);t.specsCollectionViewModel().allSpecCards(n);n.length&&t._data.loadingDeferred.resolve()}));f.reactor(n,(function(){var u=null;t._hasAccess()?r()&&r().failureMessage?
u=r().failureMessage:r()&&!r().specData&&(u=t.clientStrings.specPickerUnableToDisplayPricingTiers):u=i.Resources.Strings.ViewModels.Container.unauthorizedText;u&&t._showErrorMessage(n,u)}))},n._getSpecPickerInputs=function(n){var t={};return n&&(t.subscriptionId=n.subscriptionId,t.regionId=n.regionId,t.disabledSpecs=n.disabledSpecs,t.recommendedSpecIds=n.recommendedSpecIds,t.entityId=n.entityId,t.preSelectedSpecId=n.selectedSpecId,t.preSelectedSpecIds=n.selectedSpecIds,t.selectRecommendedView=!!n.selectRecommendedView,t.hideCost=n.hideCost),t},n.prototype._showErrorMessage=function(n,t){this.valid(!1);n.noDataMessage(t)},__decorate([i.Composition.NotProxied],n.prototype,"specType",null),n})(),a;t.SpecPickerBrowseAllPart=k;a=(function(){function t(i,u){var a=this;this.input={extenderInputs:{specData:f.observable(),disabledSpecs:f.observable(),recommendedSpecIds:f.observable(),availableSpecData:f.observableArray()},collectorInputs:f.observable(),cloudName:f.observable(),cloudNameIsInitialized:
f.observable(!1)};this.allSpecCards=f.observable();this.disabledSpecs=f.observableArray();this.recommendedSpecCards=f.observable();this.message=f.observable();this.renderPromise=f.observable();this.noSpecsMessage=f.observable();this.loadingDeferred=Q.defer();this.loadingPromise=this.loadingDeferred.promise;this.firstParty=f.computed(i,(function(){var i=a.input.collectorInputs(),u=i&&i.regionId,n=a.input.extenderInputs.specData(),t=n&&n.resourceMap,r=t&&(t[u]||t["default"]);return n&&!n.specs.every((function(n){var t=r&&r.first((function(t){return t.id===n.id}));return!(t&&t.firstParty&&t.firstParty.length)}))}));f.computed(i,(function(){var n=a.input.extenderInputs;return{specData:n.specData(),disabledSpecs:n.disabledSpecs(),recommendedSpecIds:n.recommendedSpecIds(),specPickerInputs:a.input.collectorInputs(),cloudName:a.input.cloudName(),cloudNameIsInitalized:a.input.cloudNameIsInitialized()}})).extend({throttle:1}).subscribe(i,(function(f){var v=f.specData,p,d,y,w,b,k;f.specPickerInputs&&v&&(p=
a.getRecommendedSpecIds(),y=t._getSpecCards(i,v,d=a.getDisabledSpecs(),p,a.allSpecCards()||[],f.specPickerInputs.hideCost),a.disabledSpecs(d),p&&(w=[],p.forEach((function(n){var t=y.first((function(t){return t.isRecommended&&t.id===n}));t&&w.push(t)})),a.recommendedSpecCards(w)),a.allSpecCards(y),y.length?a.input.collectorInputs().hideCost?(a.renderPromise(Q()),a.message(h(v.message)?"":v.message)):(b=o.renderSpecsCosts(y,v,f.specPickerInputs.subscriptionId,f.specPickerInputs.regionId,u,f.cloudName).catch((function(t){var i=r.Po.getMetadataId(v).split("-")[0];return r.Rpc.internalClient.log(i,{level:2,code:0,area:n.normalize(),message:t.message}),Q.reject(t)})),a.renderPromise(Q(b)),k=s.startTrace({source:c,action:"Call Render Specs Costs"}),b.then((function(n){if(n){var t;n.statusCode===0?t=n.isEASubscription||n.channel===l.directEA?h(v.messageForEA)?"":v.messageForEA:h(v.message)?"":v.message:n.statusCode===10?n.channel===l.indirectEA&&(t=h(v.messageForIndirectEA)?"":v.messageForIndirectEA):
n.statusCode===12&&(t=n.channel===l.indirectEA?e.indirectEARetailMessage:e.directEARetailMessage);a.message(t)}})).then((function(){s.endTrace(k,"Complete")})).catch((function(n){return s.endTrace(k,"failed"),Q.reject(n)}))):a.noSpecsMessage.subscribeAndRun(i,(function(n){i.noDataMessage(n||e.specListViewNoDataMsg)})))}))}return t.prototype.getDisabledSpecs=function(){var t=this.input.extenderInputs.disabledSpecs(),n;return t?t:(n=this.input.collectorInputs(),n)?n.disabledSpecs:null},t.prototype.getRecommendedSpecIds=function(){var t=this.input.extenderInputs.recommendedSpecIds(),n;return t?t:(n=this.input.collectorInputs(),n)?n.recommendedSpecIds:null},t._setSpecCardToDisabled=function(n,t){var i,r;n.metadata.disabled(!0);n.disabledMessage(t.message||e.specCardDefaultDisabledMessage);t.supplyBladeReferenceAsync&&n.disabledClick();i=t.supplyBladeReferenceAsync;i&&n.disabledClick((function(n){return n.openBladeAsync(Q(i()))}));t.helpBalloonMessage?(n.disabledDescBalloon.content(t.helpBalloonMessage),
t.helpBalloonLinkUri&&(r=new w.Balloon.Link(t.helpBalloonLinkText||t.helpBalloonLinkUri,t.helpBalloonLinkUri),n.disabledDescBalloon.link(r)),n.disabledDescBalloonVisible(!0)):n.disabledDescBalloonVisible(!1)},t._getSpecCards=function(n,t,r,u,f,e){var l=this;if(!t)return[];var h=[],c=[],s=o.getSpecCards(n,t.specs,t.features,e);return f.length!==s.length||i.unique(f.concat(s),(function(n,t){return n.id===t.id})).length>s.length||(s=f),s.forEach((function(n){var t=!1,i;n.billingDisabled()||(n.disabledDescBalloonVisible(!1),n.metadata.disabled(!1));r&&r.length>0&&(i=r.first((function(t){return n.id===t.specId})),i&&(t=!0,l._setSpecCardToDisabled(n,i)));n.isRecommended=!t&&u&&u.length?!!u.first((function(t){return t===n.id})):!1;t?h.push(n):c.push(n)})),c.concat(h)},t})();t.DataReactor=a})(s||(s={})),s}));define("HubsExtension/_generated/Blades/HubsExtensionPickerStyles.css",["require","exports"],(function(){"use strict";return".ext-hubs-picker-grid-details-parent{vertical-align:middle}.ext-hubs-picker-grid-details{margin-top:6px}.ext-hubs-picker-grid-text-subheader{margin-top:2px}.ext-hubs-specPicker-container{width:100%}.ext-hubs-specPicker-container .ext-hubs-specPicker-enterpriseAgreementMessage{margin:10px;margin-top:0;border-left:6px solid #ffb900;padding-left:10px}"})
)